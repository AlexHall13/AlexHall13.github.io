webpackJsonp([46],{"./functions/api/Billing/Invoice/InvoiceCoupon/Model.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/immutable/dist/immutable.js");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){i(t,e);function t(){o(this,t);return a(this,e.apply(this,arguments))}t.createFromResult=function e(n){var r=n.id,o=n.percent_off,a=n.amount_off;return new t({id:r,percentOff:o,amountOff:a})};return t}((0,r.Record)({id:"",percentOff:null,amountOff:null}));t.default=l},"./functions/api/Billing/Invoice/InvoiceLine/Model.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/immutable/dist/immutable.js");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){i(t,e);function t(){o(this,t);return a(this,e.apply(this,arguments))}t.createFromResult=function e(n){var r=n.quantity,o=n.description,a=n.amount,i=n.currency,l=n.proration,u=n.plan,s=n.period;return new t({quantity:r,description:o,amount:a,currency:i,proration:l,plan:u.id,startAt:new Date(1e3*s.start),endAt:new Date(1e3*s.end)})};return t}((0,r.Record)({quantity:0,description:null,plan:"",currency:"usd",proration:false,amount:0,startAt:new Date,endAt:new Date}));t.default=l},"./functions/api/Billing/Invoice/Model.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/immutable/dist/immutable.js");var o=n("./functions/api/Billing/Invoice/InvoiceLine/Model.js");var a=u(o);var i=n("./functions/api/Billing/Invoice/InvoiceCoupon/Model.js");var l=u(i);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){p(t,e);function t(){s(this,t);return c(this,e.apply(this,arguments))}t.createFromResult=function e(n){return new t({id:n.id,amountDue:n.amount_due,subtotal:n.subtotal,total:n.total,currency:n.currency,date:new Date(1e3*n.date),periodStart:new Date(1e3*n.period_start),periodEnd:new Date(1e3*n.period_end),nextPaymentAttempt:n.next_payment_attempt?new Date(1e3*n.next_payment_attempt):null,coupon:n.discount&&n.discount.coupon?l.default.createFromResult(n.discount.coupon):null,lines:n.lines.data.filter(function(e){return Boolean(e.plan)}).sort(function(e,t){if(e.period.start===t.period.start)return e.amount-t.amount;return e.period.start-t.period.start}).map(function(e){return a.default.createFromResult(e)})})};return t}((0,r.Record)({id:null,amountDue:0,subtotal:0,total:0,currency:"usd",date:new Date,periodStart:new Date,periodEnd:new Date,nextPaymentAttempt:null,coupon:null,lines:[]}));t.default=f},"./node_modules/amator/index.js":function(e,t,n){var r=n("./node_modules/bezier-easing/src/index.js");var o={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};e.exports=a;function a(e,t,n){var r=Object.create(null);var a=Object.create(null);n=n||{};var u="function"===typeof n.easing?n.easing:o[n.easing];if(!u){n.easing&&console.warn("Unknown easing function in amator: "+n.easing);u=o.ease}var s="function"===typeof n.step?n.step:i;var c="function"===typeof n.done?n.done:i;var p=l(n.scheduler);var f=Object.keys(t);f.forEach(function(n){r[n]=e[n];a[n]=t[n]-e[n]});var d=n.duration||400;var m=Math.max(1,.06*d);var v;var h=0;v=p.next(b);return{cancel:y};function y(){p.cancel(v);v=0}function b(){var t=u(h/m);h+=1;g(t);if(h<=m){v=p.next(b);s(e)}else{v=0;setTimeout(function(){c(e)},0)}}function g(t){f.forEach(function(n){e[n]=a[n]*t+r[n]})}}function i(){}function l(e){if(!e){var t="undefined"!==typeof window&&window.requestAnimationFrame;return t?u():s()}if("function"!==typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!==typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}function u(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function s(){return{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}},"./node_modules/bezier-easing/src/index.js":function(e,t){var n=4;var r=.001;var o=1e-7;var a=10;var i=11;var l=1/(i-1);var u="function"===typeof Float32Array;function s(e,t){return 1-3*t+3*e}function c(e,t){return 3*t-6*e}function p(e){return 3*e}function f(e,t,n){return((s(t,n)*e+c(t,n))*e+p(t))*e}function d(e,t,n){return 3*s(t,n)*e*e+2*c(t,n)*e+p(t)}function m(e,t,n,r,i){var l,u,s=0;do{u=t+(n-t)/2;l=f(u,r,i)-e;l>0?n=u:t=u}while(Math.abs(l)>o&&++s<a);return u}function v(e,t,r,o){for(var a=0;a<n;++a){var i=d(t,r,o);if(0===i)return t;var l=f(t,r,o)-e;t-=l/i}return t}e.exports=function e(t,n,o,a){if(!(0<=t&&t<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");var s=u?new Float32Array(i):new Array(i);if(t!==n||o!==a)for(var c=0;c<i;++c)s[c]=f(c*l,t,o);function p(e){var n=0;var a=1;var u=i-1;for(;a!==u&&s[a]<=e;++a)n+=l;--a;var c=(e-s[a])/(s[a+1]-s[a]);var p=n+c*l;var f=d(p,t,o);return f>=r?v(e,p,t,o):0===f?p:m(e,n,n+l,t,o)}return function e(r){if(t===n&&o===a)return r;if(0===r)return 0;if(1===r)return 1;return f(p(r),n,a)}}},"./node_modules/react-stripe-elements/es/components/Element.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o=n("./node_modules/react/index.js");var a=c(o);var i=n("./node_modules/prop-types/index.js");var l=c(i);var u=n("./node_modules/react-stripe-elements/es/utils/shallowEqual.js");var s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}var v=function e(){};var h=function e(t){var n=t.className,r=t.elementRef,o=t.onChange,a=t.onFocus,i=t.onBlur,l=t.onReady,u=m(t,["className","elementRef","onChange","onFocus","onBlur","onReady"]);return u};var y=function e(t){var n,o;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o=n=function(e){d(n,e);function n(e,r){p(this,n);var o=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,r));o.handleRef=function(e){o._ref=e};var a=h(o.props);o._element=o.context.elements.create(t,a);o._setupEventListeners();o._options=a;return o}r(n,[{key:"componentDidMount",value:function e(){this._element.mount(this._ref);i.sourceType&&this.context.registerElement(i.sourceType,this._element)}},{key:"componentWillReceiveProps",value:function e(t){var n=h(t);if(0!==Object.keys(n).length&&!(0,s.default)(n,this._options)){this._options=n;this._element.update(n)}}},{key:"componentWillUnmount",value:function e(){this._element.destroy();this.context.unregisterElement(this._element)}},{key:"_setupEventListeners",value:function e(){var t=this;this._element.on("ready",function(){t.props.elementRef(t._element);t.props.onReady()});this._element.on("change",function(e){t.props.onChange(e)});this._element.on("blur",function(){var e;return(e=t.props).onBlur.apply(e,arguments)});this._element.on("focus",function(){var e;return(e=t.props).onFocus.apply(e,arguments)})}},{key:"render",value:function e(){return a.default.createElement("div",{className:this.props.className,ref:this.handleRef})}}]);return n}(a.default.Component),n.propTypes={className:l.default.string,elementRef:l.default.func,onChange:l.default.func,onBlur:l.default.func,onFocus:l.default.func,onReady:l.default.func},n.defaultProps={className:"",elementRef:v,onChange:v,onBlur:v,onFocus:v,onReady:v},n.contextTypes={elements:l.default.object.isRequired,registerElement:l.default.func.isRequired,unregisterElement:l.default.func.isRequired},o};t.default=y},"./node_modules/react-stripe-elements/es/components/Elements.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o=n("./node_modules/react/index.js");var a=u(o);var i=n("./node_modules/prop-types/index.js");var l=u(i);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){d(t,e);function t(e,n){p(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.handleRegisterElement=function(e,t){r.setState(function(n){return{registeredElements:[].concat(c(n.registeredElements),[{type:e,element:t}])}})};r.handleUnregisterElement=function(e){r.setState(function(t){return{registeredElements:t.registeredElements.filter(function(t){var n=t.element;return n!==e})}})};var o=r.props,a=o.children,i=s(o,["children"]);r._elements=r.context.stripe.elements(i);r.state={registeredElements:[]};return r}r(t,[{key:"getChildContext",value:function e(){return{elements:this._elements,registerElement:this.handleRegisterElement,unregisterElement:this.handleUnregisterElement,registeredElements:this.state.registeredElements}}},{key:"render",value:function e(){return a.default.Children.only(this.props.children)}}]);return t}(a.default.Component);m.childContextTypes={elements:l.default.object.isRequired,registerElement:l.default.func.isRequired,unregisterElement:l.default.func.isRequired,registeredElements:l.default.arrayOf(l.default.shape({type:l.default.string.isRequired,element:l.default.object.isRequired})).isRequired};m.contextTypes={stripe:l.default.object.isRequired};m.defaultProps={children:null};t.default=m},"./node_modules/react-stripe-elements/es/components/PaymentRequestButtonElement.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var a=n("./node_modules/react/index.js");var i=p(a);var l=n("./node_modules/prop-types/index.js");var u=p(l);var s=n("./node_modules/react-stripe-elements/es/utils/shallowEqual.js");var c=p(s);function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}var h=function e(){};var y=function e(t){var n=t.className,r=t.elementRef,o=t.onBlur,a=t.onClick,i=t.onFocus,l=t.onReady,u=t.paymentRequest,s=v(t,["className","elementRef","onBlur","onClick","onFocus","onReady","paymentRequest"]);return s};var b=function(e){m(t,e);function t(e,n){f(this,t);var o=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.handleRef=function(e){o._ref=e};var a=y(e);o._element=o.context.elements.create("paymentRequestButton",r({paymentRequest:e.paymentRequest},a));o._options=a;o._element.on("ready",function(){o.props.elementRef(o._element);o.props.onReady()});o._element.on("focus",function(){var e;return(e=o.props).onFocus.apply(e,arguments)});o._element.on("click",function(){var e;return(e=o.props).onClick.apply(e,arguments)});o._element.on("blur",function(){var e;return(e=o.props).onBlur.apply(e,arguments)});return o}o(t,[{key:"componentDidMount",value:function e(){this._element.mount(this._ref)}},{key:"componentWillReceiveProps",value:function e(t){this.props.paymentRequest!==t.paymentRequest&&console.warn("Unsupported prop change: paymentRequest is not a customizable property.");var n=y(t);if(0!==Object.keys(n).length&&!(0,c.default)(n,this._options)){this._options=n;this._element.update(n)}}},{key:"componentWillUnmount",value:function e(){this._element.destroy()}},{key:"render",value:function e(){return i.default.createElement("div",{className:this.props.className,ref:this.handleRef})}}]);return t}(i.default.Component);b.propTypes={className:u.default.string,elementRef:u.default.func,onBlur:u.default.func,onClick:u.default.func,onFocus:u.default.func,onReady:u.default.func,paymentRequest:u.default.shape({canMakePayment:u.default.func.isRequired,on:u.default.func.isRequired,show:u.default.func.isRequired}).isRequired};b.defaultProps={className:"",elementRef:h,onBlur:h,onClick:h,onFocus:h,onReady:h};b.contextTypes={elements:u.default.object.isRequired,registerElement:u.default.func.isRequired,unregisterElement:u.default.func.isRequired};t.default=b},"./node_modules/react-stripe-elements/es/components/Provider.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o=n("./node_modules/react/index.js");var a=u(o);var i=n("./node_modules/prop-types/index.js");var l=u(i);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){f(t,e);function t(e){c(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(!window.Stripe)throw new Error("Please load Stripe.js (https://js.stripe.com/v3/) on this page to use react-stripe-elements.");var r=n.props,o=r.apiKey,a=r.children,i=s(r,["apiKey","children"]);window.Stripe.__cachedInstances=window.Stripe.__cachedInstances||{};var l="key="+o+" options="+JSON.stringify(i);n._stripe=window.Stripe.__cachedInstances[l]||window.Stripe(o,i);window.Stripe.__cachedInstances[l]=n._stripe;n._didWarn=false;return n}r(t,[{key:"getChildContext",value:function e(){return{stripe:this._stripe}}},{key:"componentWillReceiveProps",value:function e(t){if(!this._didWarn&&this.props.apiKey!==t.apiKey&&window.console&&window.console.error){this._didWarn=true;console.error("StripeProvider does not support changing the apiKey parameter.")}}},{key:"render",value:function e(){return a.default.Children.only(this.props.children)}}]);return t}(a.default.Component);d.propTypes={apiKey:l.default.string.isRequired,children:l.default.node};d.childContextTypes={stripe:l.default.object.isRequired};d.defaultProps={children:null};t.default=d},"./node_modules/react-stripe-elements/es/components/inject.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var i=n("./node_modules/react/index.js");var l=c(i);var u=n("./node_modules/prop-types/index.js");var s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function e(t){var n,i;var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var c=u.withRef,v=void 0!==c&&c;return i=n=function(e){m(n,e);function n(e,t){f(this,n);if(!t||!t.registeredElements)throw new Error("It looks like you are trying to inject Stripe context outside of an Elements context.\nPlease be sure the component that calls createSource or createToken is within an <Elements> component.");var r=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));r.requireElement=function(e){var t=r.findElement(e);if(t)return t;throw new Error("You did not specify the type of Source or Token to create.\n        We could not infer which Element you want to use for this operation.")};r.findElement=function(e){var t=r.context.registeredElements||[];var n="auto"===e?t:t.filter(function(t){var n=t.type;return n===e});if(1===n.length)return n[0].element;if(n.length>1)throw new Error("You did not specify the type of Source or Token to create.\n        We could not infer which Element you want to use for this operation.");return null};r.wrappedCreateToken=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"object"===("undefined"===typeof e?"undefined":o(e))){var n=e.type,a=p(e,["type"]);var i="string"===typeof n?n:"auto";var l=r.requireElement(i);return r.context.stripe.createToken(l,a)}if("string"===typeof e)return r.context.stripe.createToken(e,t);throw new Error("Invalid options passed to createToken. Expected an object, got "+("undefined"===typeof e?"undefined":o(e))+".")};r.wrappedCreateSource=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&"object"===("undefined"===typeof e?"undefined":o(e))){var t=e.type,n=p(e,["type"]);var a="string"===typeof t?t:"auto";var i=r.findElement(a);if(i)return r.context.stripe.createSource(i,n);if("auto"!==a)return r.context.stripe.createSource(e);throw new Error("You did not specify the type of Source to create.\n          We also could not find any Elements in the current context.")}throw new Error("Invalid options passed to createSource. Expected an object, got "+("undefined"===typeof e?"undefined":o(e))+".")};return r}a(n,[{key:"getWrappedInstance",value:function e(){if(!v)throw new Error("To access the wrapped instance, the `{withRef: true}` option must be set when calling `injectStripe()`");return this.wrappedInstance}},{key:"stripeProps",value:function e(){return r({},this.context.stripe,{createToken:this.wrappedCreateToken,createSource:this.wrappedCreateSource})}},{key:"render",value:function e(){var n=this;return l.default.createElement(t,r({},this.props,{stripe:this.stripeProps(),ref:v?function(e){n.wrappedInstance=e}:null}))}}]);return n}(l.default.Component),n.contextTypes={stripe:s.default.object.isRequired,registeredElements:s.default.arrayOf(s.default.shape({element:s.default.object.isRequired,type:s.default.string.isRequired}))},n.displayName="InjectStripe("+(t.displayName||t.name||"Component")+")",i};t.default=v},"./node_modules/react-stripe-elements/es/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PaymentRequestButtonElement=t.PostalCodeElement=t.CardCVCElement=t.CardExpiryElement=t.CardNumberElement=t.CardElement=t.Elements=t.injectStripe=t.StripeProvider=void 0;var r=n("./node_modules/react-stripe-elements/es/components/Provider.js");var o=d(r);var a=n("./node_modules/react-stripe-elements/es/components/inject.js");var i=d(a);var l=n("./node_modules/react-stripe-elements/es/components/Elements.js");var u=d(l);var s=n("./node_modules/react-stripe-elements/es/components/Element.js");var c=d(s);var p=n("./node_modules/react-stripe-elements/es/components/PaymentRequestButtonElement.js");var f=d(p);function d(e){return e&&e.__esModule?e:{default:e}}var m=(0,c.default)("card",{sourceType:"card"});var v=(0,c.default)("cardNumber",{sourceType:"card"});var h=(0,c.default)("cardExpiry");var y=(0,c.default)("cardCvc");var b=(0,c.default)("postalCode");t.StripeProvider=o.default;t.injectStripe=i.default;t.Elements=u.default;t.CardElement=m;t.CardNumberElement=v;t.CardExpiryElement=h;t.CardCVCElement=y;t.PostalCodeElement=b;t.PaymentRequestButtonElement=f.default},"./node_modules/react-stripe-elements/es/utils/shallowEqual.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function e(t,n){var r=Object.keys(t);var o=Object.keys(n);return r.length===o.length&&r.every(function(e){return n.hasOwnProperty(e)&&n[e]===t[e]})};t.default=r},"./node_modules/scroll-into-view-if-needed/dist/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=function(e,t,n,r){if(!e)throw new Error("Element is required in scrollIntoViewIfNeeded");function a(e,n,r,o){return false===t||r<=e+o&&e<=n+o?Math.min(r,Math.max(n,e)):(n+r)/2}function i(e,t,n,r){return{left:e,top:t,width:n,height:r,right:e+n,bottom:t+r,translate:function o(a,l){return i(a+e,l+t,n,r)},relativeFromTo:function o(a,l){var s=e,c=t;a=a.offsetParent;l=l.offsetParent;if(a===l)return u;for(;a;a=a.offsetParent){s+=a.offsetLeft+a.clientLeft;c+=a.offsetTop+a.clientTop}for(;l;l=l.offsetParent){s-=l.offsetLeft+l.clientLeft;c-=l.offsetTop+l.clientTop}return i(s,c,n,r)}}}var l,u=i(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);while((l=e.parentNode)instanceof HTMLElement&&e!==r){var s=l.offsetLeft+l.clientLeft;var c=l.offsetTop+l.clientTop;u=u.relativeFromTo(e,l).translate(-s,-c);var p=a(l.scrollLeft,u.right-l.clientWidth,u.left,l.clientWidth);var f=a(l.scrollTop,u.bottom-l.clientHeight,u.top,l.clientHeight);if(n)(0,o.default)(l,{scrollLeft:p,scrollTop:f},n);else{l.scrollLeft=p;l.scrollTop=f}u=u.translate(s-l.scrollLeft,c-l.scrollTop);e=l}};var r=n("./node_modules/amator/index.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}},"./website/components/RouteDashboard/RouteOrganization/Billing/Billing.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n("./node_modules/react/index.js");var u=P(l);var s=n("./node_modules/react-stripe-elements/es/index.js");var c=n("./node_modules/react-redux/es/index.js");var p=n("./flux/index.js");var f=n("./core/index.js");var d=n("./functions/api/Billing/Invoice/Model.js");var m=R(d);var v=n("./website/components/RouteDashboard/RouteOrganization/Billing/PlansPanel/index.js");var h=n("./website/components/RouteDashboard/RouteOrganization/Billing/CardPanel/index.js");var y=R(h);var b=n("./website/components/RouteDashboard/RouteOrganization/Billing/InfoPanel/index.js");var g=R(b);var E=n("./website/components/RouteDashboard/RouteOrganization/Billing/InvoicesPanel/index.js");var w=R(E);var O=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/index.js");var _=n("./website/components/RouteDashboard/RouteOrganization/Billing/Popup/index.js");function R(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function j(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=(r=p.Connectors.database(function(e){var t=e.org;return{billingConfig:f.BillingConfig.queryByID(t.uid).defaultsTo(null),orgUsage:f.OrgUsage.queryByID(t.uid).defaultsTo(null)}}),o=(0,c.connect)(function(e,t){var n=e.config,r=e.user;var o=t.org,a=t.billingConfig;return{user:r,config:n,billingConfig:a||f.BillingConfig.create({orgID:o.uid,billingAddress:{organization:o.name}}),authHeader:r.authorizationHeader}}),a=p.Connectors.graphQL(function(e){var t=e.org,n=e.config,r=e.billingConfig,o=e.authHeader;return{upcomingInvoice:{url:n.urls.api,query:O.upcomingInvoiceQuery,operationName:"upcomingInvoice",headers:{Authorization:o},variables:{id:t.baseDomain,activePlan:r&&r.activePlan,coupon:r&&r.coupon,fetch:r&&"free"!==r.activePlan&&"free"===r.plan},mapState:function e(t){var n=t.data;return n&&n.organization&&n.organization.billing?n.organization.billing.upcomingInvoice:null},background:true},invoices:{url:n.urls.api,query:O.invoicesQuery,operationName:"invoices",headers:{Authorization:o},variables:{id:t.baseDomain,customerID:r&&r.customerID,subscriptionID:r&&r.subscriptionID},mapState:function e(t){var n=t.data;return n&&n.organization&&n.organization.billing&&n.organization.billing.invoices?n.organization.billing.invoices:null},background:true}}}),r(i=o(i=a(i=function(e){T(t,e);function t(){var n=this;var r,o,a;C(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=S(this,e.call.apply(e,[this].concat(l))),o),o.state={selectedPanel:"plans",displayUpdateCardPopup:false,displayUpgradePlanPopup:false,displayUpcomingInvoicePopup:false,newPlan:null,displayInfoPopup:false,displayCouponPopup:false,displayDowngradePopup:false},o.onUpdateCard=function(){var e=j(regeneratorRuntime.mark(function e(t){var r=t.token,a=t.coupon;var i,l,u,s,c,f;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=o.props,l=i.dispatch,u=i.org,s=i.billingConfig;c=o.state.newPlan;f=s.merge({token:r,coupon:a||s.coupon,error:null,plan:c||s.plan});t.next=5;return l(p.Flux.organization.updateBillingConfig(u,s,f));case 5:case"end":return t.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),o.onUpdatePlan=function(){var e=j(regeneratorRuntime.mark(function e(t){var r,a,i,l,u;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=o.props,a=r.org,i=r.billingConfig,l=r.dispatch;u=o.state.newPlan;n.next=4;return l(p.Flux.organization.updateBillingConfig(a,i,i.merge({error:null,plan:u,coupon:t||i.coupon})));case 4:case"end":return n.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),o.onSwitchPlan=function(){var e=j(regeneratorRuntime.mark(function e(t){var r,a,i,l,u;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=o.props,a=r.billingConfig,i=r.user,l=r.org,u=r.dispatch;if(!f.BillingConfig.isUpgrade(a.plan,t)){n.next=4;break}o.setState({newPlan:t,displayUpgradePlanPopup:true});return n.abrupt("return");case 4:if(!(f.BillingConfig.isDowngrade(a.plan,t)&&!i.isSiteAdmin)){n.next=7;break}o.setState({displayDowngradePopup:true});return n.abrupt("return");case 7:n.next=9;return u(p.Flux.organization.updateBillingConfig(l,a,a.merge({plan:t})));case 9:case"end":return n.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),o.onUpgradePlanClose=function(){o.setState({displayUpgradePlanPopup:false})},o.onDowngradePopupClose=function(){o.setState({displayDowngradePopup:false})},o.onUpdateCardPopupClose=function(){o.setState({displayUpdateCardPopup:false})},o.onUpdateCardPopupDisplay=function(){o.setState({displayUpdateCardPopup:true})},o.onUpcomingInvoicePopupClose=function(){o.setState({displayUpcomingInvoicePopup:false})},o.onUpcomingInvoicePopupDisplay=function(){o.setState({displayUpcomingInvoicePopup:true})},o.onInfoPopupClose=function(){o.setState({displayInfoPopup:false,newPlan:null})},o.onInfoPopupDisplay=function(){o.setState({displayInfoPopup:true})},o.onCouponPopupClose=function(){o.setState({displayCouponPopup:false})},o.onCouponPopupDisplay=function(){o.setState({displayCouponPopup:true})},o.onTogglePlans=function(){o.setState({selectedPanel:"plans"})},o.onToggleCard=function(){o.setState({selectedPanel:"card"})},o.onToggleInfo=function(){o.setState({selectedPanel:"info"})},o.onToggleInvoices=function(){o.setState({selectedPanel:"invoices"})},r),S(o,a)}t.prototype.render=function e(){var t=this.props,n=t.config,r=t.billingConfig,o=t.org,a=t.invoices,i=t.upcomingInvoice,l=t.orgUsage;var c=this.state,p=c.newPlan,d=c.selectedPanel,m=c.displayUpdateCardPopup,h=c.displayUpgradePlanPopup,b=c.displayUpcomingInvoicePopup,E=c.displayInfoPopup,O=c.displayCouponPopup,R=c.displayDowngradePopup;return u.createElement(s.StripeProvider,{apiKey:n.stripe.public_key},u.createElement(u.Fragment,null,o.type?u.createElement(v.NonProfitPlansPanel,{type:o.type,isCollapsed:"plans"!==d,onToggle:this.onTogglePlans}):u.createElement(v.PlansPanel,{billingConfig:r,orgUsage:l||f.OrgUsage.create(),upcomingInvoice:i,isCollapsed:"plans"!==d,onToggle:this.onTogglePlans,onSwitchPlan:this.onSwitchPlan,onUpcomingInvoicePopupDisplay:this.onUpcomingInvoicePopupDisplay}),r.cardID&&u.createElement(s.Elements,null,u.createElement(y.default,{billingConfig:r,upcomingInvoice:i,isCollapsed:"card"!==d,onToggle:this.onToggleCard,onUpdateCardPopupDisplay:this.onUpdateCardPopupDisplay,onCouponPopupDisplay:this.onCouponPopupDisplay})),r.cardID&&u.createElement(g.default,{billingConfig:r,isCollapsed:"info"!==d,onToggle:this.onToggleInfo,onInfoPopupDisplay:this.onInfoPopupDisplay}),r.customerID&&u.createElement(w.default,{billingConfig:r,org:o,invoices:a,isCollapsed:"invoices"!==d,onToggle:this.onToggleInvoices}),m&&u.createElement(s.Elements,null,u.createElement(_.UpdateCardPopup,{billingConfig:r,onClose:this.onUpdateCardPopupClose,onSuccess:this.onUpdateCard})),h&&u.createElement(s.Elements,null,u.createElement(_.UpgradePlanPopup,{billingConfig:r,orgUsage:l,plan:p,onUpdateCard:this.onUpdateCard,onUpdatePlan:this.onUpdatePlan,onInfoPopupDisplay:this.onInfoPopupDisplay,onClose:this.onUpgradePlanClose})),b&&i&&u.createElement(_.UpcomingInvoicePopup,{billingConfig:r,upcomingInvoice:i,orgUsage:l,onClose:this.onUpcomingInvoicePopupClose}),E&&u.createElement(_.InfoPopup,{org:o,billingConfig:r,onClose:this.onInfoPopupClose,plan:p}),O&&u.createElement(_.CouponPopup,{org:o,billingConfig:r,onClose:this.onCouponPopupClose}),R&&u.createElement(_.DowngradePopup,{onClose:this.onDowngradePopupClose})))};return t}(u.Component))||i)||i)||i);t.default=x},"./website/components/RouteDashboard/RouteOrganization/Billing/CardPanel/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteDashboard/RouteOrganization/Billing/CardPanel/CardPanel.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteDashboard/RouteOrganization/Billing/InfoPanel/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteDashboard/RouteOrganization/Billing/InfoPanel/InfoPanel.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteDashboard/RouteOrganization/Billing/InvoicesPanel/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteDashboard/RouteOrganization/Billing/InvoicesPanel/InvoicesPanel.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteDashboard/RouteOrganization/Billing/PlansPanel/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NonProfitPlansPanel=t.PlansPanel=void 0;var r=n("./website/components/RouteDashboard/RouteOrganization/Billing/PlansPanel/PlansPanel.js");var o=l(r);var a=n("./website/components/RouteDashboard/RouteOrganization/Billing/PlansPanel/NonProfitPlansPanel.js");var i=l(a);function l(e){return e&&e.__esModule?e:{default:e}}t.PlansPanel=o.default;t.NonProfitPlansPanel=i.default},"./website/components/RouteDashboard/RouteOrganization/Billing/Popup/CouponPopup.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=c(a);var l=n("./node_modules/react-redux/es/index.js");n("./core/index.js");var u=n("./styleguide/index.js");var s=n("./flux/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(r=(0,l.connect)(),r(o=function(e){m(t,e);function t(){var n=this;var r,o,a;f(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=d(this,e.call.apply(e,[this].concat(l))),o),o.state={coupon:o.props.billingConfig.coupon||""},o.onSave=p(regeneratorRuntime.mark(function e(){var t,r,a,i,l;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.dispatch,a=t.org,i=t.billingConfig,l=t.onClose;n.next=3;return r(s.Flux.organization.updateBillingConfig(a,i,i.merge({coupon:o.state.coupon})));case 3:l();case 4:case"end":return n.stop()}},e,n)})),o.onCouponChange=function(e){o.setState({coupon:e.target.value})},r),d(o,a)}t.prototype.render=function e(){var t=this.props.onClose;var n=this.state.coupon;return i.createElement(u.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:t},i.createElement(u.Modal,{size:u.Modal.SIZES.small},i.createElement(u.Modal.Header,null,i.createElement(u.Modal.Title,null,"Add coupon")),i.createElement(u.Modal.Body,null,i.createElement(u.Form.Input,{type:"text",placeholder:"Coupon code",value:n,onChange:this.onCouponChange})),i.createElement(u.Modal.Footer,null,i.createElement(u.Button,{kind:"cancel",onClick:t},"Cancel"),i.createElement(u.Button,{kind:"primary",onClick:this.onSave},"Apply coupon"))))};return t}(i.Component))||o);t.default=v},"./website/components/RouteDashboard/RouteOrganization/Billing/Popup/DowngradePopup.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=l(r);var a=n("./common/index.js");var i=n("./styleguide/index.js");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){c(t,e);function t(){var n,r,o;u(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return o=(n=(r=s(this,e.call.apply(e,[this].concat(l))),r),r.onContactUs=function(){var e=r.props.onClose;(0,a.openSupportDialog)();e()},n),s(r,o)}t.prototype.render=function e(){var t=this.props.onClose;return o.createElement(i.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:t},o.createElement(i.Modal,{size:i.Modal.SIZES.small},o.createElement(i.Modal.Header,null,o.createElement(i.Modal.Title,null,"Downgrade")),o.createElement(i.Modal.Body,null,o.createElement(i.Text,null,"Please contact us for downgrade")),o.createElement(i.Modal.Footer,null,o.createElement(i.Button,{kind:"cancel",onClick:t},"Cancel"),o.createElement(i.Button,{kind:"primary",onClick:this.onContactUs},"Contact us"))))};return t}(o.Component);t.default=p},"./website/components/RouteDashboard/RouteOrganization/Billing/Popup/InfoPopup.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n("./node_modules/react/index.js");var u=d(l);var s=n("./node_modules/react-redux/es/index.js");var c=n("./node_modules/aphrodite/no-important.js");var p=n("./flux/index.js");n("./core/index.js");var f=n("./styleguide/index.js");function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(r=(0,s.connect)(function(e){var t=e.config;return{config:t}}),r(o=(i=a=function(e){y(t,e);function t(){var n=this;var r,o,a;v(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=h(this,e.call.apply(e,[this].concat(l))),o),o.state={billingAddress:o.props.billingConfig.billingAddress},o.onSave=m(regeneratorRuntime.mark(function e(){var t,r,a,i,l;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.dispatch,a=t.org,i=t.billingConfig,l=t.onClose;n.next=3;return r(p.Flux.organization.updateBillingConfig(a,i,i.merge({billingAddress:o.state.billingAddress})));case 3:l();case 4:case"end":return n.stop()}},e,n)})),o.onChange=function(e,t){var n;o.setState({billingAddress:o.state.billingAddress.merge((n={},n[e]=t.currentTarget.value,n))})},o.onChangeOrganization=function(e){return o.onChange("organization",e)},o.onChangeFirstName=function(e){return o.onChange("firstName",e)},o.onChangeLastName=function(e){return o.onChange("lastName",e)},o.onChangeEmail=function(e){return o.onChange("email",e)},o.onChangePhone=function(e){return o.onChange("phone",e)},o.onChangeStreet=function(e){return o.onChange("street",e)},o.onChangeCountry=function(e){return o.onChange("country",e)},o.onChangeRegion=function(e){return o.onChange("region",e)},o.onChangeCity=function(e){return o.onChange("city",e)},o.onChangeZip=function(e){return o.onChange("zip",e)},o.onChangeVAT=function(e){return o.onChange("vat",e)},r),h(o,a)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.onClose,a=r.plan;var i=this.state.billingAddress;return u.createElement(f.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:o},u.createElement(f.Modal,{size:f.Modal.SIZES.medium},u.createElement(f.Modal.Header,null,u.createElement(f.Modal.Title,null,"Billing details")),u.createElement(f.Modal.Body,null,u.createElement(f.Form,{onSubmit:this.onSave},u.createElement(f.Form.Group,{title:"Organization"},u.createElement(f.Form.Input,{type:"text",placeholder:"Gitbook",value:i.organization,onChange:this.onChangeOrganization})),u.createElement(f.View,{styles:[n.row]},u.createElement(f.Form.Group,{title:"First Name",styles:n.groupRow},u.createElement(f.Form.Input,{type:"text",placeholder:"John",value:i.firstName,onChange:this.onChangeFirstName})),u.createElement(f.Form.Group,{title:"Last Name",styles:n.groupRow},u.createElement(f.Form.Input,{type:"text",placeholder:"Doe",value:i.lastName,onChange:this.onChangeLastName}))),u.createElement(f.View,{styles:[n.row]},u.createElement(f.Form.Group,{title:"Email",styles:n.groupRow},u.createElement(f.Form.Input,{type:"text",placeholder:"john.doe@example.com",value:i.email,onChange:this.onChangeEmail})),u.createElement(f.Form.Group,{title:"Phone",styles:n.groupRow},u.createElement(f.Form.Input,{type:"text",placeholder:"(123) 456â€“7890",value:i.phone,onChange:this.onChangePhone}))),u.createElement(f.Form.Group,{title:"Billing Address"},u.createElement(f.Form.Input,{type:"text",placeholder:"1235 Brookdale Ave",value:i.street,onChange:this.onChangeStreet})),u.createElement(f.View,{styles:[n.row]},u.createElement(f.Form.Group,{title:"Country",styles:n.groupRow},u.createElement(f.Form.Input,{type:"text",placeholder:"United States",value:i.country,onChange:this.onChangeCountry})),u.createElement(f.Form.Group,{title:"Region",styles:n.groupRow},u.createElement(f.Form.Input,{type:"text",placeholder:"California",value:i.region,onChange:this.onChangeRegion})),u.createElement(f.Form.Group,{title:"City",styles:n.groupRow},u.createElement(f.Form.Input,{type:"text",placeholder:"Mountain View",value:i.city,onChange:this.onChangeCity})),u.createElement(f.Form.Group,{title:"Zip",styles:n.groupRow},u.createElement(f.Form.Input,{type:"text",placeholder:"94040",value:i.zip,onChange:this.onChangeZip}))),u.createElement(f.Form.Group,{title:"VAT"},u.createElement(f.Form.Input,{type:"text",placeholder:"Company VAT (optional)",value:i.vat,onChange:this.onChangeVAT})))),u.createElement(f.Modal.Footer,null,u.createElement(f.Button,{kind:"cancel",onClick:o},a?"Later":"Cancel"),u.createElement(f.Button,{kind:"primary",onClick:this.onSave},"Confirm details"))))};return t}(u.Component),a.STYLES=c.StyleSheet.create({row:{display:"flex"},groupRow:{flex:1,marginRight:10,":last-child":{marginRight:0}}}),i))||o);t.default=b},"./website/components/RouteDashboard/RouteOrganization/Billing/Popup/UpcomingInvoicePopup.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n("./node_modules/react/index.js");var u=y(l);var s=n("./node_modules/aphrodite/no-important.js");var c=n("./node_modules/react-intl/lib/index.es.js");var p=n("./core/index.js");var f=n("./styleguide/index.js");var d=n("./functions/api/Billing/Invoice/Model.js");var m=h(d);var v=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/index.js");function h(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(o=r=function(e){E(t,e);function t(){b(this,t);return g(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.upcomingInvoice,a=r.onClose,i=r.orgUsage,l=r.billingConfig;var s=p.BILLING.BILLING_SPEC[l.activePlan];var d=o.lines.slice(-1),m=d[0];return u.createElement(f.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:a},u.createElement(f.Modal,{size:f.Modal.SIZES.small},u.createElement(f.Modal.Header,null,u.createElement(f.Modal.Title,null,"Upcoming Invoice")),u.createElement(f.Modal.Body,null,u.createElement(O,{label:"plan",content:v.PLANS[l.activePlan].title}),u.createElement(O,{label:"period",content:u.createElement(u.Fragment,null,u.createElement(c.FormattedDate,{value:m.startAt,month:"short",day:"numeric",year:"numeric"}),u.createElement("span",null," to "),u.createElement(c.FormattedDate,{value:m.endAt,month:"short",day:"numeric",year:"numeric"}))}),u.createElement(O,{label:"amount",content:u.createElement(u.Fragment,null,s&&u.createElement(u.Fragment,null,o.subtotal/100===i.membersCount*s.priceByMemberMonthly&&i.membersCount+" users x $"+s.priceByMemberMonthly+" = "),u.createElement(c.FormattedNumber,{value:o.subtotal/100,style:"currency",currency:o.currency}))}),o.coupon&&o.coupon.percentOff&&u.createElement(O,{label:"coupon",content:o.coupon.percentOff+"%"}),u.createElement(O,{label:"amount due",content:u.createElement(f.Text,{styles:[n.primary]},u.createElement(c.FormattedNumber,{value:o.total/100,style:"currency",currency:o.currency}))})),u.createElement(f.Modal.Footer,null,u.createElement(f.Button,{kind:"cancel",onClick:a},"Close"))))};return t}(u.Component),r.STYLES=s.StyleSheet.create({primary:{color:f.colors.BLUE_BASE}}),o);var O=(i=a=function(e){E(t,e);function t(){b(this,t);return g(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.label,o=n.content;var a=t.STYLES;return u.createElement(f.View,{styles:[f.View.MARGIN.S300Bottom,a.row]},u.createElement(f.Text.TextH200,{styles:[a.label]},r),u.createElement(f.Text,null,o))};return t}(u.Component),a.STYLES=s.StyleSheet.create({row:{display:"flex",alignItems:"center",justifyContent:"space-between",":last-child":{marginBottom:0}},label:{color:f.colors.GREY_BASE,fontWeight:500,textTransform:"uppercase"}}),i);t.default=w},"./website/components/RouteDashboard/RouteOrganization/Billing/Popup/UpdateCardPopup.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=s(r);var a=n("./node_modules/react-stripe-elements/es/index.js");n("./core/index.js");var i=n("./styleguide/index.js");var l=n("./icons/index.js");var u=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/index.js");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){d(t,e);function t(){var n=this;var r,o,a;p(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=f(this,e.call.apply(e,[this].concat(l))),o),o.state={error:null,pending:false,isFetchingToken:false},o.onChange=function(e){if(e.error){o.setState({error:e.error});return}o.setState({error:null})},o.onSubmit=c(regeneratorRuntime.mark(function e(){var t,r,a,i;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.onSuccess,a=t.stripe;o.setState({error:null,isFetchingToken:true});i=void 0;n.prev=3;n.next=6;return a.createToken();case 6:i=n.sent;if(!i.error){n.next=9;break}throw i.error;case 9:n.next=15;break;case 11:n.prev=11;n.t0=n["catch"](3);o.setState({isFetchingToken:false,error:n.t0});return n.abrupt("return");case 15:o.setState({pending:true});r({token:i.token.id});case 17:case"end":return n.stop()}},e,n,[[3,11]])})),r),f(o,a)}t.prototype.componentWillReceiveProps=function e(t){if(this.props.billingConfig.token&&!t.billingConfig.token&&t.billingConfig.error){this.setState({error:new Error(t.billingConfig.error),pending:false,isFetchingToken:false});return}if(this.props.billingConfig.cardID!==t.billingConfig.cardID){this.setState({pending:false});this.props.onClose()}};t.prototype.render=function e(){var t=this.props,n=t.billingConfig,r=t.onClose;var a=this.state,s=a.error,c=a.pending,p=a.isFetchingToken;return o.createElement(i.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:r},o.createElement(i.Modal,{size:i.Modal.SIZES.small},s&&o.createElement(i.Modal.Status,{styles:[i.View.PADDING.S200Vertical,i.Modal.Status.STYLES.danger]},o.createElement(l.IconAlert,null)," ",s.message),o.createElement(i.Modal.Header,null,o.createElement(i.Modal.Title,null,"Credit card information")),o.createElement(i.Modal.Body,null,o.createElement(u.CardForm,{onSubmit:this.onSubmit,billingConfig:n})),o.createElement(i.Modal.Footer,null,o.createElement(i.Button,{kind:"cancel",onClick:r},"Cancel"),o.createElement(i.Button,{onClick:this.onSubmit},!p&&!c||s?o.createElement(o.Fragment,null,"Update card"):o.createElement(i.Loading,null)))))};return t}(o.Component);t.default=(0,a.injectStripe)(m)},"./website/components/RouteDashboard/RouteOrganization/Billing/Popup/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.UpgradePlanPopup=t.UpdateCardPopup=t.UpcomingInvoicePopup=t.InfoPopup=t.DowngradePopup=t.CouponPopup=void 0;var r=n("./website/components/RouteDashboard/RouteOrganization/Billing/Popup/CouponPopup.js");var o=v(r);var a=n("./website/components/RouteDashboard/RouteOrganization/Billing/Popup/DowngradePopup.js");var i=v(a);var l=n("./website/components/RouteDashboard/RouteOrganization/Billing/Popup/InfoPopup.js");var u=v(l);var s=n("./website/components/RouteDashboard/RouteOrganization/Billing/Popup/UpcomingInvoicePopup.js");var c=v(s);var p=n("./website/components/RouteDashboard/RouteOrganization/Billing/Popup/UpdateCardPopup.js");var f=v(p);var d=n("./website/components/RouteDashboard/RouteOrganization/Billing/Popup/UpgradePlanPopup.js");var m=v(d);function v(e){return e&&e.__esModule?e:{default:e}}t.CouponPopup=o.default;t.DowngradePopup=i.default;t.InfoPopup=u.default;t.UpcomingInvoicePopup=c.default;t.UpdateCardPopup=f.default;t.UpgradePlanPopup=m.default},"./website/components/RouteDashboard/RouteOrganization/Billing/RouteBilling.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n("./node_modules/react/index.js");var a=y(o);var i=n("./node_modules/react-loadable/lib/index.js");var l=h(i);var u=n("./node_modules/react-no-ssr/index.js");var s=h(u);var c=n("./node_modules/react-router-dom/es/index.js");var p=n("./styleguide/index.js");var f=n("./website/components/RouteDashboard/RouteOrganization/OrgTabs.js");var d=h(f);var m=n("./website/components/RouteDashboard/RouteOrganization/OrgPage.js");var v=h(m);function h(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(0,l.default)({loader:function e(){return Promise.resolve().then(function(){return n("./website/components/RouteDashboard/RouteOrganization/Billing/Billing.js")})},modules:["./Billing"],webpack:function e(){return["./website/components/RouteDashboard/RouteOrganization/Billing/Billing.js"]},loading:function e(){return null}});var O=(0,l.default)({loader:function e(){return Promise.resolve().then(function(){return n("./website/components/RouteDashboard/RouteOrganization/Billing/RoutePrintInvoice/index.js")})},modules:["./RoutePrintInvoice"],webpack:function e(){return["./website/components/RouteDashboard/RouteOrganization/Billing/RoutePrintInvoice/index.js"]},loading:function e(){return null}});var _=function(e){E(t,e);function t(){b(this,t);return g(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this;var n=this.props,o=n.match,i=n.org,l=n.membership;return a.createElement(c.Switch,null,a.createElement(c.Route,{exact:true,path:o.url,render:function e(){return a.createElement(v.default,{org:i,membership:l,active:d.default.TABS.BILLING},a.createElement(p.TabsPage.Header,null,a.createElement(p.TabsPage.Header.Desc,null,"Choose your plan, and manage your subscription.")),a.createElement(s.default,null,a.createElement(w,{org:i})))}}),a.createElement(c.Route,{exact:true,path:o.url+"/:invoiceID",render:function e(n){return a.createElement(O,r({},t.props,n))}}))};return t}(a.Component);t.default=_},"./website/components/RouteDashboard/RouteOrganization/Billing/RoutePrintInvoice/InvoiceLine.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=s(a);var l=n("./node_modules/react-intl/lib/index.es.js");var u=n("./node_modules/aphrodite/no-important.js");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){f(t,e);function t(){c(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.startAt,a=r.endAt,s=r.description,c=r.amount,p=r.currency;return i.createElement("tr",null,i.createElement("td",null,i.createElement("div",{className:(0,u.css)(n.description)},s)),i.createElement("td",null,i.createElement("div",null,i.createElement(l.FormattedDate,{value:o,month:"short",day:"numeric",year:"numeric"}),i.createElement("span",null," to "),i.createElement(l.FormattedDate,{value:a,month:"short",day:"numeric",year:"numeric"}))),i.createElement("td",null,i.createElement(l.FormattedNumber,{value:c/100,style:"currency",currency:p})))};return t}(i.Component),r.STYLES=u.StyleSheet.create({description:{maxWidth:450,overflow:"auto",textOverflow:"ellipsis"}}),o);t.default=d},"./website/components/RouteDashboard/RouteOrganization/Billing/RoutePrintInvoice/RoutePrintInvoice.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n("./node_modules/react/index.js");var u=P(l);var s=n("./core/index.js");var c=n("./functions/api/Billing/Invoice/Model.js");var p=R(c);var f=n("./functions/api/Billing/Invoice/InvoiceLine/Model.js");var d=R(f);var m=n("./styleguide/index.js");var v=n("./icons/index.js");var h=n("./flux/index.js");var y=n("./common/index.js");var b=n("./node_modules/react-redux/es/index.js");var g=n("./node_modules/react-intl/lib/index.es.js");var E=n("./node_modules/aphrodite/no-important.js");var w=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/index.js");var O=n("./website/components/RouteDashboard/RouteOrganization/Billing/RoutePrintInvoice/InvoiceLine.js");var _=R(O);function R(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T=E.StyleSheet.create({printButton:{marginBottom:10,"@media print":{display:"none"}},invoiceWrapper:{flex:1,display:"flex"},invoiceDetails:{padding:"1cm",width:"21cm",margin:"0px auto",background:"#fff","@media print":{padding:0}},header:{display:"flex",justifyContent:"space-between"},recipient:{margin:"50px 0"},headerRight:{textAlign:"right"},fontLarge:{fontSize:20},borderBottom:{borderBottom:"solid 1px black"},fontMedium:{fontSize:16},subscriptions:{width:"100%",textAlign:"left"},total:{marginTop:50,float:"right",textAlign:"right"},gitbookWrapper:{display:"flex",maxWidth:100},gitbookLogo:{marginRight:5,fontSize:24,color:m.colors.BLUE_BASE},date:{float:"right"}});var x=(r=(0,b.connect)(function(e){var t=e.config,n=e.user;return{config:t,authHeader:n.authorizationHeader}}),o=h.Connectors.database(function(e){var t=e.org,n=e.user;return{billingConfig:t?s.BillingConfig.queryByID(t.uid):null}}),a=h.Connectors.graphQL(function(e){var t=e.org,n=e.config,r=e.authHeader,o=e.match.params.invoiceID;return{invoice:{url:n.urls.api,query:w.invoiceQuery,operationName:"invoice",headers:{Authorization:r},variables:{id:t&&t.baseDomain,invoiceID:o},mapState:function e(t){var n=t.data;return n&&n.organization&&n.organization.billing&&n.organization.billing.invoice}}}}),r(i=o(i=a(i=function(e){S(t,e);function t(){j(this,t);return C(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.invoice,r=t.org,o=t.billingConfig;if(!r||!o||!n)return u.createElement(y.ErrorPage.NotFound,null);return u.createElement("div",{className:(0,E.css)(T.invoiceWrapper)},u.createElement("div",{className:(0,E.css)(T.invoiceDetails)},u.createElement(M,{invoice:n}),u.createElement(I,{org:r,billingConfig:o}),u.createElement(L,{lines:n.lines}),u.createElement(A,{invoice:n})))};return t}(u.Component))||i)||i)||i);var M=function(e){S(t,e);function t(){var n,r,o;j(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=C(this,e.call.apply(e,[this].concat(i))),r),r.onPrint=function(){window.print()},n),C(r,o)}t.prototype.render=function e(){var t=this.props.invoice;return u.createElement("div",{className:(0,E.css)(T.header)},u.createElement("div",null,u.createElement("div",{className:(0,E.css)(T.gitbookWrapper)},u.createElement(v.Logo,{className:(0,E.css)(T.gitbookLogo)})," ",u.createElement("span",{className:(0,E.css)(T.fontLarge)},"GitBook")),u.createElement("div",null,"1235 Brookdale Ave"),u.createElement("div",null,"Mountain View CA 94040"),u.createElement("div",null,"United States")),u.createElement("div",{className:(0,E.css)(T.headerRight)},u.createElement("div",{className:(0,E.css)(T.printButton)},u.createElement(m.Button,{onClick:this.onPrint},"Print")),u.createElement("div",{className:(0,E.css)(T.fontLarge)},"INVOICE"),u.createElement("div",null,"Date:"," ",u.createElement(g.FormattedDate,{value:t.date,month:"short",day:"numeric",year:"numeric"}))))};return t}(u.Component);var I=function(e){S(t,e);function t(){j(this,t);return C(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.billingConfig.billingAddress,n=t.organization,r=t.street,o=t.country,a=t.zip;return u.createElement("div",{className:(0,E.css)(T.recipient)},u.createElement("div",{className:(0,E.css)(T.fontLarge)},"Billed to"),u.createElement("div",null,u.createElement("div",null,n),u.createElement("div",null,r,a&&u.createElement("span",null,", ",a)),u.createElement("div",null,o)))};return t}(u.Component);var A=function(e){S(t,e);function t(){j(this,t);return C(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.invoice;return u.createElement("div",{className:(0,E.css)(T.total)},t.coupon&&u.createElement("div",null,u.createElement("div",{className:(0,E.css)(T.fontLarge)},"Total ="," ",u.createElement(g.FormattedNumber,{value:t.subtotal/100,style:"currency",currency:t.currency})),t.coupon&&t.coupon.percentOff&&u.createElement("div",null,"Discount ",t.coupon.id,":"," ",t.coupon.percentOff,"%"),t.coupon&&t.coupon.amountOff&&u.createElement("div",null,"Discount ",t.coupon.id,":"," ",u.createElement(g.FormattedNumber,{value:t.coupon.amountOff/100,style:"currency",currency:t.currency})),u.createElement("div",null)),u.createElement("div",{className:(0,E.css)(T.fontLarge)},"Amount due ="," ",u.createElement(g.FormattedNumber,{value:t.amountDue/100,style:"currency",currency:t.currency})))};return t}(u.Component);var L=function(e){S(t,e);function t(){j(this,t);return C(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.lines;return u.createElement("div",null,u.createElement("div",{className:(0,E.css)(T.fontLarge,T.borderBottom)},"Subscriptions"),u.createElement("table",{className:(0,E.css)(T.subscriptions)},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",{className:(0,E.css)(T.fontMedium)},"Description"),u.createElement("th",{className:(0,E.css)(T.fontMedium)},"Period"),u.createElement("th",{className:(0,E.css)(T.fontMedium)},"Amount"))),u.createElement("tbody",null,t.filter(function(e){return 0!==e.amount}).map(function(e,t){return u.createElement(_.default,{key:t,startAt:e.startAt,endAt:e.endAt,amount:e.amount,currency:e.currency,description:e.description||w.PLANS[e.plan].title})}))))};return t}(u.Component);t.default=x},"./website/components/RouteDashboard/RouteOrganization/Billing/RoutePrintInvoice/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteDashboard/RouteOrganization/Billing/RoutePrintInvoice/RoutePrintInvoice.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteDashboard/RouteOrganization/Billing/common/CardForm.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=c(a);var l=n("./node_modules/react-stripe-elements/es/index.js");var u=n("./node_modules/aphrodite/no-important.js");var s=n("./styleguide/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=r=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.onSubmit,u=o.onChange;return i.createElement(s.Form,{ref:function e(t){n.form=t},onSubmit:a},i.createElement(s.View,{styles:[s.View.PADDING.S100,r.cardWrapper]},i.createElement(l.CardElement,{hidePostalCode:true,style:{base:{fontSize:"18px"}},onChange:u})),i.createElement(s.Form.Hint,{styles:[r.hint]},"Your credit card details are never stored on or even reach our servers. Payments and credit card data are handled by Stripe."))};return t}(i.Component),r.STYLES=u.StyleSheet.create({cardWrapper:{border:"1px solid "+s.colors.GREY_LIGHTER,borderRadius:4,background:"white"},hint:{marginBottom:0}}),o);t.default=m},"./website/components/RouteDashboard/RouteOrganization/Billing/common/LabelGroup.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=s(a);var l=n("./node_modules/aphrodite/no-important.js");var u=n("./styleguide/index.js");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){f(t,e);function t(){c(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.label,o=n.content;var a=t.STYLES;return i.createElement(u.View,{styles:[a.element]},i.createElement(u.View,{styles:[a.label]},i.createElement(u.Text.InfoH200,null,r)),i.createElement(u.View,null,o))};return t}(i.Component),r.STYLES=l.StyleSheet.create({element:{display:"flex",flexDirection:"column"},label:{color:u.colors.GREY_BASE}}),o);t.default=d},"./website/components/RouteDashboard/RouteOrganization/Billing/common/PLANS.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./core/index.js");var o=n("./node_modules/react/index.js");var a=i(o);function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}var l={"overcharge-user":{title:"Overcharge Member"},"overcharge-space":{title:"Overcharge Space"},free:{title:"Free"},organization:{title:"Organization"},pro:{title:"Pro"},plus:{title:"Plus"},small:{title:"Startup"},medium:{title:"Business"},large:{title:"Enterprise"},v2_startup:{title:"Startup",priceInfo:a.createElement("span",null,"Starting at ",a.createElement("b",null,"$",r.BILLING.BILLING_SPEC.v2_startup.price),"/month which includes your first"," ",r.BILLING.BILLING_SPEC.v2_startup.membersIncluded," users")},v2_business:{title:"Business",priceInfo:a.createElement("span",null,"Starting at ",a.createElement("b",null,"$",r.BILLING.BILLING_SPEC.v2_business.price),"/month which includes your first"," ",r.BILLING.BILLING_SPEC.v2_business.membersIncluded," users")}};t.default=l},"./website/components/RouteDashboard/RouteOrganization/Billing/common/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PLANS=t.upcomingInvoiceQuery=t.invoicesQuery=t.invoiceQuery=t.CardForm=t.LabelGroup=void 0;var r=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/LabelGroup.js");var o=v(r);var a=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/CardForm.js");var i=v(a);var l=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/invoiceQuery.js");var u=v(l);var s=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/invoicesQuery.js");var c=v(s);var p=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/upcomingInvoiceQuery.js");var f=v(p);var d=n("./website/components/RouteDashboard/RouteOrganization/Billing/common/PLANS.js");var m=v(d);function v(e){return e&&e.__esModule?e:{default:e}}t.LabelGroup=o.default;t.CardForm=i.default;t.invoiceQuery=u.default;t.invoicesQuery=c.default;t.upcomingInvoiceQuery=f.default;t.PLANS=m.default},"./website/components/RouteDashboard/RouteOrganization/Billing/common/invoiceQuery.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r="\n        query invoice($id: String!, $invoiceID: ID!) {\n          organization(id: $id) {\n            billing {\n              invoice(id: $invoiceID)  {\n                amountDue\n                subtotal\n                total\n                currency\n                coupon{\n                  id\n                  amountOff\n                  percentOff\n                }\n                date\n                periodStart\n                periodEnd\n                lines{\n                  proration\n                  currency\n                  description\n                  quantity\n                  amount\n                  startAt\n                  endAt\n                  plan\n                }\n              }\n            }\n          }\n        }\n        ";t.default=r},"./website/components/RouteDashboard/RouteOrganization/Billing/common/invoicesQuery.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r="\n        query invoices($id: String!) {\n          organization(id: $id) {\n            billing {\n              invoices {\n                id\n                amountDue\n                currency\n                date\n              }\n            }\n          }\n        }\n        ";t.default=r},"./website/components/RouteDashboard/RouteOrganization/Billing/common/upcomingInvoiceQuery.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r="\n        query upcomingInvoice($id: String!) {\n          organization(id: $id) {\n            billing {\n              upcomingInvoice {\n                amountDue\n                subtotal\n                total\n                currency\n                coupon{\n                  id\n                  amountOff\n                  percentOff\n                }\n                periodStart\n                periodEnd\n                lines{\n                  currency\n                  proration\n                  description\n                  quantity\n                  amount\n                  startAt\n                  endAt\n                  plan\n                }\n              }\n            }\n          }\n        }\n        ";t.default=r},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/MemberPermissions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l;var u=n("./node_modules/react/index.js");var s=O(u);var c=n("./node_modules/react-redux/es/index.js");var p=n("./node_modules/aphrodite/no-important.js");var f=n("./core/index.js");var d=n("./common/index.js");var m=n("./flux/index.js");var v=n("./styleguide/index.js");var h=n("./website/actions/org.js");var y=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/UserPanelControls.js");var b=w(y);var g=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/ModalConfirmSetOwner.js");var E=w(g);function w(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=function(e){P(t,e);function t(){var n,r,o;_(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=R(this,e.call.apply(e,[this].concat(i))),r),r.onClickNone=function(){var e=r.props,t=e.team,n=e.onChangeRole;n(t,null)},r.onToggleReader=function(){var e=r.props,t=e.team,n=e.role,o=e.onChangeRole;o(t,n===f.ROLES.READER?null:f.ROLES.READER)},r.onToggleWriter=function(){var e=r.props,t=e.team,n=e.role,o=e.onChangeRole;o(t,n===f.ROLES.WRITER?null:f.ROLES.WRITER)},r.onToggleAdmin=function(){var e=r.props,t=e.team,n=e.role,o=e.onChangeRole;o(t,n===f.ROLES.ADMIN?null:f.ROLES.ADMIN)},n),R(r,o)}t.prototype.render=function e(){var t=this.props,n=t.team,r=t.role;return s.createElement(v.Modal.Table.Row,null,s.createElement(v.Modal.Table.Cell,null,n?n.name:"All members"),s.createElement(v.Modal.Table.Cell,null,n&&s.createElement(v.Form.Radio,{type:"checkbox",onChange:this.onClickNone,checked:null===r})),s.createElement(v.Modal.Table.Cell,null,s.createElement(v.Form.Radio,{type:"checkbox",onChange:this.onToggleReader,checked:r===f.ROLES.READER})),s.createElement(v.Modal.Table.Cell,null,s.createElement(v.Form.Radio,{type:"checkbox",onChange:this.onToggleWriter,checked:r===f.ROLES.WRITER})),s.createElement(v.Modal.Table.Cell,null,s.createElement(v.Form.Radio,{type:"checkbox",onChange:this.onToggleAdmin,checked:r===f.ROLES.ADMIN})))};return t}(s.Component);var C=(r=m.Connectors.database(function(e){var t=e.member;return{user:f.User.queryByID(t.uid)}}),o=(0,c.connect)(function(e){var t=e.user;return{connectedUser:t}}),r(a=o(a=(l=i=function(e){P(t,e);function t(){var n,r,o;_(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=R(this,e.call.apply(e,[this].concat(i))),r),r.state={confirmSetOwnerModal:false},r.onRemoveMember=function(){var e=r.props,t=e.dispatch,n=e.org,o=e.member,a=e.user;window.confirm("Do you really want to remove "+a.displayName+" from the organization ?")&&t((0,h.removeMember)(n,o))},r.onOpenConfirmSetOwnerModal=function(){r.setState({confirmSetOwnerModal:true})},r.onCloseConfirmSetOwnerModal=function(){r.setState({confirmSetOwnerModal:false})},r.onSetPrimaryOwner=function(){var e=r.props,t=e.org,n=e.member,o=e.dispatch,a=e.onClose;n.role!==f.ROLES.ADMIN&&o((0,h.updateMemberRole)(t,n,f.ROLES.ADMIN));o((0,h.transferOwnership)(t,n));r.setState({confirmSetOwnerModal:false});a()},r.onChangeRole=function(e,t){var n=r.props,o=n.org,a=n.user,i=n.member,l=n.dispatch;if(e){var u=t?i.teams.set(e.uid,f.TeamMembership.create({role:t})):i.teams.delete(e.uid);var s=i.set("teams",u);l((0,h.updateMemberTeams)(o,s));return}if(null==t)return;if(i.role===f.ROLES.ADMIN&&t!==f.ROLES.ADMIN&&!window.confirm("Downgrading "+a.displayName+" to a "+t+" will revoke all their admin rights."))return;l((0,h.updateMemberRole)(o,i,t))},n),R(r,o)}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.connectedUser,i=o.user,l=o.member,u=o.teams,c=o.onClose,p=o.org;var f=this.state.confirmSetOwnerModal;if(f)return s.createElement(E.default,{onClose:c,user:i,onSetPrimaryOwner:this.onSetPrimaryOwner,onCloseModal:this.onCloseConfirmSetOwnerModal});return s.createElement(v.Popup,{onClose:c},s.createElement(v.Modal,{size:v.Modal.SIZES.small},s.createElement(v.Modal.Header,null,s.createElement(v.View,{styles:[r.userCard]},s.createElement(d.UserAvatar,{user:i,styles:[d.UserAvatar.STYLES.sizeLG],withTooltip:false}),s.createElement(v.View,{styles:[r.userCardContent]},s.createElement(v.View,{styles:[r.userCardName]},s.createElement(v.Text.UIH400,null,i.displayName)),s.createElement(v.View,{styles:[r.userCardHint]},s.createElement(v.Text.UIH200,null,"Manage user permissions for each team."))),s.createElement(v.View,null,p.isOwner(i.uid)&&s.createElement(v.Badge,{styles:r.badgePrimaryOwnerColor},"Owner"),l.uid!==a.uid&&p.createdBy!==l.uid&&s.createElement(b.default,{onRemoveUser:this.onRemoveMember,onClickSetOwner:this.onOpenConfirmSetOwnerModal,canSuperAdmin:p.canSuperAdmin(a)})))),s.createElement(v.Modal.Body,{styles:[v.Modal.Body.STYLES.noPadding]},s.createElement(v.Modal.Table,null,s.createElement(v.Modal.Table.Head,null,s.createElement(v.Modal.Table.Row,null,s.createElement(v.Modal.Table.Cell,null,s.createElement(v.Modal.Table.Label,null,"Teams")),s.createElement(v.Modal.Table.Cell,null,s.createElement(v.Modal.Table.Label,null,"None")),s.createElement(v.Modal.Table.Cell,null,s.createElement(v.Modal.Table.Label,null,"Reader")),s.createElement(v.Modal.Table.Cell,null,s.createElement(v.Modal.Table.Label,null,"Writer")),s.createElement(v.Modal.Table.Cell,null,s.createElement(v.Modal.Table.Label,null,"Admin")))),s.createElement(v.Modal.Table.Body,null,l.uid!==a.uid&&l.uid!==p.createdBy&&s.createElement(j,{role:l.role,onChangeRole:this.onChangeRole}),u.map(function(e){return s.createElement(j,{key:e.uid,team:e,role:l.teams.has(e.uid)?l.teams.get(e.uid).role:null,onChangeRole:n.onChangeRole})}).toArray()))),s.createElement(v.Modal.Footer,null,s.createElement(v.View,null,s.createElement(v.Button,{kind:"cancel",onClick:c},"Close")))))};return t}(s.Component),i.STYLES=p.StyleSheet.create({userCard:{display:"flex",alignItems:"center"},userCardContent:{flex:1,paddingLeft:v.spacing.S200},userCardName:{},userCardHint:{color:v.colors.GREY_BASE},badgePrimaryOwnerColor:{background:v.colors.BLUE_BASE}}),l))||a)||a);t.default=C},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/Blankslate.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=s(a);var l=n("./node_modules/aphrodite/no-important.js");var u=n("./styleguide/index.js");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){f(t,e);function t(){c(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.canAdmin,a=r.onOpenInviteModal;return i.createElement(i.Fragment,null,o?i.createElement(u.View,{styles:[n.teamBlankslate]},i.createElement(u.View,{styles:[u.View.MARGIN.S200Bottom,n.teamBlankslateText]},i.createElement(u.Text,null,"Invite others to join this team.",i.createElement("br",null),"You can invite them as writers, readers or admins.")),i.createElement(u.View,{styles:[n.teamBlankslateButton]},i.createElement(u.Button,{onClick:a},"Add members"))):i.createElement(u.View,{styles:[n.teamBlankslateText]},i.createElement(u.Text,null,"No members.")))};return t}(i.Component),r.STYLES=l.StyleSheet.create({teamBlankslate:{textAlign:"center",paddingTop:120,paddingBottom:120},teamBlankslateText:{color:u.colors.GREY_DARK},teamBlankslateButton:{}}),o);t.default=d},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/Filters.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l;var u=n("./node_modules/react/index.js");var s=m(u);var c=n("./node_modules/immutable/dist/immutable.js");var p=n("./node_modules/aphrodite/no-important.js");var f=n("./core/index.js");var d=n("./styleguide/index.js");function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(o=r=function(e){y(t,e);function t(){var n,r,o;v(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=h(this,e.call.apply(e,[this].concat(i))),r),r.onClick=function(){var e=r.props,t=e.onClick,n=e.filter;t(n)},n),h(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.isActive,a=r.children;return s.createElement(d.Text.UIH200,{styles:[n.teamFilter,o&&n.teamFilterActive],onClick:this.onClick,role:"button",tabIndex:0},a)};return t}(s.Component),r.STYLES=p.StyleSheet.create({teamFilter:{cursor:"pointer",color:d.colors.GREY_DARK,marginLeft:d.spacing.S200,":hover":{color:d.colors.BLUE_BASE}},teamFilterActive:{color:d.colors.BLUE_BASE}}),o);var g=(i=a=function(e){y(t,e);function t(){v(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.value,a=r.onChange,i=r.filters;return s.createElement(d.View,{styles:[n.teamFilters]},i.map(function(e,t){return s.createElement(b,{key:t,filter:t,onClick:a,isActive:t===o},e)}).toArray())};return t}(s.Component),a.FILTERS=(0,c.OrderedMap)([["all","All"],[f.ROLES.WRITER,"Writer"],[f.ROLES.READER,"Reader"],[f.ROLES.ADMIN,"Admin"]]),a.STYLES=p.StyleSheet.create({teamFilters:(l={},l["@media "+d.MEDIA.SMALLER_THAN_TABLET]={display:"none"},l)}),i);t.default=g},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/Invite.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l;var u=n("./node_modules/react/index.js");var s=O(u);var c=n("./node_modules/react-redux/es/index.js");var p=n("./node_modules/immutable/dist/immutable.js");var f=n("./node_modules/aphrodite/no-important.js");var d=n("./core/index.js");var m=n("./flux/index.js");var v=n("./styleguide/index.js");var h=n("./website/actions/org.js");var y=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/InviteLink.js");var b=w(y);var g=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/MembersRole.js");var E=w(g);function w(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function _(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var l=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(r=m.Connectors.database(function(e){var t=e.org;return{orgMembers:d.Membership.queryByOrg(t.uid).setOptions({waitFetched:false}),invites:d.Invite.queryByOrg(t.uid).setOptions({waitFetched:false})}}),o=(0,c.connect)(function(e,t){var n=t.invites,r=t.team;return{invites:n.filter(function(e){return r?e.teamID==r.uid:!e.teamID})}}),r(a=o(a=(l=i=function(e){j(t,e);function t(){var n=this;var r,o,a;R(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return a=(r=(o=P(this,e.call.apply(e,[this].concat(l))),o),o.state={roles:(0,p.Map)()},o.onChangeRoles=function(e){o.setState({roles:e})},o.onAdd=_(regeneratorRuntime.mark(function e(){var t,r,a,i,l,u,s;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.org,a=t.team,i=t.orgMembers,l=t.dispatch,u=t.onClose;s=o.state.roles;if(a){n.next=4;break}throw new Error('Cannot add members without a team. Did you try to add to "All members"?');case 4:n.next=6;return l((0,h.updateMembersTeams)(r,s.reduce(function(e,t,n){var r=i.get(n);var o=r.teams.set(a.uid,d.TeamMembership.create({role:t}));var l=r.set("teams",o);return e.push(l)},(0,p.List)())));case 6:u();case 7:case"end":return n.stop()}},e,n)})),o.onRevokeInvites=function(){var e=o.props,t=e.org,n=e.invites,r=e.team,a=e.dispatch;window.confirm("All your previous invite links will be invalidated by this action, are you sure that you want to revoke them?")&&a(m.Flux.invites.revokeInvites(t,n,r))},r),P(o,a)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.org,a=r.orgMembers,i=r.team,l=r.invites,u=r.onClose;var c=this.state.roles;var f=i?a.filterNot(function(e){return e.teams.has(i.uid)}):(0,p.OrderedMap)();return s.createElement(v.Popup,{onClose:u},s.createElement(v.Modal,{size:v.Modal.SIZES.medium,styles:[n.teamInvite]},s.createElement(v.Modal.Header,null,s.createElement(v.Modal.Title,null,i?"Add members in "+i.name:"Invite new members")),s.createElement(v.Modal.Body,{title:f.size>0?"Invite new members":null},s.createElement(v.View,{styles:[v.View.MARGIN.S100Bottom,n.teamInviteHint]},s.createElement(v.Text.TextH200,null,"Share this link to invite new team members as writers, readers or admins.")),s.createElement(b.default,{org:o,invites:l}),s.createElement(v.View,{styles:[v.View.MARGIN.S100Top]},s.createElement(v.Link,{component:"span",onClick:this.onRevokeInvites},s.createElement(v.Text.TextH200,null,"Revoke previous invites")))),f.size>0&&s.createElement(v.Modal.Body,{title:"Or add an existing member",styles:[v.Modal.Body.STYLES.noPadding]},s.createElement(E.default,{roles:c,onChangeRoles:this.onChangeRoles,members:f})),s.createElement(v.Modal.Footer,null,s.createElement(v.View,null,s.createElement(v.Button,{kind:"cancel",onClick:u},"Cancel")),s.createElement(v.View,null,f.size>0&&s.createElement(v.Button,{onClick:this.onAdd},"Add")))))};return t}(s.Component),i.STYLES=f.StyleSheet.create({teamInvite:{overflow:"visible"},teamInviteHint:{color:v.colors.GREY_BASE}}),l))||a)||a);t.default=C},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/InviteLink.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var l=n("./node_modules/react/index.js");var u=O(l);var s=n("./node_modules/react-redux/es/index.js");var c=n("./node_modules/object.values/index.js");var p=w(c);var f=n("./node_modules/copy-to-clipboard/index.js");var d=w(f);var m=n("./node_modules/urljoin.js/dist/index.js");var v=w(m);var h=n("./node_modules/aphrodite/no-important.js");var y=n("./core/index.js");var b=n("./styleguide/index.js");var g=n("./icons/index.js");var E=n("./website/components/SignIn/index.js");function w(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=function(e){P(t,e);function t(){var n,r,o;_(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=R(this,e.call.apply(e,[this].concat(i))),r),r.onClick=function(e){var t=r.props,n=t.onClick,o=t.role;n(o)},n),R(r,o)}t.prototype.render=function e(){var t=this.props.role;return u.createElement(b.Menu.Item,{onMouseDown:this.onClick},"As ",t,"s")};return t}(u.Component);var C=(r=(0,s.connect)(function(e){var t=e.config;return{config:t}}),r(o=(i=a=function(e){P(t,e);function t(){var n,r,o;_(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=R(this,e.call.apply(e,[this].concat(i))),r),r.state={activeRole:y.ROLES.READER,copiedURL:null},r.getInviteURL=function(){var e=r.props,t=e.org,n=e.config,o=e.invites;var a=r.state.activeRole;var i=o.find(function(e){return e.role===a});if(!i)return"";var l=(0,E.createAuthRoute)({toMode:"invite",toOrg:t.baseDomain,withInvite:i.uid});return(0,v.default)(n.urls.website,l.pathname)+l.search},r.onCopyInviteLink=function(){r.input.select();r.setState({copiedURL:(0,d.default)(r.getInviteURL())})},r.onSelectRole=function(e){r.setState({activeRole:e,copiedURL:null})},n),R(r,o)}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.state,a=o.activeRole,i=o.copiedURL;return u.createElement(b.Form.Input,{title:i?"URL was copied to clipboard!":"Copy to clipboard",value:this.getInviteURL(),size:b.Form.Input.SIZES.small,onClick:this.onCopyInviteLink,inputRef:function e(t){n.input=t},readOnly:true},u.createElement(b.Popover.Portal,{openByClickOn:u.createElement(b.Form.InputAddOn,{styles:[r.inviteLinkPrefix],prefix:true},u.createElement(b.Text.UIH300,null,u.createElement(g.IconChevronDown,null)," As ",a,"s")),closeOnOutsideClick:true,closeOnEsc:true},u.createElement(b.Popover,null,u.createElement(b.Menu,null,(0,p.default)(y.ROLES).map(function(e){return e!==y.ROLES.REVIEWER&&u.createElement(j,{key:e,onClick:n.onSelectRole,role:e})})))))};return t}(u.Component),a.STYLES=h.StyleSheet.create({inviteLinkPrefix:{position:"relative",cursor:"pointer",":hover":{color:b.colors.BLUE_BASE}}}),i))||o);t.default=C},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/Member.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l;var u=n("./node_modules/react/index.js");var s=h(u);var c=n("./node_modules/aphrodite/no-important.js");var p=n("./core/index.js");var f=n("./common/index.js");var d=n("./flux/index.js");var m=n("./styleguide/index.js");var v=n("./website/skeleton/index.js");function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(r={},r[p.ROLES.ADMIN]="Admin",r[p.ROLES.WRITER]="Writer",r[p.ROLES.READER]="Reader",r);var w=(o=d.Connectors.database(function(e){var t=e.member;return{user:p.User.queryByID(t.uid).defaultsTo(v.mockedUser)}}),o(a=(l=i=function(e){g(t,e);function t(){var n,r,o;y(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=b(this,e.call.apply(e,[this].concat(i))),r),r.state={isHover:false},r.onMouseEnter=function(){r.setState({isHover:true})},r.onMouseLeave=function(){r.setState({isHover:false})},r.onOpenModal=function(){var e=r.props,t=e.onManageMemberPermissions,n=e.member;t&&t(n)},n),b(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.user,a=r.team,i=r.member,l=r.onManageMemberPermissions,u=r.org;var c=this.state.isHover;var p=a?i.teams.get(a.uid).role:i.role;var d=Boolean(l);return s.createElement(m.View,{styles:[n.teamPanelMember,d&&n.teamPanelMemberClickable],onClick:this.onOpenModal,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,role:"button",tabIndex:0},s.createElement(f.UserAvatar,{user:o,styles:[f.UserAvatar.STYLES.sizeLG],withTooltip:false}),s.createElement(m.View,{styles:[n.teamPanelMemberContent]},s.createElement(m.View,{styles:[n.teamPanelMemberName,d&&c&&n.teamPanelMemberNameHover]},s.createElement(m.Text.UIH400,null,o.displayName)),s.createElement(m.View,{styles:[n.teamPanelMemberRole]},u.isOwner(o.uid)?s.createElement(m.Badge,{styles:n.badgePrimaryOwnerColor},"Owner"):s.createElement(m.Text.UIH200,null,E[p]))))};return t}(s.Component),i.STYLES=c.StyleSheet.create({teamPanelMember:{display:"flex",alignItems:"center"},teamPanelMemberClickable:{cursor:"pointer"},teamPanelMemberContent:{flex:1,paddingLeft:m.spacing.S200},teamPanelMemberName:{},teamPanelMemberNameHover:{color:m.colors.BLUE_BASE},teamPanelMemberRole:{color:m.colors.GREY_BASE},badgePrimaryOwnerColor:{background:m.colors.BLUE_BASE}}),l))||a);t.default=w},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/MembersRole.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o,a,i,l,u,s;var c=n("./node_modules/react/index.js");var p=E(c);var f=n("./node_modules/aphrodite/no-important.js");var d=n("./core/index.js");var m=n("./common/index.js");var v=n("./flux/index.js");var h=n("./styleguide/index.js");var y=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/SearchInput.js");var b=g(y);function g(e){return e&&e.__esModule?e:{default:e}}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=(o=v.Connectors.database(function(e){var t=e.member;return{user:d.User.queryByID(t.uid)}}),o(a=(l=i=function(e){_(t,e);function t(){var n,r,o;w(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=O(this,e.call.apply(e,[this].concat(i))),r),r.onToggleReader=function(){var e=r.props,t=e.user,n=e.role,o=e.onChangeRole;o(t.uid,n===d.ROLES.READER?null:d.ROLES.READER)},r.onToggleWriter=function(){var e=r.props,t=e.user,n=e.role,o=e.onChangeRole;o(t.uid,n===d.ROLES.WRITER?null:d.ROLES.WRITER)},r.onToggleAdmin=function(){var e=r.props,t=e.user,n=e.role,o=e.onChangeRole;o(t.uid,n===d.ROLES.ADMIN?null:d.ROLES.ADMIN)},n),O(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.user,a=r.role;return p.createElement(h.Modal.Table.Row,null,p.createElement(h.Modal.Table.Cell,null,p.createElement(m.UserAvatar,{user:o,styles:[h.View.MARGIN.S200Right,m.UserAvatar.STYLES.sizeMD,n.avatar],withTooltip:false}),p.createElement(h.Text.UIH400,{styles:[n.displayName]},o.displayName)),p.createElement(h.Modal.Table.Cell,null,p.createElement(h.Form.Radio,{type:"checkbox",onChange:this.onToggleReader,checked:a===d.ROLES.READER})),p.createElement(h.Modal.Table.Cell,null,p.createElement(h.Form.Radio,{type:"checkbox",onChange:this.onToggleWriter,checked:a===d.ROLES.WRITER})),p.createElement(h.Modal.Table.Cell,null,p.createElement(h.Form.Radio,{type:"checkbox",onChange:this.onToggleAdmin,checked:a===d.ROLES.ADMIN})))};return t}(p.Component),i.STYLES=f.StyleSheet.create({avatar:{flexShrink:0},displayName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),l))||a);var P=10;var j=4;var C=(s=u=function(e){_(t,e);function t(){var n,r,o;w(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=O(this,e.call.apply(e,[this].concat(i))),r),r.state={query:"",membersLimit:P},r.uncheckAll=function(){var e=r.props,t=e.onChangeRoles,n=e.roles;t(n.clear())},r.toggleAll=function(e){var t=r.props,n=t.onChangeRoles,o=t.members;n(o.map(function(){return e}).toMap())},r.onChangeQuery=function(e){r.setState({query:e.target.value,membersLimit:P})},r.onChangeRole=function(e,t){var n=r.props,o=n.onChangeRoles,a=n.roles;o(t?a.set(e,t):a.delete(e))},r.onToggleAllReader=function(){r.isAllReader?r.uncheckAll():r.toggleAll(d.ROLES.READER)},r.onToggleAllWriter=function(){r.isAllWriter?r.uncheckAll():r.toggleAll(d.ROLES.WRITER)},r.onToggleAllAdmin=function(){r.isAllAdmin?r.uncheckAll():r.toggleAll(d.ROLES.ADMIN)},r.onIncreaseMembersLimit=function(){r.setState(function(e){var t=e.membersLimit;return{membersLimit:t+j}})},n),O(r,o)}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props.roles;var a=this.state,i=a.query,l=a.membersLimit;var u=this.props.members.slice(0,l);return p.createElement(h.Modal.Table,null,p.createElement(h.Modal.Table.Head,null,p.createElement(h.Modal.Table.Row,null,p.createElement(h.Modal.Table.Cell,null,false),p.createElement(h.Modal.Table.Cell,null,p.createElement(h.Modal.Table.Label,null,"Reader"),p.createElement(h.Form.Radio,{type:"checkbox",onChange:this.onToggleAllReader,checked:this.isAllReader})),p.createElement(h.Modal.Table.Cell,null,p.createElement(h.Modal.Table.Label,null,"Writer"),p.createElement(h.Form.Radio,{type:"checkbox",onChange:this.onToggleAllWriter,checked:this.isAllWriter})),p.createElement(h.Modal.Table.Cell,null,p.createElement(h.Modal.Table.Label,null,"Admin"),p.createElement(h.Form.Radio,{type:"checkbox",onChange:this.onToggleAllAdmin,checked:this.isAllAdmin})))),p.createElement(h.InfiniteScroll,{component:h.Modal.Table.Body,onTrigger:this.onIncreaseMembersLimit},u.map(function(e){return p.createElement(R,{key:e.uid,member:e,onChangeRole:n.onChangeRole,role:o.get(e.uid)})}).toArray()))};r(t,[{key:"isAllReader",get:function e(){var t=this.props,n=t.roles,r=t.members;return r.every(function(e){return n.get(e.uid)===d.ROLES.READER})}},{key:"isAllWriter",get:function e(){var t=this.props,n=t.roles,r=t.members;return r.every(function(e){return n.get(e.uid)===d.ROLES.WRITER})}},{key:"isAllAdmin",get:function e(){var t=this.props,n=t.roles,r=t.members;return r.every(function(e){return n.get(e.uid)===d.ROLES.ADMIN})}}]);return t}(p.Component),u.STYLES=f.StyleSheet.create({input:{maxWidth:240}}),s);t.default=C},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/ModalConfirmSetOwner.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=c(a);var l=n("./node_modules/aphrodite/no-important.js");var u=n("./styleguide/index.js");var s=n("./core/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=r=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.user,a=r.onClose,l=r.onCloseModal,s=r.onSetPrimaryOwner;return i.createElement(u.Popup,{onClose:a},i.createElement(u.Modal,{size:u.Modal.SIZES.small},i.createElement(u.Modal.Header,null,i.createElement(u.Modal.Title,null,"Owner")),i.createElement(u.Modal.Body,{styles:[n.userCardHint]},i.createElement(u.Text,null,"Are you sure you want to define ",o.displayName," ","as owner ?")),i.createElement(u.Modal.Footer,null,i.createElement(u.View,null,i.createElement(u.Button,{kind:"cancel",onClick:l},"Cancel")),i.createElement(u.View,null,i.createElement(u.Button,{onClick:s},"Confirm")))))};return t}(i.Component),r.STYLES=l.StyleSheet.create({userCardHint:{color:u.colors.GREY_BASE}}),o);t.default=m},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/NameInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=f(a);var l=n("./node_modules/aphrodite/no-important.js");var u=n("./node_modules/react-custom-debounced-input/lib/index.js");var s=p(u);var c=n("./styleguide/index.js");function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(o=r=function(e){v(t,e);function t(){var n,r,o;d(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=m(this,e.call.apply(e,[this].concat(i))),r),r.focus=function(){return r.input.focus()},r.onFocus=function(){r.input.select()},n),m(r,o)}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.onChange,u=o.value;return i.createElement(s.default,{component:c.AutosizeInput,inputClassName:(0,l.css)(r.input),onFocus:this.onFocus,onChange:a,value:u,placeholder:"Team Name",ref:function e(t){n.input=t}})};return t}(i.Component),r.STYLES=l.StyleSheet.create({input:{cursor:"pointer",font:"inherit",color:"inherit",padding:0,border:0,borderRadius:c.boxes.RADIUS_NORMAL,background:"transparent",minWidth:240,maxWidth:"100%",":focus":{cursor:"auto",border:"1px solid "+c.colors.GREY_LIGHT,padding:"0 "+c.spacing.S100+"px"}}}),o);t.default=h},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/SearchInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n("./node_modules/react/index.js");var a=u(o);var i=n("./styleguide/index.js");var l=n("./icons/index.js");function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){p(t,e);function t(){var n,r,o;s(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=c(this,e.call.apply(e,[this].concat(i))),r),r.onChange=function(e){var t=r.props.onChange;t(e.target.value)},n),c(r,o)}t.prototype.render=function e(){return a.createElement(i.Form.Input,r({},this.props,{onChange:this.onChange,size:i.Form.Input.SIZES.small}),a.createElement(i.Form.InputAddOn,{prefix:true},a.createElement(l.IconSearch,null)))};return t}(a.Component);t.default=f},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/SpacePermissions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l,u,s,c,p,f;var d=n("./node_modules/react/index.js");var m=_(d);var v=n("./node_modules/react-redux/es/index.js");var h=n("./node_modules/aphrodite/no-important.js");var y=n("./icons/index.js");var b=n("./core/index.js");var g=n("./styleguide/index.js");var E=n("./common/index.js");var w=n("./flux/index.js");var O=n("./website/skeleton/index.js");function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(r=w.Connectors.database(function(e){var t=e.org;return{orgSpaces:b.OrgSpace.queryByOrg(t.uid).setOptions({waitFetched:false})}}),o=(0,v.connect)(),r(a=o(a=(l=i=function(e){j(t,e);function t(){R(this,t);return P(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.onClose,o=n.org,a=n.team,i=n.orgSpaces;var l=t.STYLES;return m.createElement(g.Popup,{onClose:r},m.createElement(g.Modal,{size:g.Modal.SIZES.small},m.createElement(g.Modal.Header,null,m.createElement(g.Modal.Title,null,a?a.name+" permissions":"All members permissions")),m.createElement(g.Modal.Body,{styles:[g.Modal.Body.STYLES.noPadding]},m.createElement(g.Modal.Table,null,m.createElement(g.Modal.Table.Head,null,m.createElement(g.Modal.Table.Row,{styles:[l.header]},m.createElement(g.Modal.Table.Cell,{styles:[l.spacePermissionsHint]},m.createElement(g.Text.TextH200,null,"You can define access control for each of this spaces.")))),m.createElement(g.Modal.Table.Body,null,i.toList().map(function(e){return m.createElement(S,{org:o,key:e.spaceID,orgSpace:e})})))),m.createElement(g.Modal.Footer,null,m.createElement(g.View,null,m.createElement(g.Button,{kind:"cancel",onClick:r},"Cancel")),m.createElement(g.View,null))))};return t}(m.Component),i.STYLES=h.StyleSheet.create({header:{paddingLeft:g.spacing.S300,paddingBottom:g.spacing.S100,paddingTop:g.spacing.S400,color:g.colors.GREY_BASE},spacePermissionsHint:{paddingTop:0,paddingBottom:0}}),l))||a)||a);var S=(u=(0,v.connect)(),s=w.Connectors.database(function(e){var t=e.orgSpace;return{space:b.Space.queryByID(t.spaceID).defaultsTo(O.mockedSpace)}}),u(c=s(c=(f=p=function(e){j(t,e);function t(){var n,r,o;R(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=P(this,e.call.apply(e,[this].concat(i))),r),r.redirectToSpace=function(){var e=r.props,t=e.org,n=e.space,o=e.dispatch;o(w.Flux.auth.redirectToSpace({org:t,space:n,pathname:"~/settings/teams"}))},n),P(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.space;return m.createElement(g.Modal.Table.Row,{key:r.uid,onClick:this.redirectToSpace,styles:[g.View.PADDING.S300Horizontal,n.space]},m.createElement(g.Modal.Table.Cell,null,m.createElement(g.View,{styles:[g.View.MARGIN.S200Right]},m.createElement(E.SpaceAvatar,{space:r,styles:[E.SpaceAvatar.STYLES.sizeMD]})),m.createElement(g.Text,null,r.name)),m.createElement(g.Modal.Table.Cell,null,m.createElement(g.View,{styles:[n.icon]},m.createElement(y.IconChevronRight,null))))};return t}(m.Component),p.STYLES=h.StyleSheet.create({space:{cursor:"pointer",":hover":{boxShadow:g.boxes.SHADOW_LOW}},icon:{textAlign:"right",color:g.colors.GREY_BASE}}),f))||c)||c);t.default=C},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/TeamPanel.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,l;var u=n("./node_modules/react/index.js");var s=L(u);var c=n("./node_modules/react-redux/es/index.js");var p=n("./node_modules/scroll-into-view-if-needed/dist/index.js");var f=A(p);var d=n("./node_modules/aphrodite/no-important.js");var m=n("./common/index.js");var v=n("./styleguide/index.js");var h=n("./website/actions/org.js");var y=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/NameInput.js");var b=A(y);var g=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/TeamPanelControls.js");var E=A(g);var w=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/Filters.js");var O=A(w);var _=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/SearchInput.js");var R=A(_);var P=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/Member.js");var j=A(P);var C=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/Blankslate.js");var S=A(C);var T=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/SpacePermissions.js");var x=A(T);var M=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/Invite.js");var I=A(M);function A(e){return e&&e.__esModule?e:{default:e}}function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var z=3;var N=6*z;var F=(r=(0,c.connect)(),(0,m.withRouterListen)(o=r(o=(i=a=function(e){k(t,e);function t(){var n,r,o;D(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=B(this,e.call.apply(e,[this].concat(i))),r),r.state={activeFilter:"all",query:"",isPermissionsModalOpen:false,isInviteModalOpen:false,membersLimit:N},r.onChangeFilter=function(e){r.setState({activeFilter:e,membersLimit:N})},r.onChangeQuery=function(e){r.setState({query:e,membersLimit:N})},r.onOpenPermissionsModal=function(){r.setState({isPermissionsModalOpen:true})},r.onClosePermissionsModal=function(){r.setState({isPermissionsModalOpen:false})},r.onOpenInviteModal=function(){r.setState({isInviteModalOpen:true})},r.onCloseInviteModal=function(){r.setState({isInviteModalOpen:false})},r.onChangeName=function(e){var t=r.props,n=t.org,o=t.team,a=t.dispatch;if(!o||!e)return;a((0,h.updateTeamName)(n,o.set("name",e)))},r.onEditName=function(){r.nameInput&&r.nameInput.focus()},r.onDelete=function(){var e=r.props,t=e.dispatch,n=e.history,o=e.org,a=e.team;if(!a)return;if(window.confirm('Do you really want to delete the team "'+a.name+'"?')){t((0,h.deleteTeam)(o,a));n.replace("/@"+o.baseDomain+"/teams",{preventScroll:true})}},r.onIncreaseMembersLimit=function(){r.setState(function(e){var t=e.membersLimit;return{membersLimit:t+2*z}})},n),B(r,o)}t.prototype.componentDidMount=function e(){var t=this.props,n=t.team,r=t.match.params.teamID;(n&&r===n.uid||!n&&!r)&&(0,f.default)(this.container)};t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.org,i=o.team,l=o.canAdmin,u=o.onManageMemberPermissions,c=o.canManagePermissions;var p=this.state,f=p.activeFilter,d=p.query,m=p.isPermissionsModalOpen,h=p.isInviteModalOpen,y=p.membersLimit;var g=O.default.FILTERS.filter(function(e,t){return"all"===t||n.props.members.some(function(e){var n=i?e.teams.get(i.uid).role:e.role;return n===t})});var w=this.props.members.size;var _="all"===f?this.props.members:this.props.members.filter(function(e){var t=i?e.teams.get(i.uid).role:e.role;return t===f});var R=_.slice(0,y);return s.createElement(s.Fragment,null,m&&s.createElement(x.default,{org:a,team:i,onClose:this.onClosePermissionsModal}),h&&s.createElement(I.default,{org:a,team:i,onClose:this.onCloseInviteModal}),s.createElement(v.Panel,{elementRef:function e(t){n.container=t}},s.createElement(v.Panel.Header,null,s.createElement(v.Panel.Header.Left,null,s.createElement(v.Panel.Header.Title,null,i&&l&&s.createElement(b.default,{onChange:this.onChangeName,value:i.name,ref:function e(t){n.nameInput=t}}),i&&!l&&i.name,!i&&"All members")),s.createElement(v.Panel.Header.Right,null,w>0&&g.size>2&&s.createElement(O.default,{value:f,onChange:this.onChangeFilter,filters:g}),w>0&&false,i&&l&&s.createElement(v.View,{styles:[v.View.MARGIN.S300Left,r.teamPanelControls]},s.createElement(E.default,{onEditName:this.onEditName,onDelete:this.onDelete})))),w>0?s.createElement(v.InfiniteScroll,{component:v.Panel.Body,styles:[v.Scrollable.STYLES.withScrollbar,r.teamPanelMembers],onTrigger:this.onIncreaseMembersLimit},s.createElement(v.View,{styles:[r.teamPanelMembersGrid]},R.map(function(e){return s.createElement(v.View,{key:e.uid,styles:[v.View.PADDING.S400Top,r.teamPanelMembersGridItem]},s.createElement(j.default,{team:i,org:a,member:e,onManageMemberPermissions:u}))}).toArray())):s.createElement(v.Panel.Body,null,s.createElement(S.default,{canAdmin:l,onOpenInviteModal:this.onOpenInviteModal})),w>0&&s.createElement(v.Panel.Footer,null,s.createElement(v.Panel.Footer.Hint,null,1===w?w+" member":w+" members",!i&&" - This is your default team containing all organization members"),l&&s.createElement(v.Panel.Footer.Controls,null,c&&s.createElement(v.Button,{kind:"link",onClick:this.onOpenPermissionsModal},"Setup team permissions"),s.createElement(v.Button,{onClick:this.onOpenInviteModal,disabled:a.isLocked},i?"Add members":"Invite new members")))))};return t}(s.Component),a.defaultProps={team:null},a.STYLES=d.StyleSheet.create({teamPanelControls:{display:"flex",alignItems:"center"},teamPanelMembers:{maxHeight:400},teamPanelMembersGrid:{display:"flex",flexWrap:"wrap",marginTop:-v.spacing.S400},teamPanelMembersGridItem:(l={width:"100%"},l["@media "+v.MEDIA.TABLET]={width:"33.33%"},l)}),i))||o)||o);t.default=F},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/TeamPanelCollapsed.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a;var i=n("./node_modules/react/index.js");var l=p(i);var u=n("./node_modules/aphrodite/no-important.js");var s=n("./common/index.js");var c=n("./styleguide/index.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(o=r=function(e){m(t,e);function t(){var n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=(n=(r=d(this,e.call.apply(e,[this].concat(i))),r),r.onExpand=function(){var e=r.props,t=e.team,n=e.onExpand;n(t)},n),d(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.team,a=r.members;return l.createElement(c.Panel,null,l.createElement(c.Panel.Header,{onClick:this.onExpand},l.createElement(c.Panel.Header.Left,null,l.createElement(c.Panel.Header.Title,null,o?o.name:"All members"),l.createElement(c.Panel.Header.Hint,null,1!==a.size?a.size+" members":a.size+" member")),l.createElement(c.Panel.Header.Right,null,l.createElement(s.UserAvatar.List,{userIDs:a.slice(0,3).map(function(e){return e.uid}).toArray(),styles:[n.avatars],withTooltip:false}),l.createElement(c.Panel.Toggle,{styles:[c.View.MARGIN.S300Left],isCollapsed:true}))))};return t}(l.Component),r.defaultProps={team:null},r.STYLES=u.StyleSheet.create({avatars:(a={},a["@media "+c.MEDIA.SMALLER_THAN_TABLET]={display:"none"},a)}),o);t.default=v},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/TeamPanelControls.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=l(r);var a=n("./styleguide/index.js");var i=n("./icons/index.js");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){c(t,e);function t(){u(this,t);return s(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.onEditName,r=t.onDelete;return o.createElement(a.Popover.Portal,{openByClickOn:o.createElement(a.Panel.Control,null,o.createElement(i.IconEllipsisH,null))},o.createElement(a.Popover,null,o.createElement(a.Menu,null,o.createElement(a.Menu.Item,{icon:o.createElement(i.IconPencil,null),onClick:n},"Edit Name"),o.createElement(a.Menu.Item,{icon:o.createElement(i.IconTrashcan,null),onClick:r},"Delete"))))};return t}(o.Component);t.default=p},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/UserPanelControls.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=c(a);var l=n("./node_modules/aphrodite/no-important.js");var u=n("./styleguide/index.js");var s=n("./icons/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=r=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.onRemoveUser,o=n.onClickSetOwner,a=n.canSuperAdmin;var l=t.STYLES;return i.createElement(u.Popover.Portal,{openByClickOn:i.createElement(u.View,{styles:[l.controls]},i.createElement(s.IconEllipsisH,null))},i.createElement(u.Popover,{align:"end"},i.createElement(u.Menu,null,i.createElement(u.Menu.Item,{icon:i.createElement(s.IconUserMinus,null),onClick:r},"Remove from organization"),true===a&&i.createElement(u.Menu.Item,{icon:i.createElement(s.IconUserCheck,null),onClick:o},"Define as owner"))))};return t}(i.Component),r.defaultProps={canSuperAdmin:false},r.STYLES=l.StyleSheet.create({controls:{":hover":{cursor:"pointer",color:u.colors.BLUE_BASE}}}),o);t.default=m}});
//# website-part-06.42c12ce7.js.map