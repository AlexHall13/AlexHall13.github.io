webpackJsonp([64],{"./website/components/RouteDashboard/RouteAccount/LeaveOrganizations/ConfirmLeavePopup.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s;var u=r("./node_modules/react/index.js");var l=h(u);var c=r("./node_modules/react-redux/es/index.js");var p=r("./node_modules/aphrodite/no-important.js");var f=r("./styleguide/index.js");var d=r("./core/index.js");var m=r("./flux/index.js");var v=r("./website/actions/org.js");function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function y(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(n=(0,c.connect)(),o=m.Connectors.database(function(e){var t=e.org,r=e.user;return{membership:d.Membership.queryByID({orgID:t.uid,userID:r.uid})}}),n(a=o(a=(s=i=function(e){w(t,e);function t(){var r=this;var n,o,a;g(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=b(this,e.call.apply(e,[this].concat(s))),o),o.state={leaveInput:""},o.onConfirmLeave=y(regeneratorRuntime.mark(function e(){var t,n,a,i;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.dispatch,a=t.org,i=t.membership;n((0,v.removeMember)(a,i));case 2:case"end":return r.stop()}},e,r)})),o.onInputChange=function(e){e.preventDefault();o.setState({leaveInput:e.currentTarget.value})},n),b(o,a)}t.prototype.render=function e(){var r=this.props,n=r.onClose,o=r.org;var a=this.state.leaveInput;var i=t.STYLES;return l.createElement(f.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:n},l.createElement(f.Modal,{size:f.Modal.SIZES.medium},l.createElement(f.Modal.Header,null,l.createElement(f.Modal.Title,null,"Are you sure you want to leave ",o.name," ?")),l.createElement(f.Modal.Body,null,l.createElement(f.View,{styles:[f.View.MARGIN.S300Bottom,i.grey]},l.createElement(f.Text,null,"You're about to leave "+o.name+" organization. You won't be able to access to its content until you get re-invited by its owner.")),l.createElement(f.Form.Group,{title:"Please type in 'LEAVE' to confirm",styles:i.noMargin},l.createElement(f.Form.Input,{value:a,onChange:this.onInputChange}))),l.createElement(f.Modal.Footer,null,l.createElement(f.Button,{kind:"cancel",onClick:n},"Cancel"),l.createElement(f.Button,{kind:"danger",onClick:this.onConfirmLeave,disabled:"LEAVE"!==a},"Yes, I'm sure"))))};return t}(l.PureComponent),i.STYLES=p.StyleSheet.create({grey:{color:"grey"},noMargin:{margin:0}}),s))||a)||a);t.default=E},"./website/components/RouteDashboard/RouteAccount/LeaveOrganizations/LeaveInfoPopup.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=l(a);var s=r("./node_modules/aphrodite/no-important.js");r("./core/index.js");var u=r("./styleguide/index.js");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=n=function(e){f(t,e);function t(){c(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=this.props,n=r.onClose,o=r.org;var a=t.STYLES;return i.createElement(u.Popup,{isOpened:true,closeOnEsc:true,closeOnOutsideClick:true,onClose:n},i.createElement(u.Modal,{size:u.Modal.SIZES.medium},i.createElement(u.Modal.Header,null,i.createElement(u.Modal.Title,null,"Leave ",o.name)),i.createElement(u.Modal.Body,null,i.createElement(u.View,{styles:a.grey},i.createElement(u.View,null,i.createElement(u.Text,null,"You cannot leave an organization that you own. However, you can :",i.createElement("ul",null,i.createElement("li",null,"Transfer the ownership to another member"),i.createElement("li",null,"Delete it. Warning: all content will be definitely erase and members access will be revoked. Make sure to have an export of your book before using this option.")))))),i.createElement(u.Modal.Footer,null,i.createElement(u.Button,{kind:"cancel",onClick:n},"Cancel"))))};return t}(i.PureComponent),n.STYLES=s.StyleSheet.create({grey:{color:u.colors.GREY_BASE}}),o);t.default=d},"./website/components/RouteMigration/BookImportControls.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=c(a);var s=r("./node_modules/aphrodite/no-important.js");var u=r("./styleguide/index.js");var l=r("./icons/index.js");r("./core/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=n=function(e){d(t,e);function t(){var r,n,o;p(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=f(this,e.call.apply(e,[this].concat(i))),n),n.importBook=function(e){e.preventDefault();var t=n.props,r=t.importBook,o=t.book;r(o)},n.importBookFull=function(e){e.preventDefault();var t=n.props,r=t.importBook,o=t.book;r(o,true)},r),f(n,o)}t.prototype.render=function e(){var r=t.STYLES;return i.createElement(u.Popover.Portal,{closeOnEsc:true,closeOnOutsideClick:true,openByClickOn:i.createElement(u.TilesGrid.Tile.Action,{role:"button",tabIndex:-1,styles:r.tileAction},i.createElement(l.IconGear,null))},i.createElement(u.Popover,null,i.createElement(u.Menu,null,i.createElement(u.Menu.Item,{icon:i.createElement(l.IconLayout,null),onClick:this.importBook},"Re-import default branch only"),i.createElement(u.Menu.Item,{icon:i.createElement(l.IconLayout,null),onClick:this.importBookFull},"Re-import all branches"))))};return t}(i.Component),n.STYLES=s.StyleSheet.create({tileAction:{alignSelf:"flex-end",cursor:"pointer"}}),o);t.default=m},"./website/components/RouteMigration/BookImportStatus.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=c(a);var s=r("./node_modules/aphrodite/no-important.js");var u=r("./icons/index.js");var l=r("./styleguide/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=n=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.status;return i.createElement(l.View,{styles:r.status},function(){switch(n){case"success":return i.createElement(u.IconCheck,{styles:[r.success]});case"error":return i.createElement(u.IconAlert,{styles:[r.error]});default:return null}}())};return t}(i.Component),n.STYLES=s.StyleSheet.create({status:{position:"absolute",fontSize:16,top:l.spacing.S200,right:l.spacing.S200+3},success:{color:l.colors.GREEN_BASE},error:{color:l.colors.RED_BASE}}),o);t.default=m},"./website/components/RouteMigration/BookImportTile.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s,u;var l=r("./node_modules/react/index.js");var c=S(l);var p=r("./node_modules/react-redux/es/index.js");var f=r("./node_modules/aphrodite/no-important.js");var d=r("./flux/index.js");var m=r("./common/index.js");var v=r("./core/index.js");var h=r("./styleguide/index.js");var y=r("./website/components/RouteMigration/BookImportControls.js");var g=E(y);var b=r("./website/components/RouteMigration/BookImportStatus.js");var w=E(b);function E(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function j(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=(n=(0,p.connect)(function(e){var t=e.config;return{config:t}}),o=d.Connectors.database(function(e){var t=e.book;return{space:t.spaceID?v.Space.queryByID(t.spaceID).setOptions({waitFetched:false}):null}}),a=d.Connectors.database(function(e){var t=e.space;return{ghStatuses:t?v.GitHubSyncStatus.queryBySpace(t.uid).setOptions({waitFetched:false}):null}}),n(i=o(i=a(i=(u=s=function(e){O(t,e);function t(){var r=this;var n,o,a;x(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=_(this,e.call.apply(e,[this].concat(s))),o),o.importBook=function(){var e=j(regeneratorRuntime.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a,i,s;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:a=o.props,i=a.migrationStatus,s=a.dispatch;r.next=3;return s(d.Flux.organization.migrateBook(i,t,n));case 3:case"end":return r.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),n),_(o,a)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.space,a=n.org,i=n.config,s=n.book,u=n.status,l=n.ghStatus;var p="pending"===u;var d="error"===u;if(!o)return c.createElement(h.TilesGrid.TilePlaceholder,null);var v=o.getURL(a,i.domains.spaces);var y=v.replace(/^https:\/\//,"");return c.createElement(h.TilesGrid.Tile,{styles:[r.book,p&&r.noEvents]},p?c.createElement(h.View,{styles:[r.flexRow]},c.createElement(h.View,{styles:[r.loading]},l&&!l.hasFinished?c.createElement(h.ProgressSpinner,{percentage:l.progress}):c.createElement(h.Loading,null))):c.createElement(h.TilesGrid.Tile.Image,{styles:[d&&r.faded]},c.createElement(m.CDNUrl,{url:o.logoURL},function(e){return c.createElement("img",{src:e,alt:o.name,className:(0,f.css)(r.spaceLogoImg)})})),c.createElement(h.TilesGrid.Tile.Content,{styles:[(p||d)&&r.faded]},c.createElement(h.TilesGrid.Tile.Title,null,o.name),c.createElement(h.TilesGrid.Tile.Headline,{title:y},y)),c.createElement(w.default,{status:u}),c.createElement(g.default,{importBook:this.importBook,book:s}))};return t}(c.Component),s.STYLES=f.StyleSheet.create({book:{position:"relative"},spaceLogoImg:{width:"100%",height:"100%",display:"block",borderRadius:h.boxes.RADIUS_LARGE},noEvents:{pointerEvents:"none"},faded:{opacity:.6},flexRow:{display:"flex",alignItems:"center",height:54},loading:{display:"flex",width:54,height:54,padding:4}}),u))||i)||i)||i);P.HEIGHT=82;t.default=P},"./website/components/RouteMigration/Feature.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=l(a);var s=r("./node_modules/aphrodite/no-important.js");var u=r("./styleguide/index.js");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=n=function(e){f(t,e);function t(){c(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.illustration,a=n.title,s=n.content;return i.createElement(u.View,{styles:[u.View.PADDING.S100Horizontal]},i.createElement(u.View,{styles:[r.featureHeading]},i.createElement(u.Illustration,{styles:r.illustration,alt:o.alt,src:o.src}),i.createElement(u.View,null,i.createElement(u.Text.HeadingH400,null,a))),i.createElement(u.View,null,i.createElement(u.Text.TextH200,{styles:r.light},s)))};return t}(i.PureComponent),n.STYLES=s.StyleSheet.create({illustration:{width:50,height:50,flexShrink:0,marginRight:u.spacing.S100},light:{color:u.colors.GREY_BASE},featureHeading:{display:"flex",alignItems:"center",marginBottom:u.spacing.S100}}),o);t.default=d},"./website/components/RouteMigration/InfoFetcher.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,i,s;var u=r("./node_modules/react/index.js");var l=m(u);var c=r("./node_modules/react-redux/es/index.js");var p=r("./styleguide/index.js");var f=r("./core/index.js");var d=r("./flux/index.js");function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b="\n   mutation migrateOrganization($orgID: String!, $userID: String!, $secret: String!) {\n     migrateOrganization(orgID: $orgID, userID: $userID, secret: $secret) {\n       token,\n       orgID\n     }\n   }";var w=(o=(0,c.connect)(function(e){var t=e.config;return{config:t}}),a=d.Connectors.graphQL(function(e){var t=e.config,r=e.orgID,o=e.userID,a=e.secret;return{migrateOrganization:{url:t.urls.api,query:b,operationName:"migrateOrganization",variables:{orgID:r,userID:o,secret:a},mapState:function e(t){var r=t.data,o=t.errors;if(o&&o.length>0)return{status:"error",error:o[0]};return r&&r.migrateOrganization?n({},r.migrateOrganization,{status:"ok"}):null}}}}),i=d.Connectors.database(function(e){var t=e.migrateOrganization;return{org:t&&t.orgID&&f.Organization.queryByID(t.orgID).setOptions({waitFetched:false})}}),o(s=a(s=i(s=function(e){g(t,e);function t(){var r,n,o;h(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=y(this,e.call.apply(e,[this].concat(i))),n),n.state={login:false},r),y(n,o)}t.prototype.componentWillReceiveProps=function e(t){var r=this;var n=t.migrateOrganization,o=t.org,a=t.dispatch,i=t.onError;if(!n)return;"error"===n.status&&i(n.error);if(o&&"ok"===n.status){var s=this.state.login;s||this.setState({login:true},v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return a(d.Flux.user.signInWithAuthToken({token:n.token}));case 2:t.next=4;return a(d.Flux.auth.redirectToOrg({org:o,pathname:"migration/status"}));case 4:case"end":return t.stop()}},e,r)})))}};t.prototype.render=function e(){return l.createElement(p.Loading,null)};return t}(l.Component))||s)||s)||s);t.default=w},"./website/components/RouteMigration/MigrationError.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=c(a);var s=r("./node_modules/aphrodite/no-important.js");var u=r("./styleguide/index.js");var l=r("./common/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=n=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.error;if(!n)return null;return i.createElement(u.Modal.Status,{styles:[u.Modal.Status.STYLES.danger,r.errorAlert]},"An error happened while attempting to upgrade your content,"," ",i.createElement(u.Link,{kind:"underline",onClick:l.openSupportDialog},"get in touch")," ","with our team.")};return t}(i.Component),n.STYLES=s.StyleSheet.create({errorAlert:{marginBottom:u.spacing.S200}}),o);t.default=m},"./website/components/RouteMigration/MigrationFaqHint.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r("./node_modules/react/index.js");var o=s(n);var a=r("./styleguide/index.js");var i=r("./node_modules/react-router-dom/es/index.js");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){c(t,e);function t(){u(this,t);return l(this,e.apply(this,arguments))}t.prototype.render=function e(){return o.createElement("span",null,"Learn more about the ",o.createElement(a.Link,{to:"https://docs.gitbook.com/faq",component:i.Link,target:"_blank"},"new features")," ","in this release")};return t}(o.Component);t.default=p},"./website/components/RouteMigration/RollbackMigration.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=m(a);var s=r("./node_modules/react-router-dom/es/index.js");var u=r("./node_modules/react-redux/es/index.js");var l=r("./node_modules/react-helmet/lib/Helmet.js");var c=d(l);r("./core/index.js");var p=r("./styleguide/index.js");var f=r("./flux/index.js");function d(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(n=(0,u.connect)(),n(o=function(e){g(t,e);function t(){var r=this;var n,o,a;h(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=y(this,e.call.apply(e,[this].concat(s))),o),o.state={error:null,loading:false},o.rollbackMigration=v(regeneratorRuntime.mark(function e(){var t,n,a,i;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.dispatch,a=t.org,i=t.migrationStatus;o.setState({error:null,loading:true});r.prev=2;r.next=5;return n(f.Flux.organization.rollbackMigration(a,i));case 5:r.next=10;break;case 7:r.prev=7;r.t0=r["catch"](2);o.setState({error:r.t0,loading:false});case 10:case"end":return r.stop()}},e,r,[[2,7]])})),n),y(o,a)}t.prototype.render=function e(){var t=this.props,r=t.org,n=t.migrationStatus,o=t.migrationStatusFetched;var a=this.state,u=a.error,l=a.loading;if(o&&!n.confirmed)return i.createElement(s.Redirect,{to:"/@"+r.baseDomain+"/migration/status"});return i.createElement(p.Modal,{size:p.Modal.SIZES.large,styles:p.Modal.STYLES.border},i.createElement(c.default,{title:"Rollback migration for "+r.name}),i.createElement(p.Modal.Header,{primary:true},i.createElement(p.Modal.Title,null,"Rollback ",r.name," migration")),u&&i.createElement(p.Modal.Status,{styles:[p.Modal.Status.STYLES.danger]},u.message),i.createElement(p.Modal.Body,null,i.createElement(p.View,{styles:[p.View.MARGIN.S200Top]},i.createElement(p.Text.TextH400,null,"Rollbacking ",i.createElement("strong",null,r.name)," migration will re-enable their legacy account and cancel redirections to the new version of GitBook."))),i.createElement(p.Modal.Footer,null,i.createElement(p.View,null),i.createElement(p.View,null,i.createElement(p.Button,{kind:"primary",onClick:this.rollbackMigration,disabled:!n.confirmed},l?i.createElement(p.Loading,null):i.createElement("span",null,"Rollback")))))};return t}(i.Component))||o);t.default=b},"./website/components/RouteMigration/RouteMigration.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a,i;var s=r("./node_modules/react/index.js");var u=x(s);var l=r("./node_modules/react-router-dom/es/index.js");var c=r("./node_modules/react-redux/es/index.js");var p=r("./core/index.js");var f=r("./flux/index.js");var d=r("./common/index.js");var m=r("./website/skeleton/index.js");var v=r("./website/components/RouteMigration/StepBooksStatus.js");var h=j(v);var y=r("./website/components/RouteMigration/StepPreview.js");var g=j(y);var b=r("./website/components/RouteMigration/StepLinkGithub.js");var w=j(b);var E=r("./website/components/RouteMigration/RollbackMigration.js");var S=j(E);function j(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=(o=(0,c.connect)(function(e){var t=e.user;return{user:t}}),a=f.Connectors.database(function(e){var t=e.org;return{migrationStatus:p.MigrationStatus.queryByOrgID(t.uid).defaultsTo(m.mockedMigrationStatus)}}),o(i=a(i=function(e){P(t,e);function t(){_(this,t);return O(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this;var r=this.props,o=r.match,a=r.migrationStatus,i=r.user,s=r.membership;if(!a||!(s&&s.canAdmin&&!a.confirmed||i&&i.isSiteAdmin))return u.createElement(d.ErrorPage.NotFound,null);return u.createElement(l.Switch,null,u.createElement(l.Route,{path:o.url+"/preview",render:function e(r){return u.createElement(g.default,n({},t.props,r))}}),u.createElement(l.Route,{path:o.url+"/github",render:function e(r){return u.createElement(w.default,n({},t.props,r))}}),u.createElement(l.Route,{path:o.url+"/status",render:function e(r){return u.createElement(h.default,n({},t.props,r))}}),u.createElement(l.Route,{path:o.url+"/rollback",render:function e(r){return u.createElement(S.default,n({},t.props,r))}}),u.createElement(d.ErrorPage.NotFound,null))};return t}(u.Component))||i)||i);t.default=k},"./website/components/RouteMigration/RouteMigrationWelcome.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r("./node_modules/react/index.js");var u=R(s);var l=r("../node_modules/querystring-es3/index.js");var c=C(l);var p=r("./node_modules/aphrodite/no-important.js");var f=r("./node_modules/react-redux/es/index.js");var d=r("./styleguide/index.js");var m=r("./common/index.js");var v=r("./icons/index.js");var h=r(40);var y=C(h);var g=r(41);var b=C(g);var w=r(42);var E=C(w);var S=r(43);var j=C(S);var x=r(44);var _=C(x);var O=r("./website/components/RouteMigration/InfoFetcher.js");var P=C(O);var k=r("./website/components/RouteMigration/Feature.js");var M=C(k);var I=r("./website/components/RouteMigration/MigrationError.js");var T=C(I);function C(e){return e&&e.__esModule?e:{default:e}}function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function B(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var D=(n=(0,f.connect)(function(e,t){var r=e.config;var n=t.location;return{queryParameters:c.default.parse(n.search.slice(1))}}),n(o=(i=a=function(e){B(t,e);function t(){var r,n,o;L(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=A(this,e.call.apply(e,[this].concat(i))),n),n.state={fetching:false,error:null},n.startMigration=function(){n.setState({fetching:true})},n.onError=function(e){n.setState({error:e,fetching:false})},r),A(n,o)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.queryParameters,o=n.orgID,a=n.userID,i=n.secret;var s=this.state,l=s.fetching,c=s.error;if(!o||!a||!i)return u.createElement(m.ErrorPage.NotFound,null);return u.createElement(d.Modal,{size:d.Modal.SIZES.large,styles:d.Modal.STYLES.border},u.createElement(d.Modal.Header,{styles:r.header},u.createElement(T.default,{error:c}),u.createElement(d.Modal.Title,null,"Upgrade to the new GitBook.com")),u.createElement(d.Modal.Body,{styles:r.body},u.createElement(d.View,{styles:r.grid},u.createElement(M.default,{title:"Blazing Fast Search",illustration:{alt:"Fast Search",src:y.default},content:"Find exactly what you're looking for in seconds"}),u.createElement(M.default,{title:"Beautiful WYSIWYG",illustration:{alt:"WYSIWYG",src:b.default},content:"A powerful yet elegantly simple editor for your entire team"}),u.createElement(M.default,{title:"Smart Insights",illustration:{alt:"Insights",src:E.default},content:"To understand your users and improve your content"}),u.createElement(M.default,{title:"Simple Branding",illustration:{alt:"Branding and custom domain",src:j.default},content:"Customize your logo, design and domain in a few clicks"}),u.createElement(d.View,{styles:[d.View.PADDING.S100Horizontal]},u.createElement(d.View,null,u.createElement(d.Text.HeadingH400,{styles:[r.docsHint]},"And much more")),u.createElement(d.View,null,u.createElement(d.Text.TextH200,{styles:r.light},"Learn more about the new GitBook"))),u.createElement(d.View,{styles:[d.View.PADDING.S100Horizontal]},u.createElement(d.View,null,u.createElement(d.Text.UIH300,{styles:[r.docsHint]},u.createElement(d.Link,{kind:"primary",styles:[r.docsLink],href:"//docs.gitbook.com/what-is-new/feature-highlights",target:"_blank"},"What","'","s new?"," ",u.createElement(v.IconArrowRight,{styles:[r.docsLinkIcon]})))),u.createElement(d.View,null,u.createElement(d.Text.UIH300,{styles:[r.docsHint]},u.createElement(d.Link,{kind:"primary",styles:[r.docsLink],href:"//docs.gitbook.com/what-is-new/important-differences",target:"_blank"},"What","'","s different?"," ",u.createElement(v.IconArrowRight,{styles:[r.docsLinkIcon]})))))),u.createElement("img",{alt:"Upgrade to the new GitBook.com",src:_.default,className:(0,p.css)(r.screenshot)})),u.createElement(d.Modal.Footer,null,u.createElement(d.View,null),u.createElement(d.View,null,u.createElement(d.Button,{href:"https://docs.gitbook.com/faq",target:"_blank",component:"a",kind:"link"},"Learn more"),u.createElement(d.Button,{kind:"primary",onClick:this.startMigration},l?u.createElement(P.default,{orgID:o,userID:a,secret:i,onError:this.onError}):"Start upgrade"))))};return t}(u.Component),a.STYLES=p.StyleSheet.create({header:{paddingBottom:0},body:{display:"flex",flexDirection:"row",alignItems:"center",borderTop:"none"},screenshot:{maxWidth:315,marginTop:-40,marginRight:-40,marginBottom:-40},grid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridRowGap:40,gridColumnGap:40},light:{color:d.colors.GREY_BASE},docsHint:{marginBottom:d.spacing.S100},docsLink:{textDecoration:"none"},docsLinkIcon:{fontSize:d.font.SIZE_MEDIUM_LARGE,marginLeft:d.spacing.S100}}),i))||o);t.default=D},"./website/components/RouteMigration/StepBooksStatus.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s,u;var l=r("./node_modules/react/index.js");var c=O(l);var p=r("./node_modules/react-redux/es/index.js");var f=r("./node_modules/aphrodite/no-important.js");var d=r("./node_modules/react-router-dom/es/index.js");var m=r("./core/index.js");var v=r("./styleguide/index.js");var h=r("./website/actions/org.js");var y=r(37);var g=_(y);var b=r("./website/components/RouteMigration/StepLayout.js");var w=_(b);var E=r("./website/components/RouteMigration/StepHeader.js");var S=_(E);var j=r("./website/components/RouteMigration/BookImportTile.js");var x=_(j);function _(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function M(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=(n=(0,p.connect)(function(e,t){var r=e.database;var n=t.migrationStatus;return{ghStatuses:n.books.map(function(e){return e.spaceID?r.getCollection(m.GitHubSyncStatus.queryBySpace(e.spaceID)).first():null})}}),o=v.Skeleton.connectToSkeleton(),n(a=(0,d.withRouter)(a=o(a=(s=i=function(e){M(t,e);function t(r){P(this,t);var n=k(this,e.call(this,r));u.call(n);var o=r.migrationStatus;n.state=o.books.reduce(function(e,t){e[t.bookID]={waitingForUpdate:false,prevStatus:t.status};return e},{});return n}t.getDerivedStateFromProps=function e(t,r){var n=t.migrationStatus,o=t.ghStatuses;return n.books.reduce(function(e,t){var n=o?o.get(t.bookID,null):null;var a=r[t.bookID];if(!a){e[t.bookID]={waitingForUpdate:false,prevStatus:t.status};return e}var i=r[t.bookID],s=i.prevStatus,u=i.waitingForUpdate;var l=u;"pending"===s&&"success"===t.status&&(l=true);n&&(l=false);e[t.bookID]={waitingForUpdate:l,prevStatus:t.status};return e},{})};t.prototype.componentDidMount=function e(){this.trackStartMigration()};t.prototype.componentDidUpdate=function e(t){if(!t.isLoading)return;this.trackStartMigration()};t.prototype.trackStartMigration=function e(){var t=this.props,r=t.dispatch,n=t.org,o=t.isLoading;if(o)return;r((0,h.startMigration)(n))};t.prototype.render=function e(){var r=this;var n=t.STYLES;var o=this.props,a=o.migrationStatus,i=o.org,s=o.ghStatuses;var u=a.books.map(function(e){var t=s.get(e.bookID,null);var n=r.state[e.bookID].waitingForUpdate;var o=e.status;(n||"pending"===e.status)&&(o="pending");t&&(o=t.hasError||t.hasTimeout?"error":"pending");return o});var l=u.some(function(e){return"error"===e});var p=u.reduce(function(e,t){return e+("success"===t?1:0)},0);var f=l||p<a.books.size;return c.createElement(w.default,{step:0,error:l&&new Error("Migration error"),org:i},c.createElement(v.Modal.Body,null,c.createElement(v.Form,{onSubmit:this.redirectToOrg},c.createElement(S.default,{title:"Your organization is being upgraded to the new GitBook",description:f?"Migration in progress, this may take a few minutes ("+p+"/"+a.books.size+" projects successfully migrated).":"Congratulations ! We have successfully imported all your projects",illustration:{alt:"Upgrade illustration",src:g.default}}),c.createElement(v.View,{styles:[v.View.MARGIN.S400Top,n.tilesScroll]},c.createElement(v.TilesGrid,null,a.books.map(function(e){return c.createElement(x.default,{key:e.bookID,book:e,org:i,migrationStatus:a,status:u.get(e.bookID),ghStatus:s.get(e.bookID,null)})}).toArray())))),c.createElement(v.Modal.StepperFooter,{nextDisabled:f,onNext:this.redirectToOrg}))};return t}(c.Component),i.STYLES=f.StyleSheet.create({tilesScroll:{maxHeight:2*x.default.HEIGHT+v.spacing.S300+2*v.spacing.S200,overflow:"scroll",paddingBottom:v.spacing.S400,marginBottom:-v.spacing.S400}}),u=function e(){var t=this;this.redirectToOrg=function(){var e=t.props,r=e.history,n=e.migrationStatus;r.push(n.githubBooks.size>0?"./github":"./preview")}},s))||a)||a)||a);t.default=I},"./website/components/RouteMigration/StepHeader.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o,a;var i=r("./node_modules/react/index.js");var s=c(i);var u=r("./node_modules/aphrodite/no-important.js");var l=r("./styleguide/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(a=o=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var o=this.props,a=o.title,i=o.description,u=o.illustration;return s.createElement(l.View,{styles:[r.header]},s.createElement(l.Illustration,n({styles:r.illustration},u)),s.createElement(l.View,{styles:[l.View.MARGIN.S200Left,r.textContainer]},s.createElement(l.View,null,s.createElement(l.Text.DisplayH700,null,a)),s.createElement(l.View,null,s.createElement(l.Text.TextH400,{styles:r.description},i))))};return t}(s.Component),o.STYLES=u.StyleSheet.create({header:{display:"flex",flexDirection:"row",alignItems:"center"},illustration:{flex:"0 0 auto",height:70,width:70},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center"},description:{color:l.colors.GREY_BASE}}),a);t.default=m},"./website/components/RouteMigration/StepLayout.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=v(a);var s=r("./node_modules/react-helmet/lib/Helmet.js");var u=m(s);r("./core/index.js");var l=r("./styleguide/index.js");var c=r("./website/components/RouteMigration/MigrationError.js");var p=m(c);var f=r("./website/components/RouteMigration/MigrationFaqHint.js");var d=m(f);function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(o=n=function(e){g(t,e);function t(){h(this,t);return y(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.children,n=t.step,o=t.org,a=t.error;return i.createElement(l.Modal,{size:l.Modal.SIZES.large,styles:l.Modal.STYLES.border,hint:i.createElement(d.default,null)},i.createElement(u.default,{title:"Upgrade to the new GitBook.com"}),i.createElement(l.Modal.Header,{primary:true},i.createElement(l.Modal.Title,null,"Upgrade ",o.name," to the new GitBook.com"),i.createElement(l.Modal.Stepper,null,i.createElement(l.Modal.Stepper.Item,{completed:true},"Import Organization"),i.createElement(l.Modal.Stepper.Item,{completed:n>=1},"GitHub Sync"),i.createElement(l.Modal.Stepper.Item,{completed:n>=2},"Enjoy the new GitBook"))),i.createElement(p.default,{error:a}),r)};return t}(i.Component),n.defaultProps={error:null},o);t.default=b},"./website/components/RouteMigration/StepLinkGithub.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s;var u=r("./node_modules/react/index.js");var l=S(u);var c=r("./node_modules/react-redux/es/index.js");var p=r("./node_modules/aphrodite/no-important.js");var f=r("./styleguide/index.js");var d=r("./node_modules/react-router-dom/es/index.js");var m=r("./flux/index.js");r("./core/index.js");var v=r(39);var h=E(v);var y=r("./website/components/RouteMigration/StepLayout.js");var g=E(y);var b=r("./website/components/RouteMigration/StepHeader.js");var w=E(b);function E(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function j(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=(n=(0,c.connect)(function(e){var t=e.config,r=e.user;return{config:t,user:r}}),o=f.Skeleton.connectToSkeleton(),n(a=(0,d.withRouter)(a=o(a=(s=i=function(e){O(t,e);function t(){var r=this;var n,o,a;x(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=_(this,e.call.apply(e,[this].concat(s))),o),o.state={fetching:false,error:null},o.redirectToPreview=function(){var e=o.props.history;e.push("./preview")},o.reauthenticateGithub=j(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props.dispatch;r.next=3;return t(m.Flux.user.reauthenticateWithGithub({scopes:["repo"]}));case 3:n=r.sent;a=n.credential;return r.abrupt("return",a.accessToken);case 6:case"end":return r.stop()}},e,r)})),o.createGithubSync=function(){var e=j(regeneratorRuntime.mark(function e(t){var n,a,i;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:n=o.props,a=n.migrationStatus,i=n.dispatch;return r.abrupt("return",i(m.Flux.organization.migrateGitHubSync(a,t)));case 2:case"end":return r.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),o.linkRepository=j(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:o.setState({fetching:true});r.prev=1;r.next=4;return o.reauthenticateGithub();case 4:t=r.sent;r.next=7;return o.createGithubSync(t);case 7:o.redirectToPreview();r.next=13;break;case 10:r.prev=10;r.t0=r["catch"](1);o.setState({error:r.t0,fetching:false});case 13:case"end":return r.stop()}},e,r,[[1,10]])})),n),_(o,a)}t.prototype.componentWillReceiveProps=function e(t){var r=t.migrationStatus,n=t.isLoading;if(n)return;r&&0===r.githubBooks.size&&this.redirectToPreview()};t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.migrationStatus,a=n.org;var i=this.state,s=i.fetching,u=i.error;return l.createElement(g.default,{step:1,error:u,org:a},l.createElement(f.Modal.Body,null,l.createElement(w.default,{title:"Re-connect your GitHub account",description:"We noticed some projects sync with GitHub. So we need to re-confirm your GitHub account.",illustration:{alt:"Github sync",src:h.default}}),l.createElement(f.View,{styles:[f.View.MARGIN.S400Top,r.repos]},l.createElement(f.Text.UIH400,{styles:r.repoNumber},o.githubBooks.size),l.createElement(f.Text.UIH400,null,o.githubBooks.size>1?"repositories":"repository"," ","to connect"))),l.createElement(f.Modal.Footer,null,l.createElement(f.View,null),l.createElement(f.View,null,l.createElement(f.Button,{kind:"link",onClick:this.redirectToPreview},"Skip"),l.createElement(f.Button,{kind:"primary",onClick:this.linkRepository},s?l.createElement(f.Loading,null):l.createElement("span",null,"Connect")))))};return t}(l.Component),i.STYLES=p.StyleSheet.create({repos:{display:"flex",alignItems:"center",justifyContent:"center",height:40,marginTop:f.spacing.S500,width:"100%",borderRadius:f.boxes.RADIUS_NORMAL,backgroundColor:f.colors.BLUE_LIGHTEST,color:f.colors.BLUE_BASE},repoNumber:{display:"inline-flex",justifyContent:"center",alignItems:"center",marginRight:f.spacing.S100,color:"#fff",padding:"0 5px",height:20,minWidth:20,borderRadius:f.boxes.RADIUS_NORMAL,backgroundColor:f.colors.BLUE_BASE}}),s))||a)||a)||a);t.default=P},"./website/components/RouteMigration/StepPreview.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=y(a);var s=r("./node_modules/react-redux/es/index.js");var u=r("./node_modules/react-router-dom/es/index.js");var l=r("./styleguide/index.js");r("./core/index.js");var c=r(38);var p=h(c);var f=r("./website/components/RouteMigration/StepLayout.js");var d=h(f);var m=r("./website/components/RouteMigration/StepHeader.js");var v=h(m);function h(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(n=(0,s.connect)(),n(o=(0,u.withRouter)(o=function(e){w(t,e);function t(){var r,n,o;g(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=b(this,e.call.apply(e,[this].concat(i))),n),n.onPreview=function(){var e=n.props,t=e.org,r=e.history;r.push("/@"+t.baseDomain)},r),b(n,o)}t.prototype.render=function e(){var t=this.props.org;return i.createElement(d.default,{step:2,org:t},i.createElement(l.Modal.Body,null,i.createElement(v.default,{title:"Congratulations !",description:i.createElement(i.Fragment,null,"You can now use the new GitBook.com.",i.createElement("br",null),"Test it, then confirm to migrate your production traffic and custom domains."),illustration:{alt:"Well done",src:p.default}})),i.createElement(l.Modal.Footer,null,i.createElement(l.Button,{styles:[l.Button.STYLES.block],onClick:this.onPreview},"Go live !")))};return t}(i.Component))||o)||o);t.default=E},"./website/components/SignIn/ActionVerifyEmail.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=b(a);var s=r("../node_modules/url/url.js");var u=g(s);var l=r("../node_modules/querystring-es3/index.js");var c=g(l);var p=r("./node_modules/react-redux/es/index.js");var f=r("./flux/index.js");var d=r("./node_modules/react-router-dom/es/index.js");var m=r("./styleguide/index.js");var v=r("./website/components/SignIn/AuthPage.js");var h=g(v);var y=r("./website/components/SignIn/errors.js");function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function w(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=(n=(0,p.connect)(),(0,d.withRouter)(o=n(o=function(e){j(t,e);function t(){var r=this;var n,o,a;E(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=(n=(o=S(this,e.call.apply(e,[this].concat(s))),o),o.state={actionCodeVerified:false,error:null},o.applyCode=w(regeneratorRuntime.mark(function e(){var t,n,a,i;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.dispatch,a=t.action,i=t.actionCode;if(i){r.next=3;break}return r.abrupt("return");case 3:r.prev=3;r.next=6;return n(f.Flux.user.applyActionCode(a,i));case 6:r.next=12;break;case 8:r.prev=8;r.t0=r["catch"](3);o.onError(r.t0);return r.abrupt("return");case 12:o.setState({actionCodeVerified:true});o.timeout=setTimeout(function(){o.onContinue()},8e3);case 14:case"end":return r.stop()}},e,r,[[3,8]])})),o.onError=function(e){(0,y.handleException)(e,function(){o.setState({error:e})})},o.onContinue=function(){var e=o.props.history;var t=c.default.parse(window.location.search.slice(1));var r=t.continueUrl;if(r){var n=u.default.parse(r);r=n.pathname}else r="/";e.replace(r)},n),S(o,a)}t.prototype.componentDidMount=function e(){this.applyCode()};t.prototype.componentWillUnmount=function e(){this.timeout&&clearTimeout(this.timeout)};t.prototype.render=function e(){var t=this.state,r=t.actionCodeVerified,n=t.error;if(!r&&!n)return null;return i.createElement(h.default,{title:"Email Verification"},i.createElement(m.Modal.Body,null,n?i.createElement(m.Alert,{styles:[m.Alert.STYLES.danger]},n.message):i.createElement(m.Text,{styles:[m.Text.COLOR.greyBase]},"Your email has been verified. You are about to be redirected to your"," ",i.createElement(m.Link,{onClick:this.onContinue},"dashboard."))))};return t}(i.Component))||o)||o);t.default=x},"./website/components/SignIn/AuthPage.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=y(a);var s=r("./node_modules/react-helmet/lib/Helmet.js");var u=h(s);var l=r("./node_modules/aphrodite/no-important.js");var c=r("./styleguide/index.js");r("./core/index.js");var p=r("./common/index.js");var f=r("./website/components/SignIn/OrgLogo.js");var d=h(f);var m=r("./website/components/SignIn/AuthModal.js");var v=h(m);function h(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(o=n=function(e){w(t,e);function t(){g(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.org,a=n.title,s=n.status,l=n.children,f=n.footer,m=n.error;return i.createElement(c.View,{styles:[r.pageWrapper]},i.createElement(u.default,{title:a}),i.createElement(p.BannerContainer,null,i.createElement(p.LegacyBanner,null)),i.createElement(c.View,{styles:[r.pageInner]},i.createElement(c.View,{styles:[r.modalWrapper]},o&&i.createElement(d.default,{org:o}),i.createElement(v.default,{title:a,status:s,error:m,hint:f},l))))};return t}(i.Component),n.STYLES=l.StyleSheet.create({pageWrapper:{display:"flex",flexDirection:"column",flex:1},pageInner:{display:"flex",alignItems:"stretch",justifyContent:"center",flexDirection:"column",flex:1,paddingRight:c.spacing.S200,paddingLeft:c.spacing.S200},modalWrapper:{paddingBottom:50}}),o);t.default=E},"./website/components/SignIn/AuthRecoverEmail.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=v(a);var s=r("./node_modules/react-redux/es/index.js");var u=r("./node_modules/react-router-dom/es/index.js");var l=r("./styleguide/index.js");var c=r("./flux/index.js");var p=r("./website/components/SignIn/AuthPage.js");var f=m(p);var d=r("./website/components/SignIn/errors.js");function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(n=(0,s.connect)(),(0,u.withRouter)(o=n(o=function(e){b(t,e);function t(){var r=this;var n,o,a;y(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=g(this,e.call.apply(e,[this].concat(s))),o),o.state={actionCodeVerified:false,emailRecovered:false,error:null},o.checkActionCode=h(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.dispatch,a=t.actionCode;r.prev=1;r.next=4;return n(c.Flux.user.checkActionCode(a));case 4:o.setState({actionCodeVerified:true});r.next=10;break;case 7:r.prev=7;r.t0=r["catch"](1);o.onError(r.t0);case 10:case"end":return r.stop()}},e,r,[[1,7]])})),o.onError=function(e){(0,d.handleException)(e,function(){o.setState({error:e})})},o.onSubmit=h(regeneratorRuntime.mark(function e(){var t,n,a,i,s;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t=o.props,n=t.dispatch,a=t.action,i=t.actionCode,s=t.history;r.prev=1;r.next=4;return n(c.Flux.user.applyActionCode(a,i));case 4:o.setState({emailRecovered:true});setTimeout(function(){return s.push("/account")},5e3);r.next=11;break;case 8:r.prev=8;r.t0=r["catch"](1);o.onError(r.t0);case 11:case"end":return r.stop()}},e,r,[[1,8]])})),n),g(o,a)}t.prototype.componentDidMount=function e(){this.checkActionCode()};t.prototype.render=function e(){var t=this.state,r=t.actionCodeVerified,n=t.emailRecovered,o=t.error;if(!r&&!o)return null;return i.createElement(f.default,{title:"Recover Email"},i.createElement(l.Modal.Body,null,o?i.createElement(l.Alert,{styles:[l.Alert.STYLES.danger]},o.message):i.createElement(i.Fragment,null,n?i.createElement(l.Alert,{styles:[l.Alert.STYLES.success]},"Your email has been recovered. You are about to be redirected to your"," ",i.createElement(u.Link,{to:"/account"},"dashboard.")):i.createElement(l.Form,{onSubmit:this.onSubmit},i.createElement(l.Form.Group,null,"Are you sure to recover your previous email ?"),i.createElement(l.Form.Actions,null,i.createElement(l.Button,{styles:[l.Button.STYLES.block]},"Recover my previous email"))))))};return t}(i.Component))||o)||o);t.default=w},"./website/components/SignIn/AuthResetPassword.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=v(a);var s=r("./node_modules/react-redux/es/index.js");var u=r("./node_modules/react-router-dom/es/index.js");var l=r("./flux/index.js");var c=r("./styleguide/index.js");var p=r("./website/components/SignIn/AuthPage.js");var f=m(p);var d=r("./website/components/SignIn/errors.js");function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w="Sorry, your passwords do not match. Please check and try again.";var E=(n=(0,s.connect)(),(0,u.withRouter)(o=n(o=function(e){b(t,e);function t(){var r=this;var n,o,a;y(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=g(this,e.call.apply(e,[this].concat(s))),o),o.state={actionCodeVerified:false,newPassword:"",confirmNewPassword:"",error:null,success:false},o.onError=function(e){(0,d.handleException)(e,function(){o.setState({error:e})})},o.onConfirmationBlur=function(){var e=o.state,t=e.newPassword,r=e.confirmNewPassword;t!==r?o.setState({error:new Error(w)}):o.setState({error:null})},o.onSubmit=function(){var e=h(regeneratorRuntime.mark(function e(t){var n,a,i,s,u,c,p;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.state,a=n.newPassword,i=n.confirmNewPassword;s=o.props,u=s.dispatch,c=s.actionCode,p=s.history;if(!(a!==i)){r.next=6;break}o.setState({error:new Error(w)});return r.abrupt("return");case 6:r.prev=6;r.next=9;return u(l.Flux.user.confirmPasswordReset(c,a));case 9:o.setState({success:true});setTimeout(function(){p.push("/login")},5e3);r.next=16;break;case 13:r.prev=13;r.t0=r["catch"](6);o.onError(r.t0);case 16:case"end":return r.stop()}},e,r,[[6,13]])}));return function(t){return e.apply(this,arguments)}}(),o.onPasswordChange=function(e){o.setState({newPassword:e.currentTarget.value})},o.onConfirmPasswordChange=function(e){o.setState({confirmNewPassword:e.currentTarget.value})},n),g(o,a)}t.prototype.componentDidMount=function e(){var t=this;var r=this.props,n=r.dispatch,o=r.actionCode;n(l.Flux.user.verifyPasswordResetCode(o)).then(function(){t.setState({actionCodeVerified:true})}).catch(this.onError)};t.prototype.render=function e(){var t=this.state.success;var r=this.state,n=r.newPassword,o=r.confirmNewPassword,a=r.error,s=r.actionCodeVerified;if(!s&&!a)return null;return i.createElement(f.default,{error:a,title:"Reset Password"},i.createElement(c.Modal.Body,null,i.createElement(c.Form,{onSubmit:this.onSubmit},t?i.createElement("span",null,"Your password has been successfully updated. You will now be asked to"," ",i.createElement(u.Link,{to:"/login"},"log-in")," with your new password."):i.createElement("div",null,i.createElement(c.Form.Group,{title:"New Password"},i.createElement(c.Form.Input,{value:n,type:"password",onChange:this.onPasswordChange})),i.createElement(c.Form.Group,{title:"Confirm New Password"},i.createElement(c.Form.Input,{value:o,type:"password",onBlur:this.onConfirmationBlur,onChange:this.onConfirmPasswordChange}),i.createElement(c.Form.Hint,null,i.createElement("span",null,"Your new password must be at least 6 characters long."))),i.createElement(c.Form.Actions,null,i.createElement(c.Button,{styles:[c.Button.STYLES.block]},"Change my password"))))))};return t}(i.Component))||o)||o);t.default=E},"./website/components/SignIn/InvitePage.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i,s,u,l;var c=r("./node_modules/react/index.js");var p=x(c);var f=r("./node_modules/react-redux/es/index.js");var d=r("./node_modules/aphrodite/no-important.js");var m=r("./common/index.js");var v=r("./core/index.js");var h=r("./styleguide/index.js");var y=r("./icons/index.js");var g=r("./flux/index.js");var b=r("./website/components/SignIn/RedirectAfterAuth.js");var w=j(b);var E=r("./website/components/SignIn/AuthPage.js");var S=j(E);function j(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function _(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M=(o=n=function(e){k(t,e);function t(){O(this,t);return P(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props.children;return p.createElement("li",null,p.createElement("span",{className:(0,d.css)(r.iconCheck)},p.createElement(y.IconCheck,null)," "),n)};return t}(p.Component),n.STYLES=d.StyleSheet.create({iconCheck:{color:h.colors.GREEN_BASE,fontSize:h.font.SIZE_LARGE}}),o);var I=(a=(0,f.connect)(),i=g.Connectors.database(function(e){var t=e.org,r=e.user,n=e.invite;return{membership:v.Membership.queryByID({orgID:t.uid,userID:r.uid}),team:n&&n.teamID?v.Team.queryByID({teamID:n.teamID,orgID:t.uid}):null}}),a(s=i(s=(l=u=function(e){k(t,e);function t(){var r=this;var n,o,a;O(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=P(this,e.call.apply(e,[this].concat(s))),o),o.state={loading:false,error:null},o.onSubmit=function(){var e=_(regeneratorRuntime.mark(function e(t){var n,a,i,s,u;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.props,a=n.dispatch,i=n.invite,s=n.org,u=n.membership;if(i){r.next=4;break}return r.abrupt("return");case 4:o.setState({loading:true});r.prev=5;r.next=8;return a(g.Flux.invites.useInvite(s,i,u));case 8:r.next=13;break;case 10:r.prev=10;r.t0=r["catch"](5);o.setState({error:r.t0});case 13:r.prev=13;o.setState({loading:false});return r.finish(13);case 16:case"end":return r.stop()}},e,r,[[5,10,13,16]])}));return function(t){return e.apply(this,arguments)}}(),n),P(o,a)}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.org,a=n.membership,i=n.invite,s=n.team;var u=this.state,l=u.loading,c=u.error;if(!i)return p.createElement(m.Static404,null,p.createElement(S.default,{title:"Invite Not Found"},p.createElement(h.Alert,{styles:[h.Alert.STYLES.danger]},"This invite doesn't exist or is expired.")));if(o.isLocked)return p.createElement(m.Static403,null,p.createElement(h.Modal,null,p.createElement(h.Modal.Header,{styles:r.modalHeader},p.createElement(h.Modal.Title,null,"Imposible to join "+o.name),p.createElement(m.OrgAvatar,{org:o,styles:m.OrgAvatar.STYLES.sizeMD})),p.createElement(h.Modal.Body,null,p.createElement(h.Text.TextH200,{style:{color:h.colors.GREY_BASE}},"This organization has been suspended and can not invite new members at the moment. Please try again later."))));var f=a&&i.teamID&&a.teams.get(i.teamID);var y=a&&!i.teamID?v.Membership.isRoleUpgrade(a.role,i.role):!f||v.Membership.isRoleUpgrade(f.role,i.role);if(a&&i&&!y)return p.createElement(w.default,{org:o});return p.createElement(S.default,{title:"Join "+o.name,org:o},p.createElement(h.Modal.Body,null,p.createElement(h.Form,{onSubmit:this.onSubmit},c&&p.createElement(h.Alert,{styles:[h.Alert.STYLES.danger]},c.message),p.createElement(h.Form.Group,null,"You have been invited to join ",p.createElement("b",null,o.name)," as"," ",i.teamID?"reader":i.role,", giving you the following permissions:",p.createElement("ul",{className:(0,d.css)(r.permissionsList)},p.createElement(M,null,"Read and comment"),s&&p.createElement(M,null,"Member in team ",s.name),!i.teamID&&i.canEdit&&p.createElement(M,null,"Write new content"),!i.teamID&&i.canReview&&p.createElement(M,null,"Approve writers submissions"),!i.teamID&&i.canAdmin&&p.createElement(M,null,"Manage team settings"))),p.createElement(h.Form.Actions,null,p.createElement(h.Button,{styles:[h.Button.STYLES.block],disabled:Boolean(c||l)},"Join")))))};return t}(p.Component),u.STYLES=d.StyleSheet.create({permissionsList:{listStyleType:"none",paddingLeft:20},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center"}}),l))||s)||s);t.default=I},"./website/components/SignIn/OAuthModalFooter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r("./node_modules/react/index.js");var u=m(s);var l=r("./node_modules/react-redux/es/index.js");var c=r("./node_modules/aphrodite/no-important.js");var p=r("./styleguide/index.js");var f=r("./icons/index.js");var d=r("./flux/index.js");function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(n=(0,l.connect)(),n(o=(i=a=function(e){g(t,e);function t(){var r=this;var n,o,a;h(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=y(this,e.call.apply(e,[this].concat(s))),o),o.onClickGoogle=function(){var e=v(regeneratorRuntime.mark(function e(t){var n,a,i,s;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.props,a=n.dispatch,i=n.onLoading,s=n.onError;i(true);r.prev=3;r.next=6;return a(d.Flux.user.signInWithGoogle());case 6:r.next=12;break;case 8:r.prev=8;r.t0=r["catch"](3);s(r.t0);i(false);case 12:case"end":return r.stop()}},e,r,[[3,8]])}));return function(t){return e.apply(this,arguments)}}(),o.onClickGitHub=function(){var e=v(regeneratorRuntime.mark(function e(t){var n,a,i,s;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.props,a=n.dispatch,i=n.onLoading,s=n.onError;i(true);r.prev=3;r.next=6;return a(d.Flux.user.signInWithGitHub());case 6:r.next=12;break;case 8:r.prev=8;r.t0=r["catch"](3);s(r.t0);i(false);case 12:case"end":return r.stop()}},e,r,[[3,8]])}));return function(t){return e.apply(this,arguments)}}(),n),y(o,a)}t.prototype.render=function e(){var r=this.props.disabled;var n=t.STYLES;return u.createElement(p.Modal.Footer,{label:"Or sign in with"},u.createElement(p.View,{styles:[n.oauthButtonWrapper,p.View.PADDING.S100Right]},u.createElement(p.Button,{kind:"secondary",disabled:r,styles:[p.Button.STYLES.block],onClick:this.onClickGoogle},u.createElement(f.IconGoogleLogo,{color:"svg"})," Google")),u.createElement(p.View,{styles:[n.oauthButtonWrapper,p.View.PADDING.S100Left]},u.createElement(p.Button,{kind:"secondary",disabled:r,styles:[p.Button.STYLES.block],onClick:this.onClickGitHub},u.createElement(f.IconGitHubLogo,{styles:[n.githubLogo]})," GitHub")))};return t}(u.Component),a.STYLES=c.StyleSheet.create({githubLogo:{color:"#24292e",fontSize:18},oauthButtonWrapper:{flex:1}}),i))||o);t.default=b},"./website/components/SignIn/OrgLogo.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=p(a);var s=r("./node_modules/aphrodite/no-important.js");var u=r("./core/index.js");var l=r("./styleguide/index.js");var c=r("./common/index.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=40;var h=(o=n=function(e){m(t,e);function t(){f(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var r=t.STYLES;var n=this.props,o=n.org,a=n.styles;return i.createElement(l.View,{styles:[r.logo,a]},i.createElement(c.OrgAvatar,{org:o,styles:[c.OrgAvatar.STYLES.sizeMD,r.logoImg]}),i.createElement("h1",{className:(0,s.css)(r.logoName)},o.name))};return t}(i.Component),n.STYLES=s.StyleSheet.create({logo:{display:"flex",justifyContent:"center",alignItems:"center",flex:"auto",lineHeight:v+"px",margin:l.spacing.S300},logoImg:{display:"block"},logoName:{paddingLeft:10,margin:0,fontWeight:l.font.WEIGHT_BOLD,fontSize:.7*v+"px",lineHeight:1.2,display:"inline-block",verticalAlign:"bottom",color:l.colors.BLACK}}),o);t.default=h},"./website/components/SignIn/RedirectAfterAuth.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a;var i=r("./node_modules/react/index.js");var s=p(i);var u=r("./node_modules/react-redux/es/index.js");var l=r("./flux/index.js");var c=r("./core/index.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(n=(0,u.connect)(function(e){var t=e.user;return{live:t.live}}),o=l.Connectors.database(function(e){var t=e.spaceID;return{space:c.Space.queryByID(t).setOptions({ignoreErrors:true})}}),n(a=o(a=function(e){m(t,e);function t(){var r,n,o;f(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(r=(n=d(this,e.call.apply(e,[this].concat(i))),n),n.attemptRedirect=function(){var e=n.props,t=e.dispatch,r=e.org,o=e.space,a=e.pathname,i=e.live;if(!i)return;var s=a||"";t(r&&o?l.Flux.auth.redirectToSpace({org:r,space:o,pathname:s}):r?l.Flux.auth.redirectToOrg({org:r,pathname:s}):l.Flux.auth.redirectToWebsite(s))},r),d(n,o)}t.prototype.componentDidMount=function e(){this.attemptRedirect()};t.prototype.componentDidUpdate=function e(){this.attemptRedirect()};t.prototype.render=function e(){return null};return t}(s.Component))||a)||a);t.default=v},"./website/components/SignIn/RouteAuthAction.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a;var i=r("./node_modules/react/index.js");var s=x(i);var u=r("./node_modules/react-redux/es/index.js");var l=r("./node_modules/react-intl/lib/index.es.js");var c=r("../node_modules/querystring-es3/index.js");var p=j(c);var f=r("./node_modules/react-router-dom/es/index.js");var d=r("./styleguide/index.js");var m=r("./common/index.js");r("./core/index.js");var v=r("./website/components/SignIn/AuthResetPassword.js");var h=j(v);var y=r("./website/components/SignIn/ActionVerifyEmail.js");var g=j(y);var b=r("./website/components/SignIn/AuthRecoverEmail.js");var w=j(b);var E=r("./website/components/SignIn/AuthPage.js");var S=j(E);function j(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=(n=(0,u.connect)(null,null,function(e,t,r){var n=t.dispatch;var o=r.location;var a=o.search&&p.default.parse(o.search.slice(1));return{dispatch:n,location:o,actionCode:a.oobCode,action:a.mode}}),o=(0,u.connect)(function(e){var t=e.user;return{user:t}}),(0,l.injectIntl)(a=n(a=o(a=function(e){P(t,e);function t(){_(this,t);return O(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.location,n=t.actionCode,o=t.action,a=t.user;if("resetPassword"===o&&n)return s.createElement(d.Skeleton.Wait,null,s.createElement(h.default,{action:o,actionCode:n}));if("recoverEmail"===o&&n)return s.createElement(d.Skeleton.Wait,null,s.createElement(w.default,{action:o,actionCode:n}));if("verifyEmail"===o&&n){if(!a.isLoggedIn){var i=encodeURIComponent(""+r.pathname+r.search);return s.createElement(f.Redirect,{to:"/login?location="+i})}return s.createElement(d.Skeleton.Wait,null,s.createElement(g.default,{action:o,actionCode:n}))}return s.createElement(m.StaticContext,{statusCode:500},s.createElement(S.default,{title:"Invalid Action"},s.createElement(d.Modal.Body,null,s.createElement(d.Alert,{styles:[d.Alert.STYLES.danger]},"The URL you are accesing is invalid."))))};return t}(s.Component))||a)||a)||a);t.default=k},"./website/components/SignIn/RouteForgotPassword.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=m(a);var s=r("./node_modules/react-redux/es/index.js");var u=r("./flux/index.js");var l=r("./styleguide/index.js");var c=r("./website/components/SignIn/AuthPage.js");var p=d(c);var f=r("./website/components/SignIn/errors.js");function d(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(n=(0,s.connect)(),n(o=function(e){g(t,e);function t(){var r=this;var n,o,a;h(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=(n=(o=y(this,e.call.apply(e,[this].concat(s))),o),o.state={loading:false,email:"",error:null,forgotPasswordSuccess:false},o.onSubmit=function(){var e=v(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:t.preventDefault();n=o.state.email;a=o.props.dispatch;o.setState({loading:true});r.prev=4;r.next=7;return a(u.Flux.user.resetPassword(n));case 7:o.setState({error:null,forgotPasswordSuccess:true});r.next=13;break;case 10:r.prev=10;r.t0=r["catch"](4);(0,f.handleException)(r.t0,function(){o.setState({error:r.t0})});case 13:r.prev=13;o.setState({loading:false});return r.finish(13);case 16:case"end":return r.stop()}},e,r,[[4,10,13,16]])}));return function(t){return e.apply(this,arguments)}}(),o.onEmailChange=function(e){o.setState({email:e.currentTarget.value})},n),y(o,a)}t.prototype.render=function e(){var t=this.state,r=t.loading,n=t.email,o=t.error,a=t.forgotPasswordSuccess;return i.createElement(p.default,{title:"Password Reset",error:o},i.createElement(l.Modal.Body,null,i.createElement(l.Form,{onSubmit:!a&&this.onSubmit},a&&i.createElement(l.Alert,{styles:[l.Alert.STYLES.success]},"An email has been sent."),i.createElement(l.Form.Group,{title:"Email address"},i.createElement(l.Form.Input,{type:"email",disabled:r,value:n,onChange:this.onEmailChange}),i.createElement(l.Form.Hint,null,"To reset your password, enter the email address you use to sign in to GitBook.")),i.createElement(l.Form.Actions,null,!a&&i.createElement(l.Button,{styles:[l.Button.STYLES.block]},r?i.createElement(l.Loading,null):"Get Reset Link")))))};return t}(i.Component))||o);t.default=b},"./website/components/SignIn/RouteSignIn.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o,a,i;var s=r("./node_modules/react/index.js");var u=P(s);var l=r("../node_modules/querystring-es3/index.js");var c=O(l);var p=r("./node_modules/react-redux/es/index.js");var f=r("./node_modules/react-router/es/index.js");var d=r("./core/index.js");var m=r("./flux/index.js");var v=r("./website/components/SignIn/RedirectAfterAuth.js");var h=O(v);var y=r("./website/components/SignIn/SignUpPage.js");var g=O(y);var b=r("./website/components/SignIn/SignInPage.js");var w=O(b);var E=r("./website/components/SignIn/SignInSSOPage.js");var S=O(E);var j=r("./website/components/SignIn/InvitePage.js");var x=O(j);var _=r("./website/components/SignIn/authContext.js");function O(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function I(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T=(n=(0,p.connect)(function(e,t){var r=e.user;var n=t.location,o=t.match.params,a=o.mode,i=o.space,s=o.org;var u=c.default.parse(n.search.slice(1));var l=(0,_.createAuthContext)({mode:a,noSSO:u.no_sso,invite:u.invite,location:u.location,space:i,org:s,email:u.email});return{user:r,context:l}}),o=m.Connectors.database(function(e){var t=e.context;return{orgDomain:t.org?d.OrgBaseDomain.queryByDomain(t.org):null}}),a=m.Connectors.database(function(e){var t=e.orgDomain,r=e.context;return{org:t?d.Organization.queryByID(t.orgID):null,orgSpace:t&&r.space?d.OrgSpace.queryByName({orgID:t.orgID,baseName:r.space}):null,invite:t&&r.invite?d.Invite.queryByID({orgID:t.orgID,inviteID:r.invite}):null}}),n(i=o(i=a(i=function(e){I(t,e);function t(){k(this,t);return M(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.context,n=t.user,o=t.org,a=t.orgSpace,i=t.invite;var s={context:r,user:n,org:o,orgSpace:a,invite:i};if("invite"==r.mode){if(!n.isLoggedIn)return u.createElement(f.Redirect,{to:(0,_.getAuthRoute)(r,{toMode:"join"})});return u.createElement(x.default,s)}if(n.isLoggedIn){if(r.invite)return u.createElement(f.Redirect,{to:(0,_.getAuthRoute)(r,{toMode:"invite",withInvite:r.invite})});return u.createElement(h.default,{org:o,spaceID:a?a.spaceID:null,pathname:r.location})}if(o&&o.ssoSignInLabel&&!r.noSSO)return u.createElement(S.default,s);if("login"==r.mode)return u.createElement(w.default,s);if("join"==r.mode)return u.createElement(g.default,s);return null};return t}(u.Component))||i)||i)||i);t.default=T},"./website/components/SignIn/SignInPage.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=g(a);var s=r("./node_modules/react-redux/es/index.js");var u=r("./node_modules/react-router-dom/es/index.js");var l=r("./styleguide/index.js");var c=r("./flux/index.js");var p=r("./website/components/SignIn/AuthPage.js");var f=y(p);var d=r("./website/components/SignIn/authContext.js");var m=r("./website/components/SignIn/errors.js");var v=r("./website/components/SignIn/OAuthModalFooter.js");var h=y(v);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function b(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(n=(0,s.connect)(),n(o=function(e){S(t,e);function t(r){var n=this;w(this,t);var o=E(this,e.call(this,r));o.onError=function(e){(0,m.handleException)(e,function(){o.setState({loading:false,error:e})})};o.onLoading=function(e){o.setState({loading:e})};o.onSubmit=function(){var e=b(regeneratorRuntime.mark(function e(t){var r,a,i,s;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t.preventDefault();r=o.props.dispatch;a=o.state,i=a.email,s=a.password;o.onLoading(true);n.prev=4;n.next=7;return r(c.Flux.user.signIn(i,s));case 7:n.next=12;break;case 9:n.prev=9;n.t0=n["catch"](4);o.onError(n.t0);case 12:case"end":return n.stop()}},e,n,[[4,9]])}));return function(t){return e.apply(this,arguments)}}();o.onEmailChange=function(e){o.setState({email:e.target.value})};o.onPasswordChange=function(e){o.setState({password:e.target.value})};o.state={loading:false,error:null,email:r.context.email||"",password:""};return o}t.prototype.render=function e(){var t=this.props,r=t.context,n=t.org;var o=this.state,a=o.loading,s=o.error,c=o.email,p=o.password;return i.createElement(f.default,{org:n,title:"Sign in to GitBook",error:s,status:(0,d.getStatus)(r),footer:i.createElement("div",null,"New to GitBook?"," ",i.createElement(l.Link,{component:u.Link,to:(0,d.getAuthRoute)(r,{toMode:"join"})},"Create an account"))},i.createElement(l.Modal.Body,null,i.createElement(l.Form,{onSubmit:this.onSubmit},i.createElement(l.Form.Group,{title:"Email address"},i.createElement(l.Form.Input,{"data-test":"email",type:"email",placeholder:"name@company.com",value:c,disabled:a,onChange:this.onEmailChange})),i.createElement(l.Form.Group,{title:"Password",hint:i.createElement(l.Link,{to:"/forgot",component:u.Link,tabIndex:-1},"Forgot Password ?")},i.createElement(l.Form.Input,{"data-test":"password",type:"password",placeholder:"password",value:p,disabled:a,onChange:this.onPasswordChange})),i.createElement(l.Form.Actions,null,i.createElement(l.Button,{"data-test":"login",kind:"primary",styles:[l.Button.STYLES.block]},a?i.createElement(l.Loading,null):"Sign in")))),i.createElement(h.default,{disabled:a,onLoading:this.onLoading,onError:this.onError}))};return t}(i.Component))||o);t.default=j},"./website/components/SignIn/SignInSSOPage.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r("./node_modules/react/index.js");var o=p(n);var a=r("./node_modules/react-router-dom/es/index.js");var i=r("./styleguide/index.js");var s=r("./website/components/SignIn/AuthPage.js");var u=c(s);var l=r("./website/components/SignIn/authContext.js");function c(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){m(t,e);function t(){f(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,r=t.context,n=t.org;return o.createElement(u.default,{org:n,title:"Sign in to GitBook"},o.createElement(i.Modal.Body,null,o.createElement(i.Form,null,o.createElement(i.Button,{component:"a",href:"/saml/"+n.uid+"/login",styles:[i.Button.STYLES.block]},"Sign in with ",n.ssoSignInLabel),o.createElement(i.Form.Hint,null,"This organization allows you to sign in with your"," ",n.ssoSignInLabel," account."))),o.createElement(i.Modal.Footer,{label:"Or"},o.createElement(i.Button,{kind:"secondary",styles:[i.Button.STYLES.block],component:a.Link,to:(0,l.getAuthRoute)(r,{toMode:"login",withoutSSO:true})},"I have a guest account")))};return t}(o.Component);t.default=v},"./website/components/SignIn/SignUpPage.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n,o;var a=r("./node_modules/react/index.js");var i=g(a);var s=r("./node_modules/react-redux/es/index.js");var u=r("./node_modules/react-router-dom/es/index.js");var l=r("./styleguide/index.js");var c=r("./flux/index.js");var p=r("./website/components/SignIn/AuthPage.js");var f=y(p);var d=r("./website/components/SignIn/authContext.js");var m=r("./website/components/SignIn/errors.js");var v=r("./website/components/SignIn/OAuthModalFooter.js");var h=y(v);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function b(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var s=i.value}catch(e){r(e);return}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(n=(0,s.connect)(),n(o=function(e){S(t,e);function t(r){var n=this;w(this,t);var o=E(this,e.call(this,r));o.onError=function(e){(0,m.handleException)(e,function(){o.setState({loading:false,error:e})})};o.onLoading=function(e){o.setState({loading:e})};o.onSubmit=function(){var e=b(regeneratorRuntime.mark(function e(t){var r,a,i,s,u;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t.preventDefault();r=o.props.dispatch;a=o.state,i=a.name,s=a.email,u=a.password;o.onLoading(true);n.prev=4;n.next=7;return r(c.Flux.user.signUp(i,s,u));case 7:n.next=12;break;case 9:n.prev=9;n.t0=n["catch"](4);o.onError(n.t0);case 12:case"end":return n.stop()}},e,n,[[4,9]])}));return function(t){return e.apply(this,arguments)}}();o.onNameChange=function(e){o.setState({name:e.target.value})};o.onEmailChange=function(e){o.setState({email:e.target.value})};o.onPasswordChange=function(e){o.setState({password:e.target.value})};o.state={loading:false,error:null,name:"",email:r.context.email||"",password:""};return o}t.prototype.render=function e(){var t=this.props,r=t.context,n=t.org;var o=this.state,a=o.loading,s=o.error,c=o.name,p=o.email,m=o.password;return i.createElement(f.default,{org:n,title:"Create an account",error:s,status:(0,d.getStatus)(r),footer:i.createElement("div",null,"Already have an account?"," ",i.createElement(l.Link,{component:u.Link,to:(0,d.getAuthRoute)(r,{toMode:"login"})},"Sign In"))},i.createElement(l.Modal.Body,null,i.createElement(l.Form,{onSubmit:this.onSubmit},i.createElement(l.Form.Group,{title:"Name"},i.createElement(l.Form.Input,{"data-test":"name",value:c,disabled:a,placeholder:"Your full name",onChange:this.onNameChange})),i.createElement(l.Form.Group,{title:"Email address"},i.createElement(l.Form.Input,{"data-test":"email",value:p,disabled:a,type:"email",placeholder:"you@yourcompany.com",onChange:this.onEmailChange})),i.createElement(l.Form.Group,{title:"Password"},i.createElement(l.Form.Input,{"data-test":"password",type:"password",value:m,disabled:a,placeholder:"Password (at least 6 characters)",onChange:this.onPasswordChange})),i.createElement(l.Form.Hint,null,"By clicking Create your account below, you agree to our"," ",i.createElement(l.Link,{href:"https://policies.gitbook.com/terms",target:"_blank"},"terms of service")," ","and"," ",i.createElement(l.Link,{href:"https://policies.gitbook.com/privacy",target:"_blank"},"privacy statement"),". Well occasionally send you account related emails."),i.createElement(l.Form.Actions,null,i.createElement(l.Button,{"data-test":"signup",kind:"primary",styles:[l.Button.STYLES.block]},a?i.createElement(l.Loading,null):"Create your account")))),i.createElement(h.default,{disabled:a,onLoading:this.onLoading,onError:this.onError}))};return t}(i.Component))||o);t.default=j},"./website/components/SignIn/authContext.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getStatus=t.createAuthRoute=t.getAuthRoute=t.createAuthContext=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var o=r("../node_modules/querystring-es3/index.js");var a=i(o);function i(e){return e&&e.__esModule?e:{default:e}}function s(e){e.org||(e.space=null);e.invite&&(e.noSSO="guest");return e}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=n({},e);t.toMode&&(r.mode=t.toMode);t.toOrg&&(r.org=t.toOrg);t.toSpace&&(r.space=t.toSpace);t.toLocation&&(r.location=t.toLocation);t.withInvite&&(r.invite=t.withInvite);t.withoutSSO&&(r.noSSO="guest");return s(r)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=u(e,t);var n=[r.mode,r.org,r.org?r.space:null].filter(Boolean).join("/");var o={};r.invite&&(o.invite=r.invite);r.email&&(o.email=r.email);!r.invite&&r.noSSO&&(o.no_sso=r.noSSO);r.location&&(o.location=r.location);var i=a.default.stringify(o);return{pathname:"/"+n,search:i?"?"+i:""}}function c(e){if("account_exists"==e.noSSO)return"This account has been created without SSO, you must login with your normal credentials";if(e.invite)return"Once signed-in, you'll be added to this organization";return null}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l({mode:"login",org:null,space:null,location:null,invite:null,noSSO:null,email:null},e)}t.createAuthContext=s;t.getAuthRoute=l;t.createAuthRoute=p;t.getStatus=c},37:function(e,t,r){e.exports=r.p+"images/5460e47d9ca5c83526a3456d580dcd3f.svg"},38:function(e,t,r){e.exports=r.p+"images/5289499e8dfb5f714bd55945f1a5f143.svg"},39:function(e,t,r){e.exports=r.p+"images/bf13f6f0fa0b9dda68b23c43a4f49390.svg"},40:function(e,t,r){e.exports=r.p+"images/c595b6499ca1b10873dd0cdeb54a85b5.svg"},41:function(e,t,r){e.exports=r.p+"images/0406cad6bf397f10d8f04e2f2790d3d7.svg"},42:function(e,t,r){e.exports=r.p+"images/cffe8a158aa1f368d5dfc5f37e0015a4.svg"},43:function(e,t,r){e.exports=r.p+"images/eeb1e7bca7fffca665b8f00d70181157.svg"},44:function(e,t,r){e.exports=r.p+"images/f02c98408b9d21023389989802b90e41.png"}});
//# website-part-08.d7029b97.js.map