webpackJsonp([22],{"./node_modules/@gitbook/slate-prism/dist/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/@gitbook/slate-prism/node_modules/prismjs/prism.js");var o=l(r);n("./node_modules/@gitbook/slate/lib/slate.es.js");var a=n("./node_modules/@gitbook/slate-prism/dist/options.js");var i=l(a);var s=n("./node_modules/@gitbook/slate-prism/dist/TOKEN_MARK.js");var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=new i.default(e);return{decorateNode:function e(n){if(!t.onlyIn(n))return;return p(t,n)},renderMark:t.renderMark,TOKEN_MARK:u.default}}function p(e,t){var n=e.getSyntax(t);var r=o.default.languages[n];if(!r)return[];var a=t.getTexts();var i=a.map(function(e){return e.text}).join("\n");var s=o.default.tokenize(i,r);var u=[];var l=0;var c=0;a.forEach(function(e){c=l+e.text.length;var t=0;function n(r,o){o=o||"";if("string"===typeof r){if(o){var a=f({text:e,textStart:l,textEnd:c,start:t,end:t+r.length,className:"prism-token token "+o});a&&u.push(a)}t+=r.length}else{o=o+" "+r.type+" "+(r.alias||"");if("string"===typeof r.content){var i=f({text:e,textStart:l,textEnd:c,start:t,end:t+r.content.length,className:"prism-token token "+o});i&&u.push(i);t+=r.content.length}else for(var s=0;s<r.content.length;s+=1)n(r.content[s],o)}}s.forEach(n);l=c+1});return u}function f(e){var t=e.text,n=e.textStart,r=e.textEnd,o=e.start,a=e.end,i=e.className;if(o>=r||a<=n)return null;o=Math.max(o,n);a=Math.min(a,r);o-=n;a-=n;return{anchorKey:t.key,anchorOffset:o,focusKey:t.key,focusOffset:a,marks:[{type:"prism-token",data:{className:i}}]}}t.default=c},"./node_modules/dom-closest/index.js":function(e,t,n){var r=n("./node_modules/dom-matches/index.js");e.exports=function(e,t,n){n=n||document;e={parentNode:e};while((e=e.parentNode)&&e!==n)if(r(e,t))return e}},"./node_modules/dom-matches/index.js":function(e,t,n){"use strict";function r(e,t){var n=window.Element.prototype;var r=n.matches||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;if(!e||1!==e.nodeType)return false;var o=e.parentNode;if(r)return r.call(e,t);var a=o.querySelectorAll(t);var i=a.length;for(var s=0;s<i;s++)if(a[s]===e)return true;return false}e.exports=r},"./node_modules/is-mailto/index.js":function(e,t){function n(e){return/^mailto:/i.test(e)}e.exports=n},"./node_modules/mousetrap/mousetrap.js":function(e,t,n){var r;(function(o,a,i){if(!o)return;var s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"};var u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};var l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"};var c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};var p;for(var f=1;f<20;++f)s[111+f]="f"+f;for(f=0;f<=9;++f)s[f+96]=f.toString();function d(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false);return}e.attachEvent("on"+t,n)}function h(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);e.shiftKey||(t=t.toLowerCase());return t}if(s[e.which])return s[e.which];if(u[e.which])return u[e.which];return String.fromCharCode(e.which).toLowerCase()}function v(e,t){return e.sort().join(",")===t.sort().join(",")}function m(e){var t=[];e.shiftKey&&t.push("shift");e.altKey&&t.push("alt");e.ctrlKey&&t.push("ctrl");e.metaKey&&t.push("meta");return t}function y(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=false}function g(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=true}function b(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function _(){if(!p){p={};for(var e in s){if(e>95&&e<112)continue;s.hasOwnProperty(e)&&(p[s[e]]=e)}}return p}function w(e,t,n){n||(n=_()[e]?"keydown":"keypress");"keypress"==n&&t.length&&(n="keydown");return n}function S(e){if("+"===e)return["+"];e=e.replace(/\+{2}/g,"+plus");return e.split("+")}function E(e,t){var n;var r;var o;var a=[];n=S(e);for(o=0;o<n.length;++o){r=n[o];c[r]&&(r=c[r]);if(t&&"keypress"!=t&&l[r]){r=l[r];a.push("shift")}b(r)&&a.push(r)}t=w(r,a,t);return{key:r,modifiers:a,action:t}}function j(e,t){if(null===e||e===a)return false;if(e===t)return true;return j(e.parentNode,t)}function O(e){var t=this;e=e||a;if(!(t instanceof O))return new O(e);t.target=e;t._callbacks={};t._directMap={};var n={};var r;var o=false;var i=false;var s=false;function u(e){e=e||{};var t=false,r;for(r in n){if(e[r]){t=true;continue}n[r]=0}t||(s=false)}function l(e,r,o,a,i,s){var u;var l;var c=[];var p=o.type;if(!t._callbacks[e])return[];"keyup"==p&&b(e)&&(r=[e]);for(u=0;u<t._callbacks[e].length;++u){l=t._callbacks[e][u];if(!a&&l.seq&&n[l.seq]!=l.level)continue;if(p!=l.action)continue;if("keypress"==p&&!o.metaKey&&!o.ctrlKey||v(r,l.modifiers)){var f=!a&&l.combo==i;var d=a&&l.seq==a&&l.level==s;(f||d)&&t._callbacks[e].splice(u,1);c.push(l)}}return c}function c(e,n,r,o){if(t.stopCallback(n,n.target||n.srcElement,r,o))return;if(false===e(n,r)){y(n);g(n)}}t._handleKey=function(e,t,n){var r=l(e,t,n);var o;var a={};var p=0;var f=false;for(o=0;o<r.length;++o)r[o].seq&&(p=Math.max(p,r[o].level));for(o=0;o<r.length;++o){if(r[o].seq){if(r[o].level!=p)continue;f=true;a[r[o].seq]=1;c(r[o].callback,n,r[o].combo,r[o].seq);continue}f||c(r[o].callback,n,r[o].combo)}var d="keypress"==n.type&&i;n.type!=s||b(e)||d||u(a);i=f&&"keydown"==n.type};function p(e){"number"!==typeof e.which&&(e.which=e.keyCode);var n=h(e);if(!n)return;if("keyup"==e.type&&o===n){o=false;return}t.handleKey(n,m(e),e)}function f(){clearTimeout(r);r=setTimeout(u,1e3)}function _(e,t,r,a){n[e]=0;function i(t){return function(){s=t;++n[e];f()}}function l(t){c(r,t,e);"keyup"!==a&&(o=h(t));setTimeout(u,10)}for(var p=0;p<t.length;++p){var d=p+1===t.length;var v=d?l:i(a||E(t[p+1]).action);w(t[p],v,a,e,p)}}function w(e,n,r,o,a){t._directMap[e+":"+r]=n;e=e.replace(/\s+/g," ");var i=e.split(" ");var s;if(i.length>1){_(e,i,n,r);return}s=E(e,r);t._callbacks[s.key]=t._callbacks[s.key]||[];l(s.key,s.modifiers,{type:s.action},o,e,a);t._callbacks[s.key][o?"unshift":"push"]({callback:n,modifiers:s.modifiers,action:s.action,seq:o,level:a,combo:e})}t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)w(e[r],t,n)};d(e,"keypress",p);d(e,"keydown",p);d(e,"keyup",p)}O.prototype.bind=function(e,t,n){var r=this;e=e instanceof Array?e:[e];r._bindMultiple.call(r,e,t,n);return r};O.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)};O.prototype.trigger=function(e,t){var n=this;n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e);return n};O.prototype.reset=function(){var e=this;e._callbacks={};e._directMap={};return e};O.prototype.stopCallback=function(e,t){var n=this;if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return false;if(j(t,n.target))return false;return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable};O.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)};O.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);p=null};O.init=function(){var e=O(a);for(var t in e)"_"!==t.charAt(0)&&(O[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))};O.init();o.Mousetrap=O;"undefined"!==typeof e&&e.exports&&(e.exports=O);true;!(r=function(){return O}.call(t,n,t,e),r!==i&&(e.exports=r))})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)},"./node_modules/prismjs-components-loader/lib/index.js":function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n("./node_modules/prismjs-components-loader/lib/componentDefinitions.js");var i=function(){function e(t){o(this,e);this.componentsIndex=t}r(e,[{key:"load",value:function e(t,n){var r=this;if(t.languages[n])return;var o=a.COMPONENTS[n];if(!o)throw new Error("Unknown Prism component: "+n);var i=a.getDependencies(o,t);i.forEach(function(e){return r.load(t,e)});var s=this.componentsIndex[n];if(!s)throw new Error("Missing Prism component: "+n);s(t)}}]);return e}();i.COMPONENTS=a.COMPONENTS;i.getDependencies=a.getDependencies;i.isCommon=a.isCommon;e.exports=i},"./node_modules/prismjs/prism.js":function(e,t,n){(function(t){var n="undefined"!==typeof window?window:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{};var r=function(){var e=/\blang(?:uage)?-(\w+)\b/i;var t=0;var r=n.Prism={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function(e){return e instanceof o?new o(e.type,r.util.encode(e.content),e.alias):"Array"===r.util.type(e)?e.map(r.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){e["__id"]||Object.defineProperty(e,"__id",{value:++t});return e["__id"]},clone:function(e,t){var n=r.util.type(e);t=t||{};switch(n){case"Object":if(t[r.util.objId(e)])return t[r.util.objId(e)];var o={};t[r.util.objId(e)]=o;for(var a in e)e.hasOwnProperty(a)&&(o[a]=r.util.clone(e[a],t));return o;case"Array":if(t[r.util.objId(e)])return t[r.util.objId(e)];var o=[];t[r.util.objId(e)]=o;e.forEach(function(e,n){o[n]=r.util.clone(e,t)});return o}return e}},languages:{extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){o=o||r.languages;var a=o[e];if(2==arguments.length){n=arguments[1];for(var i in n)n.hasOwnProperty(i)&&(a[i]=n[i]);return a}var s={};for(var u in a)if(a.hasOwnProperty(u)){if(u==t)for(var i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);s[u]=a[u]}r.languages.DFS(r.languages,function(t,n){n===o[e]&&t!=e&&(this[t]=s)});return o[e]=s},DFS:function(e,t,n,o){o=o||{};for(var a in e)if(e.hasOwnProperty(a)){t.call(e,a,e[a],n||a);if("Object"!==r.util.type(e[a])||o[r.util.objId(e[a])]){if("Array"===r.util.type(e[a])&&!o[r.util.objId(e[a])]){o[r.util.objId(e[a])]=true;r.languages.DFS(e[a],t,a,o)}}else{o[r.util.objId(e[a])]=true;r.languages.DFS(e[a],t,null,o)}}}},plugins:{},highlightAll:function(e,t){r.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var o={callback:n,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",o);var a=o.elements||e.querySelectorAll(o.selector);for(var i=0,s;s=a[i++];)r.highlightElement(s,true===t,o.callback)},highlightElement:function(t,o,a){var i,s,u=t;while(u&&!e.test(u.className))u=u.parentNode;if(u){i=(u.className.match(e)||[,""])[1].toLowerCase();s=r.languages[i]}t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+i;if(t.parentNode){u=t.parentNode;/pre/i.test(u.nodeName)&&(u.className=u.className.replace(e,"").replace(/\s+/g," ")+" language-"+i)}var l=t.textContent;var c={element:t,language:i,grammar:s,code:l};r.hooks.run("before-sanity-check",c);if(!c.code||!c.grammar){if(c.code){r.hooks.run("before-highlight",c);c.element.textContent=c.code;r.hooks.run("after-highlight",c)}r.hooks.run("complete",c);return}r.hooks.run("before-highlight",c);if(o&&n.Worker){var p=new Worker(r.filename);p.onmessage=function(e){c.highlightedCode=e.data;r.hooks.run("before-insert",c);c.element.innerHTML=c.highlightedCode;a&&a.call(c.element);r.hooks.run("after-highlight",c);r.hooks.run("complete",c)};p.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:true}))}else{c.highlightedCode=r.highlight(c.code,c.grammar,c.language);r.hooks.run("before-insert",c);c.element.innerHTML=c.highlightedCode;a&&a.call(t);r.hooks.run("after-highlight",c);r.hooks.run("complete",c)}},highlight:function(e,t,n){var a={text:e,grammar:t,language:n};a.tokens=r.tokenize(e,t);r.hooks.run("after-tokenize",a);return o.stringify(r.util.encode(a.tokens),n)},matchGrammar:function(e,t,n,o,a,i,s){var u=r.Token;for(var l in n){if(!n.hasOwnProperty(l)||!n[l])continue;if(l==s)return;var c=n[l];c="Array"===r.util.type(c)?c:[c];for(var p=0;p<c.length;++p){var f=c[p],d=f.inside,h=!!f.lookbehind,v=!!f.greedy,m=0,y=f.alias;if(v&&!f.pattern.global){var g=f.pattern.toString().match(/[imuy]*$/)[0];f.pattern=RegExp(f.pattern.source,g+"g")}f=f.pattern||f;for(var b=o,_=a;b<t.length;_+=t[b].length,++b){var w=t[b];if(t.length>e.length)return;if(w instanceof u)continue;f.lastIndex=0;var S=f.exec(w),E=1;if(!S&&v&&b!=t.length-1){f.lastIndex=_;S=f.exec(e);if(!S)break;var j=S.index+(h?S[1].length:0),O=S.index+S[0].length,C=b,M=_;for(var k=t.length;C<k&&(M<O||!t[C].type&&!t[C-1].greedy);++C){M+=t[C].length;if(j>=M){++b;_=M}}if(t[b]instanceof u||t[C-1].greedy)continue;E=C-b;w=e.slice(_,M);S.index-=_}if(!S){if(i)break;continue}h&&(m=S[1]?S[1].length:0);var j=S.index+m,S=S[0].slice(m),O=j+S.length,P=w.slice(0,j),x=w.slice(O);var T=[b,E];if(P){++b;_+=P.length;T.push(P)}var I=new u(l,d?r.tokenize(S,d):S,y,S,v);T.push(I);x&&T.push(x);Array.prototype.splice.apply(t,T);1!=E&&r.matchGrammar(e,t,n,b,_,true,l);if(i)break}}}},tokenize:function(e,t,n){var o=[e];var a=t.rest;if(a){for(var i in a)t[i]=a[i];delete t.rest}r.matchGrammar(e,o,t,0,0,false);return o},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[];n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(!n||!n.length)return;for(var o=0,a;a=n[o++];)a(t)}}};var o=r.Token=function(e,t,n,r,o){this.type=e;this.content=t;this.alias=n;this.length=0|(r||"").length;this.greedy=!!o};o.stringify=function(e,t,n){if("string"==typeof e)return e;if("Array"===r.util.type(e))return e.map(function(n){return o.stringify(n,t,e)}).join("");var a={type:e.type,content:o.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if(e.alias){var i="Array"===r.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(a.classes,i)}r.hooks.run("wrap",a);var s=Object.keys(a.attributes).map(function(e){return e+'="'+(a.attributes[e]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+a.tag+' class="'+a.classes.join(" ")+'"'+(s?" "+s:"")+">"+a.content+"</"+a.tag+">"};if(!n.document){if(!n.addEventListener)return n.Prism;r.disableWorkerMessageHandler||n.addEventListener("message",function(e){var t=JSON.parse(e.data),o=t.language,a=t.code,i=t.immediateClose;n.postMessage(r.highlight(a,r.languages[o],o));i&&n.close()},false);return n.Prism}var a=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();if(a){r.filename=a.src;r.manual||a.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(r.highlightAll):window.setTimeout(r.highlightAll,16):document.addEventListener("DOMContentLoaded",r.highlightAll))}return n.Prism}();"undefined"!==typeof e&&e.exports&&(e.exports=r);"undefined"!==typeof t&&(t.Prism=r);r.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,greedy:true,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/(^|[^\\])["']/,lookbehind:true}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i};r.languages.markup["tag"].inside["attr-value"].inside["entity"]=r.languages.markup["entity"];r.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes["title"]=e.content.replace(/&amp;/,"&"))});r.languages.xml=r.languages.markup;r.languages.html=r.languages.markup;r.languages.mathml=r.languages.markup;r.languages.svg=r.languages.markup;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^{}\s][^{};]*?(?=\s*\{)/,string:{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:true},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/};r.languages.css["atrule"].inside.rest=r.languages.css;if(r.languages.markup){r.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\s\S]*?>)[\s\S]*?(?=<\/style>)/i,lookbehind:true,inside:r.languages.css,alias:"language-css",greedy:true}});r.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:r.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:r.languages.css}},alias:"language-css"}},r.languages.markup.tag)}r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:true},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:true}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:true},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:true,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};r.languages.javascript=r.languages.extend("clike",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|NaN|Infinity)\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee][+-]?\d+)?/,function:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\()/i,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});r.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[[^\]\r\n]+]|\\.|[^/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:true,greedy:true},"function-variable":{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=\s*(?:function\b|(?:\([^()]*\)|[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/i,alias:"function"}});r.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,greedy:true,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}}});r.languages.markup&&r.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:true,inside:r.languages.javascript,alias:"language-javascript",greedy:true}});r.languages.js=r.languages.javascript;(function(){if("undefined"===typeof self||!self.Prism||!self.document||!document.querySelector)return;self.Prism.fileHighlight=function(){var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach(function(t){var n=t.getAttribute("data-src");var o,a=t;var i=/\blang(?:uage)?-(?!\*)(\w+)\b/i;while(a&&!i.test(a.className))a=a.parentNode;a&&(o=(t.className.match(i)||[,""])[1]);if(!o){var s=(n.match(/\.(\w+)$/)||[,""])[1];o=e[s]||s}var u=document.createElement("code");u.className="language-"+o;t.textContent="";u.textContent="Loading…";t.appendChild(u);var l=new XMLHttpRequest;l.open("GET",n,true);l.onreadystatechange=function(){if(4==l.readyState)if(l.status<400&&l.responseText){u.textContent=l.responseText;r.highlightElement(u)}else l.status>=400?u.textContent="✖ Error "+l.status+" while fetching file: "+l.statusText:u.textContent="✖ Error: File does not exist or is empty"};l.send(null)})};document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight)})()}).call(t,n("../node_modules/webpack/buildin/global.js"))},"./node_modules/rangefix/rangefix.js":function(e,t,n){var r,o;
/*!
 * RangeFix v0.2.5
 * https://github.com/edg2s/rangefix
 *
 * Copyright 2014-17 Ed Sanders.
 * Released under the MIT license
 */
/*!
 * RangeFix v0.2.5
 * https://github.com/edg2s/rangefix
 *
 * Copyright 2014-17 Ed Sanders.
 * Released under the MIT license
 */
(function(a,i){true;!(r=i,o="function"===typeof r?r.call(t,n,t,e):r,void 0!==o&&(e.exports=o))})(this,function(){var e,t={};function n(){var t,n,r,o,a,i,s,u;if(void 0===e){n=document.createElement("p");r=document.createElement("span");o=document.createTextNode("aa");a=document.createTextNode("aa");i=document.createElement("img");i.setAttribute("src","#null");s=document.createRange();e={};n.appendChild(o);n.appendChild(r);r.appendChild(i);r.appendChild(a);document.body.appendChild(n);s.setStart(o,1);s.setEnd(r,0);e.getClientRects=e.getBoundingClientRect=s.getClientRects().length>1;if(!e.getClientRects){s.setEnd(a,1);e.getClientRects=e.getBoundingClientRect=s.getClientRects().length<3}if(!e.getBoundingClientRect){s.setEnd(s.startContainer,s.startOffset);t=s.getBoundingClientRect();e.getBoundingClientRect=0===t.top&&0===t.left}document.body.removeChild(n);u=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();e.ieZoom=u&&u<=10}return e}function r(e){var t;if(!e)return e;if(screen.deviceXDPI===screen.logicalXDPI)return e;if("length"in e)return Array.prototype.map.call(e,r);t=screen.deviceXDPI/screen.logicalXDPI;return{top:e.top/t,bottom:e.bottom/t,left:e.left/t,right:e.right/t,width:e.width/t,height:e.height/t}}function o(e,t){var n,r=0,o=1024;if(o>=t.length)return Array.prototype.push.apply(e,t);while(r<t.length){n=Array.prototype.push.apply(e,Array.prototype.slice.call(t,r,r+o));r+=o}return n}t.getClientRects=function(e){var t,a,i,s,u=n();if(u.ieZoom)return r(e.getClientRects());if(!u.getClientRects)return e.getClientRects();t=[];a=e.endContainer;i=e.endOffset;s=document.createRange();while(a!==e.commonAncestorContainer){s.setStart(a,0);s.setEnd(a,i);o(t,s.getClientRects());i=Array.prototype.indexOf.call(a.parentNode.childNodes,a);a=a.parentNode}s=e.cloneRange();s.setEnd(a,i);o(t,s.getClientRects());return t};t.getBoundingClientRect=function(e){var t,o,a,i,s,u,l=this.getClientRects(e);if(0===l.length)return null;s=e.getBoundingClientRect();u=n();if(u.ieZoom)return r(s);if(!u.getBoundingClientRect)return s;if(0===s.width&&0===s.height)return l[0];for(t=0,o=l.length;t<o;t++){i=l[t];if(a){a.left=Math.min(a.left,i.left);a.top=Math.min(a.top,i.top);a.right=Math.max(a.right,i.right);a.bottom=Math.max(a.bottom,i.bottom)}else a={left:i.left,top:i.top,right:i.right,bottom:i.bottom}}if(a){a.width=a.right-a.left;a.height=a.bottom-a.top}return a};return t})},"./node_modules/react-combo-keys/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ComboKeys=t.ComboKey=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o=n("./node_modules/react/index.js");var a=c(o);var i=n("./node_modules/prop-types/index.js");var s=c(i);var u=n("./node_modules/mousetrap/mousetrap.js");var l=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true}):e[t]=n;return e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){var n=Object.keys(e);var r=n.length;var o=Object.keys(t).length;if(r!=o)return false;for(var a=0;a<r;a+=1){var i=n[a];var s=e[i];var u=t[i];if(s!=u)return false}return true}var m=function(e){h(t,e);function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("function"!==typeof l.default)return d(n);n.mousetrap=(0,l.default)();var r=e.stopAt;if(r){var o=n.mousetrap.stopCallback;n.mousetrap.stopCallback=function(e,t,n){return o(e,t,n)&&r(e,t,n)}}return n}r(t,[{key:"componentDidMount",value:function e(){this.bindKeyMap(this.props.keyMap)}},{key:"componentDidUpdate",value:function e(t){if(v(t.keyMap,this.props.keyMap))return;this.unbindKeyMap(t.keyMap);this.bindKeyMap(this.props.keyMap)}},{key:"componentWillUnmount",value:function e(){this.unbindKeyMap(this.props.keyMap)}},{key:"unbindKeyMap",value:function e(t){var n=this;Object.keys(t).forEach(function(e){n.mousetrap.unbind(e)})}},{key:"bindKeyMap",value:function e(t){var n=this;Object.keys(t).forEach(function(e){var r=t[e];n.mousetrap.bind(e,r)})}},{key:"render",value:function e(){var t=this.props.children;return t?a.default.Children.only(t):null}}]);return t}(a.default.Component);m.propTypes={children:s.default.node,keyMap:s.default.objectOf(s.default.func).isRequired,stopAt:s.default.func};m.defaultProps={children:null,stopAt:null};var y=function(e){h(t,e);function t(){f(this,t);return d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}r(t,[{key:"render",value:function e(){var t=this.props,n=t.children,r=t.combo,o=t.onTrigger,i=t.stopAt;var s=p({},r,o);return a.default.createElement(m,{keyMap:s,stopAt:i},n)}}]);return t}(a.default.PureComponent);y.propTypes={children:s.default.node,combo:s.default.string.isRequired,onTrigger:s.default.func.isRequired,stopAt:s.default.func};y.defaultProps={children:null,stopAt:null};t.ComboKey=y;t.ComboKeys=m},"./node_modules/uncontrollable/lib/index.js":function(e,t,n){"use strict";t.__esModule=true;t.default=f;var r=u(n("./node_modules/react/index.js"));var o=u(n("./node_modules/uncontrollable/node_modules/invariant/browser.js"));var a=s(n("./node_modules/uncontrollable/lib/utils.js"));var i="src/index.js";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e;return t}function u(e){return e&&e.__esModule?e:{default:e}}function l(){l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return l.apply(this,arguments)}function c(e,t){if(null==e)return{};var n={};var r=Object.keys(e);var o,a;for(a=0;a<r.length;a++){o=r[a];if(t.indexOf(o)>=0)continue;n[o]=e[o]}if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++){o=i[a];if(t.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;n[o]=e[o]}}return n}function p(e,t){e.prototype.__proto__=t&&t.prototype;e.__proto__=t}function f(e,t,n){void 0===n&&(n=[]);var o=e.displayName||e.name||"Component";var s=a.canAcceptRef(e);var u=Object.keys(t);var d=u.map(a.defaultKey);s||!n.length?void 0:invariant(false);var h=function(o){p(i,o);function i(){var e;for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];e=o.call.apply(o,[this].concat(a))||this;e.handlers=Object.create(null);u.forEach(function(n){var r=t[n];var o=function t(o){if(e.props[r]){var a;e._notifying=true;for(var i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];(a=e.props)[r].apply(a,[o].concat(s));e._notifying=false}e._values[n]=o;e.unmounted||e.forceUpdate()};e.handlers[r]=o});n.length&&(e.attachRef=function(t){e.inner=t});return e}var s=i.prototype;s.shouldComponentUpdate=function e(){return!this._notifying};s.componentWillMount=function e(){var t=this;var n=this.props;this._values=Object.create(null);u.forEach(function(e){t._values[e]=n[a.defaultKey(e)]})};s.componentWillReceiveProps=function e(t){var n=this;var r=this.props;u.forEach(function(e){!a.isProp(t,e)&&a.isProp(r,e)&&(n._values[e]=t[a.defaultKey(e)])})};s.componentWillUnmount=function e(){this.unmounted=true};s.render=function t(){var n=this;var o=this.props,a=o.innerRef,i=c(o,["innerRef"]);d.forEach(function(e){delete i[e]});var s={};u.forEach(function(e){var t=n.props[e];s[e]=void 0!==t?t:n._values[e]});return r.default.createElement(e,l({},i,s,this.handlers,{ref:a||this.attachRef}))};return i}(r.default.Component);h.displayName="Uncontrolled("+o+")";h.propTypes=l({innerRef:function e(){}},a.uncontrolledPropTypes(t,o));n.forEach(function(e){h.prototype[e]=function t(){var n;return(n=this.inner)[e].apply(n,arguments)}});var v=h;if(r.default.forwardRef){v=r.default.forwardRef(function(e,t){return r.default.createElement(h,l({},e,{innerRef:t,__source:{fileName:i,lineNumber:127},__self:this}))});v.propTypes=h.propTypes}v.ControlledComponent=e;v.deferControlTo=function(e,n,r){void 0===n&&(n={});return f(e,l({},t,n),r)};return v}e.exports=t["default"]},"./node_modules/uncontrollable/lib/utils.js":function(e,t,n){"use strict";t.__esModule=true;t.uncontrolledPropTypes=s;t.isProp=u;t.defaultKey=l;t.canAcceptRef=c;var r=o(n("./node_modules/uncontrollable/node_modules/invariant/browser.js"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function e(){};function i(e,t){return function(n,r){if(void 0!==n[r]&&!n[e])return new Error("You have provided a `"+r+"` prop to `"+t+"` without an `"+e+"` handler prop. This will render a read-only field. If the field should be mutable use `"+l(r)+"`. Otherwise, set `"+e+"`.")}}function s(e,t){var n={};Object.keys(e).forEach(function(e){n[l(e)]=a;var t;false});return n}function u(e,t){return void 0!==e[t]}function l(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function c(e){return!!e&&("function"!==typeof e||e.prototype&&e.prototype.isReactComponent)}},"./node_modules/uncontrollable/node_modules/invariant/browser.js":function(e,t,n){"use strict";var r=function(e,t,n,r,o,a,i,s){false;if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,i,s];var c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]}));u.name="Invariant Violation"}u.framesToPop=1;throw u}};e.exports=r},"./space/components/Document/HoveringMenu/HoveringMenu.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,s,u,l;var c=n("./node_modules/react/index.js");var p=h(c);var f=n("./node_modules/aphrodite/no-important.js");var d=n("./styleguide/index.js");function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=8;var _=(a=o=function(e){g(t,e);function t(){var n,o,a;m(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return a=(n=(o=y(this,e.call.apply(e,[this].concat(s))),o),o.render=function(){var e=t.STYLES;var n=o.props,a=n.active,i=n.children,s=n.label,u=v(n,["active","children","label"]);var l=s&&[d.tooltip.tooltipped,d.tooltip.delayed];return p.createElement(d.View,r({styles:[e.menuButton,a&&e.menuButtonActive,l],"aria-label":s},u),i)},n),y(o,a)}return t}(p.Component),o.defaultProps={label:""},o.STYLES=f.StyleSheet.create({menuButton:{padding:d.spacing.S100,paddingLeft:d.spacing.S100/2,paddingRight:d.spacing.S100/2,cursor:"pointer",transition:"opacity, background-color ease 0.3s",":first-child":{borderTopLeftRadius:d.boxes.RADIUS_LARGE,borderBottomLeftRadius:d.boxes.RADIUS_LARGE},":last-child":{borderTopRightRadius:d.boxes.RADIUS_LARGE,borderBottomRightRadius:d.boxes.RADIUS_LARGE},":hover":{color:d.colors.WHITE}},menuButtonActive:{color:d.colors.WHITE}}),a);var w=(s=i=function(e){g(t,e);function t(){var n,r,o;m(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=y(this,e.call.apply(e,[this].concat(i))),r),r.render=function(){var e=t.STYLES;return p.createElement(d.View,{styles:[e.menuSeparator]})},n),y(r,o)}return t}(p.Component),i.STYLES=f.StyleSheet.create({menuSeparator:{marginTop:d.spacing.S100,marginBottom:d.spacing.S100,marginLeft:d.spacing.S200-d.spacing.S100/2,marginRight:d.spacing.S200-d.spacing.S100/2,borderLeft:"1px solid "+d.colors.GREY_BASE}}),s);var S=(l=u=function(e){g(t,e);function t(){m(this,t);return y(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var o=this.props,a=o.children,i=o.styles,s=v(o,["children","styles"]);return p.createElement(d.View,r({},s,{styles:[n.menu,i]}),a)};return t}(p.Component),u.defaultProps={styles:null},u.Button=_,u.Separator=w,u.STYLES=f.StyleSheet.create({menu:{position:"relative",background:d.colors.BLACK,color:d.colors.GREY_BASE,borderRadius:d.boxes.RADIUS_LARGE,whiteSpace:"nowrap",marginBottom:b,opacity:1,transition:"opacity ease 300ms",display:"flex",paddingLeft:d.spacing.S200-d.spacing.S100/2,paddingRight:d.spacing.S200-d.spacing.S100/2,":after":{content:'" "',position:"absolute",top:"100%",bottom:"auto",left:"50%",transform:"translateX(-50%)",borderWidth:b+"px "+b+"px 0 "+b+"px",borderColor:d.colors.BLACK+" transparent",borderStyle:"solid",marginTop:-1}},hoverSelection:{position:"absolute",left:"50%",margin:0,bottom:"100%",transform:"translate(-50%, 0%)",marginBottom:b,pointerEvents:"auto"},hidden:{pointerEvents:"none",opacity:0}}),l);t.default=S},"./space/components/Document/HoveringMenu/InlineHoverMenu.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=S(a);var s=n("./node_modules/rangefix/rangefix.js");var u=w(s);var l=n("./node_modules/immutable/dist/immutable.js");var c=n("./node_modules/aphrodite/no-important.js");n("./node_modules/@gitbook/slate/lib/slate.es.js");var p=n("./core/index.js");var f=n("./styleguide/index.js");var d=n("./space/components/Document/HoveringMenu/SelectionFormattingMenu/index.js");var h=w(d);var v=n("./space/components/Document/HoveringMenu/InsertInlineMenu/index.js");var m=w(v);var y=n("./space/components/Document/HoveringMenu/InlineLinkMenu/index.js");var g=w(y);var b=n("./space/components/Document/HoveringMenu/InlineShortcuts.js");var _=w(b);function w(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=15;function M(e,t){return!(0,l.is)(e.merge({isFocused:false,isBackward:false}),t.merge({isFocused:false,isBackward:false}))}var k=(o=r=function(e){O(t,e);function t(){var n,r,o;E(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=j(this,e.call.apply(e,[this].concat(i))),r),r.state={visible:false,insertLink:false,selectionRect:{top:0,left:0,width:0,height:0}},r.onInsertLink=function(){r.setState({insertLink:true})},n),j(r,o)}t.shouldOpen=function e(t){var n=[p.DOC_BLOCKS.CODE_LINE,p.DOC_BLOCKS.API_METHOD_SUMMARY];return!n.some(function(e){return p.Edition.hasBlock(t,e)})};t.prototype.componentDidMount=function e(){this.updatePosition()};t.prototype.componentDidUpdate=function e(t){if(t.editorState==this.props.editorState)return;this.updatePosition(M(t.editorState.selection,this.props.editorState.selection))};t.prototype.componentWillUnmount=function e(){this.showTimeout&&clearTimeout(this.showTimeout)};t.prototype.updatePosition=function e(){var t=this;var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var r=this.props.editorState;n&&this.setState({insertLink:false,visible:false});this.showTimeout&&clearTimeout(this.showTimeout);if(r.isBlurred)return;this.showTimeout=setTimeout(function(){var e=window.getSelection();var n=e.getRangeAt(0);var r=u.default.getBoundingClientRect(n);if(!r)return;var o={top:r.top+window.scrollY,left:r.left+window.scrollX,width:r.width,height:r.height};if(o.width<C){o.left-=(C-o.width)/2;o.width=C}t.setState({visible:true,insertLink:false,selectionRect:o})},200)};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.page,a=r.version,s=r.editorState,u=r.onChange;var l=s.isCollapsed,c=s.startKey;var d=this.state,v=d.visible,y=d.insertLink,b=d.selectionRect;var w=l&&c&&s.document.getAncestors(c).every(function(e){return"inline"!==e.object&&!e.isVoid});var S=s.inlines.find(function(e){return e.type==p.DOC_INLINES.LINK});var E=S&&l||y;return i.createElement(f.Portal.Manual,{isOpen:true},i.createElement(_.default,{editorState:s,onChange:u,onInsertLink:this.onInsertLink}),i.createElement(f.View,{styles:[n.selection],style:{display:v?"block":"none",left:b.left,top:b.top,height:b.height,width:b.width}},l&&!E&&w&&i.createElement(m.default,{page:o,version:a,editorState:s,onChange:u,selectionRect:b,onInsertLink:this.onInsertLink}),!l&&!E&&i.createElement(h.default,{editorState:s,onChange:u,onInsertLink:this.onInsertLink}),E&&i.createElement(g.default,{version:a,link:S,editorState:s,onChange:u})))};return t}(i.Component),r.STYLES=c.StyleSheet.create({selection:{position:"absolute",transition:"ease 0.3s opacity",zIndex:f.zIndexes.INLINE_CONTROLS,pointerEvents:"none"}}),o);t.default=k},"./space/components/Document/HoveringMenu/InlineLinkMenu/AnchorPicker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=d(a);n("./node_modules/@gitbook/slate/lib/slate.es.js");var s=n("./styleguide/index.js");var u=n("./core/index.js");var l=n("./icons/index.js");var c=n("./space/components/Document/connectDocument.js");var p=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=(r=(0,p.default)(function(e){var t=e.page,n=e.version;return{page:t,version:n}},function(e){var t=e.editorState;return{editorState:t}}),r(o=function(e){m(t,e);function t(){h(this,t);return v(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.page,r=t.editorState,o=t.styles,a=t.onPick;if(!r)return null;var c=u.Edition.Section.getSections(r.document).filter(function(e){var t=e.title;return Boolean(t)}).toArray();return i.createElement(s.Skeleton.Wait,null,i.createElement(s.Menu,{styles:o},c.map(function(e){return i.createElement(s.Menu.Item,{key:e.id,onMouseDown:function t(){a(n,e.id)},icon:1==e.level?i.createElement(l.IconHeading1,null):i.createElement(l.IconHeading2,null)},e.title)})))};return t}(i.Component))||o);t.default=y},"./space/components/Document/HoveringMenu/InlineLinkMenu/InlineLinkMenu.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=_(a);var s=n("./node_modules/is-url-superb/index.js");var u=b(s);var l=n("./node_modules/aphrodite/no-important.js");var c=n("./node_modules/is-mailto/index.js");var p=b(c);var f=n("./styleguide/index.js");var d=n("./core/index.js");var h=n("./icons/index.js");var v=n("./space/constants/FUSE_OPTIONS.js");var m=b(v);var y=n("./space/components/Document/HoveringMenu/InlineLinkMenu/LinkCompletions.js");var g=b(y);function b(e){return e&&e.__esModule?e:{default:e}}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(o=r=function(e){E(t,e);function t(){var n,r,o;w(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=(n=(r=S(this,e.call.apply(e,[this].concat(s))),r),r.state={value:"",focused:false,cursor:0},r.input=i.createRef(),r.select=function(){var e=r.input.current;e&&e.select()},r.onChange=function(e){r.setState({value:e.currentTarget.value})},r.onCursorChange=function(e){r.setState({cursor:e})},r.onClickClear=function(){var e=r.props,t=e.link,n=e.editorState,o=e.onChange;if(t){o(n.change().unwrapInlineByKey(t.key));return}r.setState({value:""},function(){r.select()})},r.onFocus=function(){r.setState({focused:true})},r.onBlur=function(){r.setState({focused:false})},r.onSubmit=function(e,t){var n=r.props,o=n.link,a=n.editorState,i=n.onChange;var s=r.state.value;var l=e?{pageID:e.uid,anchor:t}:{href:s};if(!e&&!(0,p.default)(s)&&!(0,u.default)(s))return;if(o)i(d.Edition.Link.updateLink(a.change(),o.key,l).focus());else{var c=(0,p.default)(s)?s.split("mailto:")[1]:s;var f=e?e.title:c;i(d.Edition.Link.insertLink(a.change(),l,f).focus())}},n),S(r,o)}t.prototype.componentDidMount=function e(){var t=this.props.link;t||this.select()};t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.link,s=o.version;var u=this.state,l=u.focused,c=u.value,p=u.cursor;var d=s.page.toFlatArray().filter(function(e){return e.isDocument});var v=a&&a.data.has("pageID");var y=l||!a?c:O(s.page,a.data.toJS());return i.createElement(f.Popover,null,i.createElement(f.FuzzyFilter,{items:d,fuseConfig:m.default.TREEPAGE,defaultAllItems:false,query:c},function(e){return i.createElement(f.View,{styles:[r.linkMenu,l&&c&&r.linkMenuOpen]},i.createElement(f.View,{styles:[f.View.PADDING.S100]},i.createElement(f.Form.Input,{size:"small",inputRef:n.input,value:y,placeholder:"Enter page's title or URL",onChange:n.onChange,onFocus:n.onFocus,onBlur:n.onBlur,onKeyDown:f.Completions.onKeyDown({completions:e,cursor:p,onPick:n.onSubmit,onPickEmpty:n.onSubmit,onCursor:n.onCursorChange})},i.createElement(f.Form.InputAddOn,{prefix:true},l&&i.createElement(h.IconSearch,null),!l&&v&&i.createElement(h.IconPageLink,null),!l&&!v&&i.createElement(h.IconLink,null)),a&&!l&&i.createElement(f.Form.InputAddOn,{onClick:n.onClickClear,styles:[r.linkClearButton]},i.createElement(h.IconXCircle,null)))),l&&i.createElement(g.default,{value:c,cursor:p,version:s,pages:e,onCursorChange:n.onCursorChange,onPick:n.onSubmit}))}))};return t}(i.Component),r.STYLES=l.StyleSheet.create({linkMenu:{width:280,transition:"width 300ms"},linkMenuOpen:{width:441},linkClearButton:{marginRight:f.spacing.S100,cursor:"pointer",":hover":{color:f.colors.GREY_DARK}}}),o);function O(e,t){return"string"===typeof t.href?M(t):C(e,t)}function C(e,t){var n=e.getByID(t.pageID);if(!n)return"";var r=e.getURLOf(n);return"/"+(r||"")+(t.anchor?"#"+t.anchor:"")}function M(e){return e.href}t.default=j},"./space/components/Document/HoveringMenu/InlineLinkMenu/LinkCompletions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=g(a);var s=n("./node_modules/is-url-superb/index.js");var u=y(s);var l=n("./node_modules/aphrodite/no-important.js");var c=n("./node_modules/is-mailto/index.js");var p=y(c);var f=n("./styleguide/index.js");var d=n("./space/components/Document/HoveringMenu/InlineLinkMenu/AnchorPicker.js");var h=y(d);var v=n("./space/components/Document/HoveringMenu/InlineLinkMenu/PagePicker.js");var m=y(v);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(o=r=function(e){w(t,e);function t(){b(this,t);return _(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.value,a=r.cursor,s=r.pages,l=r.version,c=r.onCursorChange,d=r.onPick;if(0==s.length){if(!o||(0,u.default)(o)||(0,p.default)(o))return null;return i.createElement(f.View,{styles:[f.View.PADDING.S200Horizontal,f.View.PADDING.S100Vertical]},i.createElement(f.Text.TextH200,{styles:[f.Text.COLOR.greyBase]},"No pages are matching, and it doesn't look like an URL."))}var v=s[a];return i.createElement(f.View,{styles:[n.linkCompletions]},i.createElement(m.default,{styles:[n.scrollArea],cursor:a,pages:s,onCursorChange:c,onPick:d}),i.createElement(f.View,{styles:[n.verticalDivider]}),i.createElement(h.default,{version:l,page:v,onPick:d,styles:[n.scrollArea]}))};return t}(i.Component),r.STYLES=l.StyleSheet.create({linkCompletions:{display:"grid",gridTemplateColumns:"220px 1px 220px",gridTemplateRows:"200px 200px",maxHeight:200,overflow:"hidden"},verticalDivider:{flex:"0 0 auto",marginTop:f.spacing.S200,marginBottom:f.spacing.S200,alignSelf:"stretch",background:f.colors.GREY_LIGHT,width:1},scrollArea:{paddingRight:f.spacing.S100}}),o);t.default=S},"./space/components/Document/HoveringMenu/InlineLinkMenu/PagePicker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=i(r);var a=n("./styleguide/index.js");function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){l(t,e);function t(){s(this,t);return u(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.cursor,r=t.pages,i=t.styles,s=t.onPick,u=t.onCursorChange;return o.createElement(a.Menu,{styles:i},r.map(function(e,t){return o.createElement(a.Menu.Item,{key:e.uid,active:n==t,onMouseEnter:function e(){return u(t)},onMouseDown:function t(){s(e)}},e.title)}))};return t}(o.Component);t.default=c},"./space/components/Document/HoveringMenu/InlineLinkMenu/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./space/components/Document/HoveringMenu/InlineLinkMenu/InlineLinkMenu.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./space/components/Document/HoveringMenu/InlineShortcuts.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=c(r);n("./node_modules/@gitbook/slate/lib/slate.es.js");var a=n("./core/index.js");var i=n("./space/constants/SHORTCUTS.js");var s=c(i);var u=n("./space/components/utils/EditorComboKeys.js");var l=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){d(t,e);function t(){var n;var r,o,i;p(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return i=(r=(o=f(this,e.call.apply(e,[this].concat(l))),o),o.keyMap=(n={},n[s.default.BOLD]=function(){return o.toggleMark(a.DOC_MARKS.BOLD)},n[s.default.STRIKETHROUGH]=function(){return o.toggleMark(a.DOC_MARKS.STRIKETHROUGH)},n[s.default.ITALIC]=function(){return o.toggleMark(a.DOC_MARKS.ITALIC)},n[s.default.CODE_INLINE]=function(){return o.toggleMark(a.DOC_MARKS.CODE)},n[s.default.LINK]=function(){return o.toggleLink()},n),o.toggleMark=function(e){var t=o.props,n=t.onChange,r=t.editorState;var a=r.change().toggleMark(e);n(a)},o.toggleLink=function(){var e=o.props,t=e.onChange,n=e.editorState,r=e.onInsertLink;var i=a.Edition.hasInline(n,a.DOC_INLINES.LINK);i?t(n.change().unwrapInline({type:a.DOC_INLINES.LINK})):r()},r),f(o,i)}t.prototype.render=function e(){var t=this.props.editorState;var n=!a.Edition.hasBlock(t,a.DOC_BLOCKS.CODE_LINE);if(n)return o.default.createElement(l.default,{keyMap:this.keyMap});return null};return t}(o.default.Component);t.default=h},"./space/components/Document/HoveringMenu/InsertInlineMenu/ButtonImage.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n("./node_modules/react/index.js");var a=d(o);var i=n("./node_modules/unstated/lib/unstated.es.js");n("./node_modules/@gitbook/slate/lib/slate.es.js");var s=n("./icons/index.js");var u=n("./core/index.js");var l=n("./space/components/AssetsManager/index.js");var c=n("./space/components/Document/HoveringMenu/HoveringMenu.js");var p=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){m(t,e);function t(){var n,r,o;h(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return o=(n=(r=v(this,e.call.apply(e,[this].concat(l))),r),r.onMouseDown=function(){var e=r.props,t=e.editorState,n=e.onChange,o=e.selectImage;o({onPick:function e(r){var o=r.assetID;var a=t.change();var i=u.Edition.Image.createInlineImage({assetID:o,size:"line"});u.Edition.insertInline(a,i);n(a)}})},r.render=function(){return a.createElement(p.default.Button,{onMouseDown:r.onMouseDown,label:"Image"},a.createElement(s.IconImage,null))},n),v(r,o)}return t}(a.Component);var g=function e(t){return a.createElement(i.Subscribe,{to:[l.AssetsManagerContainer]},function(e){var n=e.selectImage;return a.createElement(y,r({selectImage:n},t))})};t.default=g},"./space/components/Document/HoveringMenu/InsertInlineMenu/ButtonMath.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=c(r);n("./node_modules/@gitbook/slate/lib/slate.es.js");var a=n("./core/index.js");var i=n("./icons/index.js");var s=n("./space/components/Document/HoveringMenu/HoveringMenu.js");var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){d(t,e);function t(){var n,r,s;p(this,t);for(var l=arguments.length,c=Array(l),d=0;d<l;d++)c[d]=arguments[d];return s=(n=(r=f(this,e.call.apply(e,[this].concat(c))),r),r.onClick=function(){var e=r.props,t=e.editorState,n=e.onChange;var o=a.Edition.Math.createInline();n(a.Edition.insertInline(t.change(),o))},r.render=function(){return o.createElement(u.default.Button,{onMouseDown:r.onClick,label:"Math Formula"},o.createElement(i.IconMathFormula,null))},n),f(r,s)}return t}(o.Component);t.default=h},"./space/components/Document/HoveringMenu/InsertInlineMenu/InsertInlineMenu.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=y(a);var s=n("./node_modules/aphrodite/no-important.js");var u=n("./styleguide/index.js");var l=n("./icons/index.js");var c=n("./space/components/Document/HoveringMenu/HoveringMenu.js");var p=m(c);var f=n("./space/components/Document/HoveringMenu/InsertInlineMenu/ButtonImage.js");var d=m(f);var h=n("./space/components/Document/HoveringMenu/InsertInlineMenu/ButtonMath.js");var v=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=400;var S=400;var E=300;var j=(o=r=function(e){_(t,e);function t(){var n,r,o;g(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=b(this,e.call.apply(e,[this].concat(i))),r),r.state={showPlus:false,showInserts:false},r.breached=false,r.mouseMoved=true,r.onSelectionMoved=function(e){var t=r.state.showPlus;var n=e.selection.isSet&&0==e.selection.startOffset&&0==e.startBlock.text.length;t&&r.setState({showPlus:false});r.initialShowTimeout&&clearTimeout(r.initialShowTimeout);r.mouseMoved&&!n&&(r.initialShowTimeout=setTimeout(function(){r.setState({showPlus:true})},w))},r.onMouseMove=function(e){var t=e.clientX,n=e.clientY;var o=r.props.selectionRect,a=o.top,i=o.left,s=o.width,u=o.height;r.mouseMoved=true;r.initialShowTimeout&&clearTimeout(r.initialShowTimeout);var l=0;var c=window.pageYOffset;var p=i-l;var f=i+s+l;var d=a+u-c+l;var h=a-c-l;var v=t>p&&t<f&&n>h&&n<d;v&&!r.breached?r.onMouseEnter():!v&&r.breached&&r.onMouseLeave();r.breached=v},r.onKeydown=function(){r.mouseMoved=false},r.onMouseEnter=function(){r.showTimeout&&clearTimeout(r.showTimeout);r.showTimeout=setTimeout(function(){r.setState({showPlus:true})},S)},r.onMouseLeave=function(){r.showTimeout&&clearTimeout(r.showTimeout);r.showTimeout=setTimeout(function(){r.setState({showPlus:false})},E)},r.onMouseEnterPlus=function(e){var t=r.state.showPlus;if(!t)return;r.setState({showInserts:true})},r.onMouseLeavePlus=function(e){r.setState({showInserts:false})},n),b(r,o)}t.prototype.componentDidMount=function e(){window.addEventListener("mousemove",this.onMouseMove);window.addEventListener("keydown",this.onKeydown);this.onSelectionMoved(this.props.editorState)};t.prototype.componentWillReceiveProps=function e(t){var n=t.editorState.selection!=this.props.editorState.selection;n&&this.onSelectionMoved(t.editorState)};t.prototype.componentWillUnmount=function e(){this.showTimeout&&clearTimeout(this.showTimeout);this.initialShowTimeout&&clearTimeout(this.initialShowTimeout);window.removeEventListener("mousemove",this.onMouseMove);window.removeEventListener("keydown",this.onKeydown)};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.editorState,a=r.onChange,s=r.onInsertLink;var c=this.state,f=c.showPlus,h=c.showInserts;var m=f||h;return i.createElement(p.default,{styles:[p.default.STYLES.hoverSelection,!m&&p.default.STYLES.hidden,!h&&n.menuPreviewPlus],onMouseEnter:this.onMouseEnterPlus,onMouseLeave:this.onMouseLeavePlus},h?i.createElement(i.Fragment,null,i.createElement(d.default,{editorState:o,onChange:a}),i.createElement(v.default,{editorState:o,onChange:a}),i.createElement(p.default.Button,{label:"Link",onClick:s},i.createElement(l.IconLink,null))):i.createElement(u.View,{styles:[n.insertPlus]},i.createElement(l.IconPlus,null)))};return t}(i.Component),r.STYLES=s.StyleSheet.create({insertPlus:{padding:"2px 3px",fontSize:16},menuPreviewPlus:{padding:0}}),o);t.default=j},"./space/components/Document/HoveringMenu/InsertInlineMenu/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./space/components/Document/HoveringMenu/InsertInlineMenu/InsertInlineMenu.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./space/components/Document/HoveringMenu/SelectionFormattingMenu/ButtonClear.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=l(r);n("./node_modules/@gitbook/slate/lib/slate.es.js");var a=n("./icons/index.js");var i=n("./space/components/Document/HoveringMenu/HoveringMenu.js");var s=u(i);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){f(t,e);function t(){var n,r,i;c(this,t);for(var u=arguments.length,l=Array(u),f=0;f<u;f++)l[f]=arguments[f];return i=(n=(r=p(this,e.call.apply(e,[this].concat(l))),r),r.onToggle=function(e){e.preventDefault();e.stopPropagation();var t=r.props,n=t.editorState,o=t.onChange;var a=n.marks;var i=n.change();a.forEach(function(e){i.removeMark(e)});o(i)},r.render=function(){var e=r.props.editorState.marks;if(0===e.size)return null;return o.createElement(o.Fragment,null,o.createElement(s.default.Separator,null),o.createElement(s.default.Button,{onMouseDown:r.onToggle,label:"Clear formatting"},o.createElement(a.IconX,null)))},n),p(r,i)}return t}(o.Component);t.default=d},"./space/components/Document/HoveringMenu/SelectionFormattingMenu/ButtonLink.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=h(r);n("./node_modules/@gitbook/slate/lib/slate.es.js");var a=n("./core/index.js");var i=n("./icons/index.js");var s=n("./space/constants/SHORTCUTS.js");var u=d(s);var l=n("./space/components/Document/HoveringMenu/HoveringMenu.js");var c=d(l);var p=n("./space/components/Document/HoveringMenu/SelectionFormattingMenu/formatLabel.js");var f=d(p);function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){y(t,e);function t(){var n,r,s;v(this,t);for(var l=arguments.length,p=Array(l),d=0;d<l;d++)p[d]=arguments[d];return s=(n=(r=m(this,e.call.apply(e,[this].concat(p))),r),r.onToggle=function(e){e.preventDefault();e.stopPropagation();var t=r.props,n=t.onChange,o=t.onCreate,i=t.editorState;r.isActive()?n(i.change().unwrapInline({type:a.DOC_INLINES.LINK})):o()},r.render=function(){return o.createElement(c.default.Button,{active:r.isActive(),onMouseDown:r.onToggle,label:(0,f.default)({message:"Link",shortcut:u.default.LINK})},o.createElement(i.IconLink,null))},n),m(r,s)}t.prototype.isActive=function e(){var t=this.props.editorState;return a.Edition.hasInline(t,a.DOC_INLINES.LINK)};return t}(o.Component);t.default=g},"./space/components/Document/HoveringMenu/SelectionFormattingMenu/ButtonMark.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r;var o=n("./node_modules/react/index.js");var a=v(o);n("./node_modules/@gitbook/slate/lib/slate.es.js");var i=n("./core/index.js");var s=n("./icons/index.js");var u=n("./space/constants/SHORTCUTS.js");var l=h(u);var c=n("./space/components/Document/HoveringMenu/HoveringMenu.js");var p=h(c);var f=n("./space/components/Document/HoveringMenu/SelectionFormattingMenu/formatLabel.js");var d=h(f);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(r={},r[i.DOC_MARKS.BOLD]={message:"Bold",icon:s.IconBold,shortcut:l.default.BOLD,autoMd:function e(t){return"*"+t+"*"}},r[i.DOC_MARKS.ITALIC]={message:"Italic",icon:s.IconItalic,shortcut:l.default.ITALIC,autoMd:function e(t){return"_"+t+"_"}},r[i.DOC_MARKS.STRIKETHROUGH]={message:"Strikethrough",icon:s.IconStrikethrough,shortcut:l.default.STRIKETHROUGH,autoMd:function e(t){return"~"+t+"~"}},r[i.DOC_MARKS.CODE]={message:"Code",icon:s.IconCode,shortcut:l.default.CODE_INLINE,autoMd:function e(t){return"`"+t+"`"}},r);var _=function(e){g(t,e);function t(){var n,r,o;m(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return o=(n=(r=y(this,e.call.apply(e,[this].concat(u))),r),r.onToggle=function(e){e.preventDefault();var t=r.props,n=t.type,o=t.onChange,a=t.editorState;var i=a.change().toggleMark(n);o(i)},r.render=function(){var e=r.props,t=e.type,n=e.editorState;var o=i.Edition.hasMark(n,t);var s=b[t];return a.createElement(p.default.Button,{active:o,onMouseDown:r.onToggle,label:(0,d.default)(s)},a.createElement(s.icon))},n),y(r,o)}return t}(a.Component);t.default=_},"./space/components/Document/HoveringMenu/SelectionFormattingMenu/SelectionFormattingMenu.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=v(r);n("./node_modules/@gitbook/slate/lib/slate.es.js");var a=n("./core/index.js");var i=n("./space/components/Document/HoveringMenu/HoveringMenu.js");var s=h(i);var u=n("./space/components/Document/HoveringMenu/SelectionFormattingMenu/ButtonLink.js");var l=h(u);var c=n("./space/components/Document/HoveringMenu/SelectionFormattingMenu/ButtonMark.js");var p=h(c);var f=n("./space/components/Document/HoveringMenu/SelectionFormattingMenu/ButtonClear.js");var d=h(f);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){g(t,e);function t(){m(this,t);return y(this,e.apply(this,arguments))}t.shouldOpen=function e(t){var n=[a.DOC_BLOCKS.CODE_LINE,a.DOC_BLOCKS.API_METHOD_SUMMARY];return!t.isEmpty&&!n.some(function(e){return a.Edition.hasBlock(t,e)})};t.prototype.render=function e(){var t=this.props,n=t.editorState,r=t.onChange,i=t.onInsertLink;var u=n.isBlurred;if(u)return null;return o.createElement(s.default,{styles:[s.default.STYLES.hoverSelection]},o.createElement(p.default,{type:a.DOC_MARKS.BOLD,editorState:n,onChange:r}),o.createElement(p.default,{type:a.DOC_MARKS.ITALIC,editorState:n,onChange:r}),o.createElement(p.default,{type:a.DOC_MARKS.STRIKETHROUGH,editorState:n,onChange:r}),o.createElement(s.default.Separator,null),o.createElement(p.default,{type:a.DOC_MARKS.CODE,editorState:n,onChange:r}),o.createElement(l.default,{editorState:n,onChange:r,onCreate:i}),o.createElement(d.default,{editorState:n,onChange:r}))};return t}(o.Component);t.default=b},"./space/components/Document/HoveringMenu/SelectionFormattingMenu/formatLabel.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./space/components/utils/KeyboardShortcut.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.message,n=e.shortcut,r=e.autoMd,a=void 0===r?function(e){return e}:r;var i=n?" ("+o.default.prettifyUnsafe(n)+")":"";return a(t)+i}t.default=i},"./space/components/Document/HoveringMenu/SelectionFormattingMenu/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./space/components/Document/HoveringMenu/SelectionFormattingMenu/SelectionFormattingMenu.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./space/components/Document/controls/BlockBaseControls.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=m(r);var a=n("./node_modules/uncontrollable/lib/index.js");var i=v(a);var s=n("./styleguide/index.js");var u=n("./icons/index.js");var l=n("./space/components/Document/controls/BlockControls.js");var c=v(l);var p=n("./space/components/Document/controls/BlockGrabber.js");var f=v(p);var d=n("./space/components/Document/controls/BlockControl.js");var h=v(d);function v(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){b(t,e);function t(){var n,r,o;y(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=g(this,e.call.apply(e,[this].concat(i))),r),r.onToggleMenu=function(){var e=r.props,t=e.isOpen,n=e.onToggle,o=e.onClose;t&&o&&o();n(!t)},n),g(r,o)}t.prototype.render=function e(){var t=this.props,n=t.isOpen,r=t.menu,a=t.parent,i=t.node,l=t.blockHovered,p=t.blockFocused;var d="document"===a.object;return o.createElement(c.default,{isVisible:l||p||n,parent:a,node:i},d&&o.createElement(f.default,null),o.createElement(h.default,null,o.createElement(s.Popover.ManualPortal,{closeOnEsc:true,closeOnOutsideClick:true,closeOnClick:true,closeOnScroll:true,fixed:false,onClose:this.onToggleMenu,anchor:o.createElement(s.CircleButton,{onClick:this.onToggleMenu,styles:[n&&s.CircleButton.STYLES.active,!d&&s.CircleButton.STYLES.small],style:{transform:n?"rotateZ(-180deg)":null}},o.createElement(u.IconChevronDown,null)),isOpen:n},o.createElement(s.Popover,{position:"south",autoPosition:true,align:"start"},r))))};return t}(o.Component);var w=(0,i.default)(_,{isOpen:"onToggle"});t.default=w},"./space/components/Document/controls/BlockControl.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a;var i=n("./node_modules/react/index.js");var s=c(i);var u=n("./node_modules/aphrodite/no-important.js");var l=n("./styleguide/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(a=o=function(e){h(t,e);function t(){f(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var o=this.props,a=o.styles,i=o.children,u=p(o,["styles","children"]);return s.createElement(l.View,r({styles:[n.blockControl,a]},u),i)};return t}(s.Component),o.STYLES=u.StyleSheet.create({blockControl:{cursor:"pointer"}}),a);t.default=v},"./space/components/Document/controls/BlockControls.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,s;var u=n("./node_modules/react/index.js");var l=d(u);n("./node_modules/@gitbook/slate/lib/slate.es.js");var c=n("./node_modules/aphrodite/no-important.js");var p=n("./core/index.js");var f=n("./styleguide/index.js");function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(a=o=function(e){y(t,e);function t(){v(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES,o=t.PARENT_STYLES,a=t.NODE_STYLES;var i=this.props,s=i.isVisible,u=i.styles,c=i.parent,p=i.node,d=i.children,v=h(i,["isVisible","styles","parent","node","children"]);var m=o[c.type||c.object];var y=a[p.type];return l.createElement(f.View,r({styles:[n.blockControls,s&&n.visible,m,y,u],contentEditable:false},v),d)};return t}(l.Component),o.STYLES=c.StyleSheet.create({blockControls:{position:"absolute",zIndex:f.zIndexes.CONTROLS,height:30,top:0,left:0,paddingRight:f.spacing.S200,transform:"translateX(-100%)",opacity:0,transition:"opacity 0.2s",display:"flex",alignItems:"center",justifyContent:"flex-end",maxWidth:f.spacing.S900,":hover":{opacity:1,zIndex:f.zIndexes.CONTROLS+1}},visible:{opacity:1,zIndex:f.zIndexes.CONTROLS+1}}),o.NODE_STYLES=c.StyleSheet.create((i={},i[p.DOC_BLOCKS.HEADING_1]={top:4},i[p.DOC_BLOCKS.HEADING_2]={top:0},i[p.DOC_BLOCKS.HEADING_3]={top:-2},i[p.DOC_BLOCKS.PARAGRAPH]={top:-2},i)),o.PARENT_STYLES=c.StyleSheet.create((s={document:{width:f.spacing.S900}},s[p.DOC_BLOCKS.BLOCKQUOTE]={paddingRight:4},s[p.DOC_BLOCKS.HINT]={paddingRight:42},s[p.DOC_BLOCKS.TABS_ITEM]={paddingRight:f.spacing.S200-1},s)),a);t.default=g},"./space/components/Document/controls/BlockControlsWrapper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BlockControlsWrapperSortable=t.BlockControlsWrapper=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i;var s=n("./node_modules/react/index.js");var u=d(s);var l=n("./node_modules/aphrodite/no-important.js");var c=n("./node_modules/react-sortable-hoc/dist/commonjs/index.js");var p=n("./core/index.js");var f=n("./styleguide/index.js");function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t,n){return t!==n&&e.some(function(e){return t[e]!==n[e]})}var g=(a=o=function(e){m(t,e);function t(){var n,r,o;h(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=v(this,e.call.apply(e,[this].concat(i))),r),r.state={blockHovered:false},r.onMouseEnter=function(){r.setState({blockHovered:true})},r.onMouseLeave=function(){r.setState({blockHovered:false})},r.onStartTyping=function(){r.state.blockHovered&&r.setState({blockHovered:false})},n),v(r,o)}t.prototype.shouldComponentUpdate=function e(t,n){if(n.blockHovered!==this.state.blockHovered)return true;if(y(["node","editor","blockFocused","SideControls","AroundControls","sortable"],this.props,t))return true;if(y(["type","object","data"],this.props.parent,t.parent))return true;if(this.props.isFocused||t.isFocused)return true;if(this.props.isSelected||t.isSelected)return true;var r=p.Edition.shouldShowInsertionControls({parent:this.props.parent,node:this.props.node});var o=p.Edition.shouldShowInsertionControls({parent:t.parent,node:t.node});if(y(["after","before"],r,o))return true;return false};t.prototype.componentDidUpdate=function e(t,n){var r=n.blockHovered;var o=this.state.blockHovered;!r&&o?window.document.body.addEventListener("keydown",this.onStartTyping):r&&!o&&window.document.body.removeEventListener("keydown",this.onStartTyping)};t.prototype.componentWillUnmount=function e(){window.document.body.removeEventListener("keydown",this.onStartTyping)};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.SideControls,a=r.AroundControls,i=r.children,s=r.node,l=r.parent,c=r.editor,p=r.sortable,d=r.blockFocused;var h=this.state.blockHovered;return u.createElement(f.View,{styles:n.blockWrapper},u.createElement(f.View,{styles:n.sideControlsWrapper,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.createElement(o,{node:s,editor:c,parent:l,blockHovered:h,blockFocused:d,sortable:p}),i),u.createElement(a,{node:s,parent:l,editor:c}))};return t}(u.Component),o.STYLES=l.StyleSheet.create({blockWrapper:{position:"relative"},sideControlsWrapper:{position:"relative"}}),a);var b=(0,c.SortableElement)(i=function(e){m(t,e);function t(){h(this,t);return v(this,e.apply(this,arguments))}t.prototype.render=function e(){return u.createElement(g,r({sortable:true},this.props))};return t}(u.Component))||i;t.BlockControlsWrapper=g;t.BlockControlsWrapperSortable=b},"./space/components/Document/controls/BlockDefaultControls.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=p(r);n("./node_modules/@gitbook/slate/lib/slate.es.js");var a=n("./core/index.js");var i=n("./styleguide/index.js");var s=n("./icons/index.js");var u=n("./space/components/Document/controls/BlockBaseControls.js");var l=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){h(t,e);function t(){var n,r,o;f(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return o=(n=(r=d(this,e.call.apply(e,[this].concat(s))),r),r.onDelete=function(){var e=r.props,t=e.editor,n=e.node;a.Edition.onChange(t,function(e){return e.removeNodeByKey(n.key)})},n),d(r,o)}t.prototype.render=function e(){var t=this.props,n=t.parent,r=t.node,a=t.blockHovered,u=t.blockFocused;return o.createElement(l.default,{node:r,parent:n,blockHovered:a,blockFocused:u,menu:o.createElement(i.Menu,null,o.createElement(i.Menu.Item,{icon:o.createElement(s.IconTrashcan,null),onMouseDown:this.onDelete},"Delete"))})};return t}(o.Component);t.default=v},"./space/components/Document/controls/BlockGrabber.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a;var i=n("./node_modules/react/index.js");var s=v(i);var u=n("./node_modules/aphrodite/no-important.js");var l=n("./node_modules/react-sortable-hoc/dist/commonjs/index.js");var c=n("./icons/index.js");var p=n("./styleguide/index.js");var f=n("./space/components/Document/controls/BlockControl.js");var d=h(f);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(0,l.SortableHandle)(r=(a=o=function(e){g(t,e);function t(){m(this,t);return y(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;return s.createElement(d.default,{styles:[n.blockGrabber]},s.createElement(c.IconGrabber,null))};return t}(s.Component),o.STYLES=u.StyleSheet.create({blockGrabber:{display:"flex",marginRight:12,cursor:"grab",fontSize:"18px",height:18,width:18,color:p.colors.GREY_BASE,":hover":{color:p.colors.GREY_DARKER}}}),a))||r;t.default=b},"./space/components/Document/controls/BlockInsertionControls.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=m(a);var s=n("./node_modules/aphrodite/no-important.js");var u=n("./styleguide/index.js");var l=n("./core/index.js");var c=n("./space/components/Document/context.js");var p=n("./space/components/Document/controls/BlockControls.js");var f=v(p);var d=n("./space/components/Document/controls/NewBlockControl.js");var h=v(d);function v(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){b(t,e);function t(){y(this,t);return g(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.parent,r=t.node,o=t.editor;var a=l.Edition.shouldShowInsertionControls({parent:n,node:r});return i.createElement(i.Fragment,null,a.before&&i.createElement(w,{position:"Before",node:r,parent:n,editor:o}),a.after&&i.createElement(w,{position:"After",node:r,parent:n,editor:o}))};return t}(i.Component);var w=(o=r=function(e){b(t,e);function t(){var n,r,o;y(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=g(this,e.call.apply(e,[this].concat(i))),r),r.state={isHover:false,isOpen:false},r.onMouseEnter=function(){r.setState({isHover:true})},r.onMouseLeave=function(){r.setState({isHover:false})},r.onOpen=function(){r.setState({isOpen:true})},r.onClose=function(){r.setState({isOpen:false,isHover:false})},r.onStartTyping=function(){r.state.isHover&&r.setState({isHover:false})},n),g(r,o)}t.prototype.componentDidUpdate=function e(t,n){var r=n.isHover;var o=this.state.isHover;!r&&o?window.document.body.addEventListener("keydown",this.onStartTyping):r&&!o&&window.document.body.removeEventListener("keydown",this.onStartTyping)};t.prototype.componentWillUnmount=function e(){window.document.body.removeEventListener("keydown",this.onStartTyping)};t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.position,s=o.parent,l=o.node,p=o.editor;var d=this.state,v=d.isHover,m=d.isOpen;var y="document"===s.object;return i.createElement(u.View,{styles:[r.hoverArea,r["hoverArea"+a]],contentEditable:false},i.createElement(u.View,{styles:[r.insertionLine,v&&r.insertionLineVisible]}),i.createElement(f.default,{styles:[r.blockControls],isVisible:v,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,parent:s,node:l},i.createElement(c.ContextPage.Consumer,null,function(e){return i.createElement(u.View,{styles:[r.controlWrapper,y&&r.circleAlign]},i.createElement(u.View,{styles:[r.insertionLineExtension,v&&r.insertionLineVisible]}),i.createElement(h.default,{node:l,parent:s,index:"After"===a?s.nodes.indexOf(l)+1:s.nodes.indexOf(l),replace:false,page:e.page,isOpen:m,onOpen:n.onOpen,onClose:n.onClose,isVisible:v,editor:p,small:true,hideSearch:true}))})))};return t}(i.Component),r.STYLES=s.StyleSheet.create({hoverArea:{position:"absolute",left:0,right:0,height:u.spacing.S300},hoverAreaAfter:{top:"100%"},hoverAreaBefore:{bottom:"100%"},blockControls:{top:"50%",transform:"translate(-100%, -50%)"},controlWrapper:{position:"relative"},circleAlign:{display:"flex",alignItems:"center",justifyContent:"center",width:u.CircleButton.SIZE,height:u.CircleButton.SIZE},insertionLine:{background:"transparent",position:"absolute",height:2,top:"50%",left:0,right:0,transform:"translateY(-50%)",transition:"background 0.4s"},insertionLineExtension:{background:"transparent",position:"absolute",height:2,width:50,left:"100%",top:"50%",transform:"translateY(-50%)",transition:"background 0.4s"},insertionLineVisible:{background:u.colors.GREY_LIGHTER}}),o);t.default=_},"./space/components/Document/controls/NewBlockControl.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,s,u;var l=n("./node_modules/react/index.js");var c=C(l);var p=n("./node_modules/aphrodite/no-important.js");var f=n("./node_modules/unstated/lib/unstated.es.js");var d=n("./node_modules/react-redux/es/index.js");var h=n("./core/index.js");var v=n("./styleguide/index.js");var m=n("./icons/index.js");var y=n("./space/constants/SHORTCUTS.js");var g=O(y);var b=n("./space/components/utils/EditorComboKeys.js");var _=O(b);var w=n("./space/components/Document/CommandPalette/index.js");var S=n("./space/components/AssetsManager/index.js");var E=n("./space/components/Document/controls/BlockControl.js");var j=O(E);function O(e){return e&&e.__esModule?e:{default:e}}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=(o=(0,d.connect)(),o(a=(s=i=function(e){P(t,e);function t(n){var r;M(this,t);var o=k(this,e.call(this,n));o.keyMap=(r={},r[g.default.COMMAND_PALETTE]=function(){var e=o.props.isOpen;o.toggleMenu({isOpen:!e})},r);o.insertFileOperation=function(){var e=o.props,t=e.selectFile,n=e.editor,r=e.parent,a=e.index,i=e.replace;t({onPick:function e(t){var o=t.assetID;h.Edition.onChange(n,function(e){return e.call(h.Edition.insertBlockAt,h.Edition.File.createFile({assetID:o}),{parent:r,index:a,replace:i})})}})};o.insertImageOperation=function(){var e=o.props,t=e.selectImage,n=e.editor,r=e.parent,a=e.index,i=e.replace;t({onPick:function e(t){var o=t.assetID;h.Edition.onChange(n,function(e){return e.call(h.Edition.insertBlockAt,h.Edition.Image.createImage({assetID:o}),{parent:r,index:a,replace:i})})}})};o.insertPageRefOperation=function(e,t){var n=o.props.page;var r=h.Edition.PageRef.createPageRef(n);return h.Edition.insertBlockAt(e,r,t)};o.onClose=function(){o.toggleMenu({isOpen:false})};o.onOpen=function(){o.toggleMenu({isOpen:true})};o.onKeyDown=function(e){var t=o.onPick,n=o.onCursorMove;var r=o.state.paletteState;(0,w.commandKeydown)(e,{onPick:function e(){var n=r.getCurrentCommand();n&&t(n)},onCursorMove:n,onClose:function e(){o.toggleMenu({isOpen:false,focusEditor:true})}})};o.onInputChange=function(e){var t=e.target.value;o.setState(function(e){return{paletteState:e.paletteState.updateQuery(t)}})};o.onPick=function(e){var t=o.props,n=t.editor,r=t.parent,a=t.index,i=t.replace;var s=e.insertOperation||e.id===w.COMMANDS.FILE.id&&o.insertFileOperation||e.id===w.COMMANDS.IMAGE.id&&o.insertImageOperation||e.id===w.COMMANDS.PAGE_REF.id&&o.insertPageRefOperation;o.toggleMenu({isOpen:false});h.Edition.onChange(n,function(e){s&&s(e,{parent:r,index:a,replace:i});return e.focus()})};o.onCursorMove=function(e,t){o.setState(function(n){return{paletteState:n.paletteState.moveCursor(e,t)}})};var a=w.COMMANDS.ALL.filter(function(e){return h.Edition.canInsertBlockIn(n.parent,e.type)});o.state={paletteState:w.CommandPaletteState.create(a)};return o}t.prototype.componentWillReceiveProps=function e(t){var n=this.props.parent!==t.parent;if(n){var r=w.COMMANDS.ALL.filter(function(e){return h.Edition.canInsertBlockIn(t.parent,e.type)});this.setState({paletteState:w.CommandPaletteState.create(r)})}};t.prototype.toggleMenu=function e(t){var n=t.isOpen,r=t.focusEditor,o=void 0!==r&&r;var a=this.props,i=a.onClose,s=a.onOpen,u=a.editor;this.setState(function(e){return{paletteState:e.paletteState.reset()}});n?s():i();o&&h.Edition.onChange(u,function(e){return e.focus()})};t.prototype.render=function e(){var n=t.STYLES,r=t.SEARCH_STYLES;var o=this.props,a=o.isOpen,i=o.parent,s=o.node,u=o.replace,l=o.hideSearch,p=o.small,f=o.isVisible,d=o.withKeyboardShortcut;var h=this.state.paletteState;var y="document"===i.object;var g=r[i.type];return c.createElement(j.default,{styles:[n.newBlockControl,(f||a)&&n.visible]},a&&c.createElement(v.View,{styles:[n.searchContainer,g,l&&n.searchContainerHidden]},c.createElement(w.CommandSearch,{autoFocus:true,withBackground:y,onKeyDown:this.onKeyDown,value:h.query,onChange:this.onInputChange})),c.createElement(v.Popover.ManualPortal,{closeOnOutsideClick:true,fixed:false,onClose:this.onClose,anchor:c.createElement(v.CircleButton,{onClick:a?this.onClose:this.onOpen,styles:[a&&v.CircleButton.STYLES.active,(p||!y)&&v.CircleButton.STYLES.small],style:{transform:a?"rotateZ(45deg)":null}},c.createElement(m.IconPlus,null)),isOpen:a},c.createElement(v.Popover,{position:"south",autoPosition:true,align:"start"},c.createElement(w.CommandPalette,{paletteState:h,onPick:this.onPick,activeType:u?s.type:""}))),d&&c.createElement(_.default,{keyMap:this.keyMap}))};return t}(c.Component),i.defaultProps={hideSearch:false,small:false,withKeyboardShortcut:false},i.STYLES=p.StyleSheet.create({newBlockControl:{position:"relative",transition:"opacity 0.2s",opacity:0,":hover":{opacity:1}},visible:{opacity:1},searchContainer:{display:"flex",alignItems:"center",position:"absolute",paddingLeft:v.spacing.S200,left:"100%",top:0,bottom:0},searchContainerHidden:{opacity:0}}),i.SEARCH_STYLES=p.StyleSheet.create((u={},u[h.DOC_BLOCKS.HINT]={paddingLeft:42},u)),s))||a);var T=function e(t){return c.createElement(f.Subscribe,{to:[S.AssetsManagerContainer]},function(e){var n=e.selectImage,o=e.selectFile;return c.createElement(x,r({},t,{selectImage:n,selectFile:o}))})};t.default=T},"./space/components/Document/controls/TextControlsMenu.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=c(r);var a=n("./node_modules/@gitbook/slate/lib/slate.es.js");n("./node_modules/@gitbook/slate-react/lib/slate-react.es.js");var i=n("./core/index.js");var s=n("./styleguide/index.js");var u=n("./icons/index.js");var l=n("./space/components/Document/CommandPalette/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){d(t,e);function t(){var n,r,o;p(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return o=(n=(r=f(this,e.call.apply(e,[this].concat(u))),r),r.onDelete=function(){var e=r.props,t=e.editor,n=e.node;i.Edition.onChange(t,function(e){return e.removeNodeByKey(n.key)})},r.onClickCommand=function(e){var t=r.props,n=t.editor,o=t.node;var s=e.convertOperation;if(!s)return;var u=a.Range.create().moveToRangeOf(o);i.Edition.onChange(n,function(e){return s(e,{range:u})})},r.onChangeToParagraph=function(){var e=r.props,t=e.editor,n=e.node;i.Edition.onChange(t,function(e){return i.Edition.Paragraph.convertToParagraph(e,n)})},n),f(r,o)}t.prototype.render=function e(){var t=this;var n=this.props,r=n.children,a=n.node;return o.createElement(s.Menu,null,[l.COMMANDS.PARAGRAPH,l.COMMANDS.H1,l.COMMANDS.H2,l.COMMANDS.H3].map(function(e){return o.createElement(l.CommandItem,{key:e.id,command:e,active:e.type===a.type,onClick:t.onClickCommand})}),o.createElement(s.Menu.Divider,null),r,o.createElement(s.Menu.Item,{icon:o.createElement(u.IconTrashcan,null),onClick:this.onDelete},"Delete"))};return t}(o.Component);t.default=h},"./space/components/Document/controls/withBlockControls.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=h(r);var a=n("./node_modules/react-display-name/lib/getDisplayName.js");var i=d(a);n("./node_modules/@gitbook/slate-react/lib/slate-react.es.js");var s=n("./core/index.js");var u=n("./space/components/Document/controls/BlockDefaultControls.js");var l=d(u);var c=n("./space/components/Document/controls/BlockInsertionControls.js");var p=d(c);var f=n("./space/components/Document/controls/BlockControlsWrapper.js");function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e){var t=e||{},n=t.SideControls,r=void 0===n?l.default:n,a=t.AroundControls,u=void 0===a?p.default:a;return function(e){var t,n;return n=t=function(t){y(n,t);function n(){v(this,n);return m(this,t.apply(this,arguments))}n.prototype.render=function t(){var n=this.props,a=n.readOnly,i=n.parent,l=n.node,c=n.isSelected,p=n.editor,d=n.value;if(a||!s.Edition.canShowBlockControlsIn(i))return o.createElement(e,this.props);var h=s.Edition.isSortableBlock(this.props);var v=h?f.BlockControlsWrapperSortable:f.BlockControlsWrapper;var m=h?d.document.nodes.findIndex(function(e){return e.key===l.key}):void 0;return o.createElement(v,{SideControls:r,AroundControls:u,index:m,isSelected:c,blockFocused:s.Edition.isNodeFocused(d,l),node:l,parent:i,editor:p,value:d},o.createElement(e,this.props))};return n}(o.Component),t.displayName="withBlockControls("+(0,i.default)(e)+")",n}}t.default=g},"./space/components/Document/page-refs/controls/CompletionItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=l(a);var s=n("./node_modules/aphrodite/no-important.js");n("./types/Fuse.js");var u=n("./styleguide/index.js");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){f(t,e);function t(){var n,r,o;c(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=p(this,e.call.apply(e,[this].concat(i))),r),r.onMouseDown=function(){var e=r.props,t=e.completion,n=e.onPick;n(t)},n),p(r,o)}t.prototype.render=function e(){var n=this.props,r=n.completion,o=n.highlighted;var a=t.STYLES;return i.createElement(u.View,{role:"menuitem",tabIndex:-1,styles:[a.pageRefInputSuggestion],onMouseDown:this.onMouseDown,style:o},i.createElement(u.Text.UIH300,null,i.createElement(u.MatchHighlight,{matches:r.matches,matchKey:"title",text:r.item.title,highlightStyle:a.highlightedSuggestion})))};return t}(i.Component),r.defaultProps={highlighted:null},r.STYLES=s.StyleSheet.create({pageRefInputSuggestion:{cursor:"pointer",padding:"4px "+u.spacing.S100+"px",width:"100%",backgroundColor:u.colors.WHITE,":hover":{color:u.colors.BLUE_BASE}},highlightedSuggestion:{backgroundColor:u.colors.BLUE_LIGHTEST}}),o);t.default=d},"./space/components/Document/page-refs/controls/PagePicker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i=n("./node_modules/react/index.js");var s=b(i);var u=n("./node_modules/aphrodite/no-important.js");n("./node_modules/@gitbook/slate/lib/slate.es.js");n("./node_modules/@gitbook/slate-react/lib/slate-react.es.js");var l=n("./core/index.js");var c=n("./icons/index.js");n("./types/Fuse.js");var p=n("./styleguide/index.js");var f=n("./space/constants/FUSE_OPTIONS.js");var d=g(f);var h=n("./space/components/Document/page-refs/controls/CompletionItem.js");var v=g(h);var m=n("./space/components/Document/page-refs/controls/PagesTree.js");var y=g(m);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=a({},d.default.TREEPAGE,{includeMatches:true});function j(e){return e.item.uid}var O=(o=r=function(e){S(t,e);function t(){var n,r,o;_(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=w(this,e.call.apply(e,[this].concat(i))),r),r.state={inputValue:"",cursor:0},r.input=s.createRef(),r.onChange=function(e){r.setState({inputValue:e.target.value,cursor:0})},r.onFocus=function(e){e.stopPropagation();r.input&&r.input.current&&r.input.current.focus()},r.onSetPage=function(e){var t=r.props,n=t.editor,o=t.node;l.Edition.onChange(n,function(t){return l.Edition.PageRef.setPage(t,o,e)});r.setState({inputValue:"",cursor:0})},r.onPick=function(e){return r.onSetPage(e.item)},r.onMouseDownResetValue=function(e){e.preventDefault();return r.setState({inputValue:"",cursor:0})},n),w(r,o)}t.prototype.render=function e(){var n=this;var r=this.props,o=r.pages,a=r.activePage;var i=this.state,l=i.inputValue,f=i.cursor;var d=t.STYLES;var h=o.map(function(e){return e.page}).filter(function(e){return!e.isGroup}).toArray();return s.createElement(p.FuzzyFilter,{items:h,fuseConfig:E,defaultAllItems:true,query:l},function(e){var t=e.slice(0,3);var r=l.length>0;return s.createElement(s.Fragment,null,s.createElement(p.View,{styles:d.menuInputWrapper,onClick:n.onFocus},s.createElement(p.View,{styles:d.menuInputIcon},s.createElement(c.IconSearch,null)),s.createElement("input",{type:"text",className:(0,u.css)(d.pageRefInput),onFocus:n.onFocus,onChange:n.onChange,value:l,ref:n.input,onKeyDown:p.Completions.onKeyDown({completions:t,cursor:f,onPick:n.onPick,onCursor:function e(t){return n.setState({cursor:t})}})}),l.length>0&&s.createElement(p.View,{styles:d.closeIcon,onMouseDown:n.onMouseDownResetValue},s.createElement(c.IconXCircle,null))),s.createElement(p.View,{styles:d.pageMenuTreeWrapper},r?t.length>0?s.createElement(p.Completions,{completions:t,onPick:n.onPick,keys:j,cursor:f,component:v.default}):s.createElement(p.View,{styles:[d.placeholderSuggestions]},s.createElement(p.Text.TextH400,null,"No suggestions")):s.createElement(y.default,{pages:o,onPick:n.onSetPage,activePage:a})))})};return t}(s.Component),r.STYLES=u.StyleSheet.create({pageRefInput:{font:"inherit",color:"inherit",background:"transparent",border:0,outline:"none",marginLeft:p.spacing.S100,width:"100%",padding:0},pageMenuTreeWrapper:{flex:1,margin:p.spacing.S100+"px "+p.spacing.S100+"px",cursor:"default"},menuInput:{border:"none",marginLeft:p.spacing.S100},menuInputIcon:{color:p.colors.GREY_BASE,display:"flex",alignItems:"center",fontSize:20},menuInputWrapper:{display:"flex",border:"1px solid "+p.colors.GREY_LIGHT,borderRadius:3,height:32,padding:"0 "+p.spacing.S100+"px",margin:p.spacing.S100,pointerEvents:"auto",alignItems:"center"},closeIcon:{display:"flex",alignItems:"center",color:p.colors.GREY_BASE,":hover":{cursor:"pointer"}},placeholderSuggestions:{color:p.colors.GREY_BASE,padding:"0 "+p.spacing.S100+"px",marginTop:p.spacing.S200}}),o);t.default=O},"./space/components/Document/page-refs/controls/PageTreeItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var s=n("./node_modules/react/index.js");var u=p(s);var l=n("./node_modules/aphrodite/no-important.js");var c=n("./styleguide/index.js");n("./core/index.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(o=r=function(e){h(t,e);function t(){f(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.page,o=n.onClick,a=n.depth,i=n.activePage,s=n.isHovered,l=n.isInGroup;var p=t.STYLES,f=t.helpers;var d=l?a-1:a;return u.createElement(c.View,{component:"span",styles:[p.pagesListItem,d>0&&p.pagesListItemChildBorder],style:{paddingLeft:d>0?f.paddingLeft*d:c.spacing.S100,cursor:!r.isGroup&&f.cursor},onClick:o},r.isGroup?u.createElement(c.Text.InfoH200,{styles:[p.pagesListItemTitle],style:{color:c.colors.GREY_BASE}},r.title):u.createElement(c.Text.UIH300,{styles:[p.pagesListItemTitle,s&&p.pagesListItemHovered],style:{color:i&&i.uid===r.uid?f.color:void 0}},r.title))};return t}(u.Component),r.STYLES=l.StyleSheet.create({pagesListItem:{display:"flex",justifyContent:"flex-start",padding:"4px "+c.spacing.S100+"px 4px 0"},pagesListItemTitle:{maxWidth:180,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",transition:"color 0.2s"},pagesListItemChildBorder:{flex:"0 0 auto",color:c.colors.GREY_BASE,borderLeft:"1px solid "+c.colors.GREY_LIGHTER,margin:"0px "+c.spacing.S100+"px",display:"inline-flex",justifyContent:"flex-start"},pagesListItemHovered:{color:c.colors.BLUE_BASE,cursor:"pointer"}}),r.helpers={paddingLeft:c.spacing.S200,cursor:"pointer",color:c.colors.BLUE_BASE},o);var m=(i=a=function(e){h(t,e);function t(){var n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=d(this,e.call.apply(e,[this].concat(i))),r),r.state={isHovered:false},r.onSelectNewItem=function(){var e=r.props,t=e.page,n=e.onPick,o=e.activePage;if(t.isGroup||t.uid===o.uid)return null;return n(t)},r.onMouseEnter=function(){return r.setState({isHovered:true})},r.onMouseLeave=function(){return r.setState({isHovered:false})},n),d(r,o)}t.prototype.render=function e(){var n=this.props,r=n.page,o=n.depth,a=n.isInGroup,i=n.activePage;var s=this.state.isHovered;var l=t.STYLES;return u.createElement(u.Fragment,null,u.createElement(c.View,{styles:[r.isGroup?l.pagesListItemGroup:l.testCursor,!r.isGroup&&s&&l.pagesListItemHovered],onClick:this.onSelectNewItem,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},u.createElement(v,{isHovered:s,depth:o,page:r,activePage:i,isInGroup:a})))};return t}(u.Component),a.defaultProps={depth:0},a.STYLES=l.StyleSheet.create({pagesListItemGroup:{color:c.colors.GREY_BASE,textTransform:"uppercase",fontSize:c.font.SIZE_XSMALL,marginTop:c.spacing.S200+"px",cursor:"default"},pagesListItemHovered:{cursor:"pointer",color:c.colors.BLUE_BASE},testCursor:{cursor:"pointer"}}),i);t.default=m},"./space/components/Document/page-refs/controls/PagesTree.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=f(a);var s=n("./node_modules/aphrodite/no-important.js");n("./core/index.js");var u=n("./styleguide/index.js");var l=n("./space/components/Document/page-refs/controls/PageTreeItem.js");var c=p(l);function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=r=function(e){v(t,e);function t(){d(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.pages,o=n.activePage,a=n.onPick;var s=t.STYLES;return i.createElement(u.Scrollable,{styles:[s.menuPagesTree]},r.map(function(e){var t=e.depth,n=e.isInGroup,r=e.page,s=e.key;return i.createElement(c.default,{key:s,depth:t,onPick:a,activePage:o,page:r,isInGroup:n})}))};return t}(i.Component),r.STYLES=s.StyleSheet.create({menuPagesTree:{overflow:"auto",maxHeight:200},menuItemPageTree:{padding:u.spacing.S100/2+"px 0px"},menuItemPageTreeActive:{color:u.colors.BLUE_BASE}}),o);t.default=m},"./space/components/utils/EditorComboKeys.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n("./node_modules/react/index.js");var a=c(o);var i=n("./node_modules/dom-closest/index.js");var s=l(i);var u=n("./node_modules/react-combo-keys/lib/index.js");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e){return(0,s.default)(e,"[data-slate-editor]")}function v(e,t,n){return!h(t)}var m=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){return a.createElement(u.ComboKeys,r({},this.props,{stopAt:v}))};return t}(a.Component);t.default=m},"./space/components/utils/KeyboardShortcut.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i=n("./node_modules/react/index.js");var s=p(i);var u=n("./space/components/utils/platform.js");var l=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v={mod:"Ctrl",ctrl:"Ctrl",meta:"⌘",shift:"Shift",alt:"Alt",backspace:"⌫",tab:"⇥",enter:"↩",return:"↩",capslock:"⇪",esc:"⎋",space:"␣",pageup:"⇞",pagedown:"⇟",end:"↘",home:"↖",left:"←",up:"↑",right:"→",down:"↓",ins:"⎀",del:"⌦",plus:"+"};var m=a({},v,{mod:"⌘",ctrl:"⌃",meta:"⌘",shift:"⇧",alt:"⌥"});function y(e,t){var n=t?m:v;return e.split("+").map(function(e){return n[e]?n[e]:e.toUpperCase()}).join(t?"":"+")}var g=(o=r=function(e){h(t,e);function t(n){f(this,t);var r=d(this,e.call(this,n));r.state={isMac:false};return r}t.prototype.componentDidMount=function e(){this.setState({isMac:l.default.isMac()})};t.prototype.render=function e(){var t=this.props.shortcut;var n=this.state.isMac;return s.createElement("span",null,y(t,n))};return t}(s.Component),r.prettify=y,r.prettifyUnsafe=function(e){return y(e,l.default.isMac())},o);t.default=g},"./space/components/utils/platform.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});function r(){return Boolean(navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i))}var o={isMac:r};t.default=o},"./space/constants/FUSE_OPTIONS.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r={keys:["title"],shouldSort:true,threshold:.3,location:0,distance:100,maxPatternLength:32};var o={TREEPAGE:r};t.default=o},"./space/constants/SHORTCUTS.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r={FOCUS_SEARCH:"mod+shift+o",COMMENT:"mod+alt+m",SAVE:"mod+s",UNDO:"mod+z",REDO:"mod+y",REDO2:"mod+shift+z",COMMAND_PALETTE:"mod+/",BOLD:"mod+b",ITALIC:"mod+i",STRIKETHROUGH:"mod+shift+5",CODE_INLINE:"mod+shift+6",LINK:"mod+k",H1:"mod+shift+1",H2:"mod+shift+2",UL_LIST:"mod+shift+8",OL_LIST:"mod+shift+7",BLOCKQUOTE:"mod+]"};t.default=r},"./types/Fuse.js":function(e,t,n){"use strict"}});
//# space-part-21.70609045.js.map