webpackJsonp([6],{"./node_modules/immutable-undo/dist/index.js":function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[];var r=true;var o=false;var a=void 0;try{for(var i=e[Symbol.iterator](),s;!(r=(s=i.next()).done);r=true){n.push(s.value);if(t&&n.length===t)break}}catch(e){o=true;a=e}finally{try{!r&&i["return"]&&i["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n("./node_modules/immutable/dist/immutable.js"),c=l.Record,u=l.Stack,f=l.List;var p=n("./node_modules/immutable-undo/dist/linear.js");var d=500;var v={undos:new f,redos:new u,merged:1,maxUndos:d,strategy:y};var h=function(e){s(t,e);function t(){a(this,t);return i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o(t,[{key:"push",value:function e(t){var n=this.merge({undos:this.undos.push(b(t,this.merged)),redos:new u,merged:1});return n.prune()}},{key:"undo",value:function e(t){if(!this.canUndo)return this;return this.merge({undos:this.undos.pop(),redos:this.redos.push(b(t,this.merged)),merged:this.undos.last().merged})}},{key:"redo",value:function e(t){if(!this.canRedo)return this;return this.merge({undos:this.undos.push(b(t,this.merged)),redos:this.redos.pop(),merged:this.redos.first().merged})}},{key:"prune",value:function e(){return this.undos.size<=this.maxUndos?this:this.strategy(this)}},{key:"canUndo",get:function e(){return!this.undos.isEmpty()}},{key:"canRedo",get:function e(){return!this.redos.isEmpty()}},{key:"previous",get:function e(){return this.undos.last().value}},{key:"next",get:function e(){return this.redos.first().value}}],[{key:"create",value:function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(n)}}]);return t}(new c(v));h.lru=y;h.smooth=m;function y(e){return e.set("undos",e.undos.shift())}function m(e){var t=e.undos.first().merged;var n=e.undos.last().merged;var o=e.undos.count();var a=p({x0:0,y0:n},{x1:o-1,y1:t});var i=e.undos.findIndex(function(e,t){var n=e.merged;return n<a(o-1-t)});-1===i&&(i=0);var s=i+1;var l=e.undos.slice(i,s+1).toArray(),c=r(l,2),u=c[0],f=c[1];return e.set("undos",e.undos.set(i,E(u,f.merged)).delete(s))}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{value:e,merged:t}}function E(e,t){var n=e.value,r=e.merged;return{value:n,merged:r+t}}e.exports=h},"./node_modules/immutable-undo/dist/linear.js":function(e,t,n){"use strict";function r(e,t){var n=e.x0,r=e.y0;var o=t.x1,a=t.y1;return function(e){return(e-n)*(a-r)/(o-n)+r}}e.exports=r},"./node_modules/react-sticky/lib/container.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var o=n("./node_modules/react/index.js");var a=p(o);var i=n("./node_modules/react-sticky/node_modules/prop-types/index.js");var s=p(i);var l=n("./node_modules/react-dom/index.js");var c=p(l);var u=n("./node_modules/react-sticky/lib/channel.js");var f=p(u);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){h(t,e);function t(e){d(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.updateOffset=function(e){var t=e.inherited,r=e.offset;n.channel.update(function(e){e.inherited=t+r})};n.channel=new f.default({inherited:0,offset:0,node:null});return n}r(t,[{key:"getChildContext",value:function e(){return{"sticky-channel":this.channel}}},{key:"componentWillMount",value:function e(){var t=this.context["sticky-channel"];t&&t.subscribe(this.updateOffset)}},{key:"componentDidMount",value:function e(){var t=c.default.findDOMNode(this);this.channel.update(function(e){e.node=t})}},{key:"componentWillUnmount",value:function e(){this.channel.update(function(e){e.node=null});var t=this.context["sticky-channel"];t&&t.unsubscribe(this.updateOffset)}},{key:"render",value:function e(){return a.default.createElement("div",this.props,this.props.children)}}]);return t}(a.default.Component);y.contextTypes={"sticky-channel":s.default.any};y.childContextTypes={"sticky-channel":s.default.any};t.default=y;e.exports=t["default"]},"./node_modules/react-sticky/lib/sticky.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var a=n("./node_modules/react/index.js");var i=f(a);var s=n("./node_modules/react-sticky/node_modules/prop-types/index.js");var l=f(s);var c=n("./node_modules/react-dom/index.js");var u=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){h(t,e);function t(e){d(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.updateContext=function(e){var t=e.inherited,r=e.node;n.containerNode=r;n.setState({containerOffset:t,distanceFromBottom:n.getDistanceFromBottom()})};n.recomputeState=function(){var e=n.isSticky();var t=n.getHeight();var r=n.getWidth();var o=n.getXOffset();var a=n.getDistanceFromBottom();var i=n.state.isSticky!==e;n.setState({isSticky:e,height:t,width:r,xOffset:o,distanceFromBottom:a});if(i){n.channel&&n.channel.update(function(t){t.offset=e?n.state.height:0});n.props.onStickyStateChange(e)}};n.state={};return n}o(t,[{key:"componentWillMount",value:function e(){this.channel=this.context["sticky-channel"];this.channel.subscribe(this.updateContext)}},{key:"componentDidMount",value:function e(){this.on(["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],this.recomputeState);this.recomputeState()}},{key:"componentWillReceiveProps",value:function e(){this.recomputeState()}},{key:"componentWillUnmount",value:function e(){this.off(["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],this.recomputeState);this.channel.unsubscribe(this.updateContext)}},{key:"getXOffset",value:function e(){return this.refs.placeholder.getBoundingClientRect().left}},{key:"getWidth",value:function e(){return this.refs.placeholder.getBoundingClientRect().width}},{key:"getHeight",value:function e(){return u.default.findDOMNode(this.refs.children).getBoundingClientRect().height}},{key:"getDistanceFromTop",value:function e(){return this.refs.placeholder.getBoundingClientRect().top}},{key:"getDistanceFromBottom",value:function e(){if(!this.containerNode)return 0;return this.containerNode.getBoundingClientRect().bottom}},{key:"isSticky",value:function e(){if(!this.props.isActive)return false;var t=this.getDistanceFromTop();var n=this.getDistanceFromBottom();var r=this.state.containerOffset-this.props.topOffset;var o=this.state.containerOffset+this.props.bottomOffset;return t<=r&&n>=o}},{key:"on",value:function e(t,n){t.forEach(function(e){window.addEventListener(e,n)})}},{key:"off",value:function e(t,n){t.forEach(function(e){window.removeEventListener(e,n)})}},{key:"shouldComponentUpdate",value:function e(t,n){var r=this;var o=Object.keys(this.props);if(Object.keys(t).length!=o.length)return true;var a=o.every(function(e){return t.hasOwnProperty(e)&&t[e]===r.props[e]});if(!a)return true;var i=this.state;if(n.isSticky!==i.isSticky)return true;if(i.isSticky){if(n.height!==i.height)return true;if(n.width!==i.width)return true;if(n.xOffset!==i.xOffset)return true;if(n.containerOffset!==i.containerOffset)return true;if(n.distanceFromBottom!==i.distanceFromBottom)return true}return false}},{key:"render",value:function e(){var t={paddingBottom:0};var n=this.props.className;var o=r({},{transform:"translateZ(0)"},this.props.style);if(this.state.isSticky){var a={position:"fixed",top:this.state.containerOffset,left:this.state.xOffset,width:this.state.width};var s=this.state.distanceFromBottom-this.state.height-this.props.bottomOffset;this.state.containerOffset>s&&(a.top=s);t.paddingBottom=this.state.height;n+=" "+this.props.stickyClassName;o=r({},o,a,this.props.stickyStyle)}var l=this.props,c=l.topOffset,u=l.isActive,f=l.stickyClassName,d=l.stickyStyle,v=l.bottomOffset,h=l.onStickyStateChange,y=p(l,["topOffset","isActive","stickyClassName","stickyStyle","bottomOffset","onStickyStateChange"]);return i.default.createElement("div",null,i.default.createElement("div",{ref:"placeholder",style:t}),i.default.createElement("div",r({},y,{ref:"children",className:n,style:o}),this.props.children))}}]);return t}(i.default.Component);y.propTypes={isActive:l.default.bool,className:l.default.string,style:l.default.object,stickyClassName:l.default.string,stickyStyle:l.default.object,topOffset:l.default.number,bottomOffset:l.default.number,onStickyStateChange:l.default.func};y.defaultProps={isActive:true,className:"",style:{},stickyClassName:"sticky",stickyStyle:{},topOffset:0,bottomOffset:0,onStickyStateChange:function e(){}};y.contextTypes={"sticky-channel":l.default.any};t.default=y;e.exports=t["default"]},"./space/actions/diff.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toggleDiff=void 0;var r=n("./space/constants/ACTIONS.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return{type:o.default.DIFF_TOGGLE,diffActive:e}}t.toggleDiff=i},"./space/actions/revisions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});function r(e){return function(t,n,r){var o=n(),a=o.spaceID;return r.database.commit(e.toUpdate(a))}}t.updateRevisionMessage=r},"./space/components/ControlsBar/ArchivedDrafts/ArchivedDraftItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var s=n("./node_modules/react/index.js");var l=b(s);var c=n("./node_modules/aphrodite/no-important.js");var u=n("./flux/index.js");var f=n("./core/index.js");var p=n("./common/index.js");var d=n("./styleguide/index.js");var v=n("./space/components/Routing/index.js");var h=n("./space/components/ControlsBar/RevisionItem/index.js");var y=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function E(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var s=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(r=u.Connectors.database(function(e){var t=e.draft;return{user:f.User.queryByID(t.createdBy).setOptions({waitFetched:false})}}),r(o=(0,v.contentRoutingConnect)(o=(i=a=function(e){_(t,e);function t(){var n=this;var r,o,a;S(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=(r=(o=g(this,e.call.apply(e,[this].concat(s))),o),o.onClick=E(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.draft,a=t.navigate;a({toDraft:r.uid,toRootPage:true,toEditPage:false});case 2:case"end":return n.stop()}},e,n)})),r),g(o,a)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.draft,a=r.user;return l.createElement(y.default,{onClick:this.onClick,styles:[n.archivedDraftItem,y.default.STYLES.clickable]},l.createElement(y.default.Left,null,l.createElement(y.default.Avatar,null,l.createElement(p.UserAvatar,{user:a,styles:[p.UserAvatar.STYLES.sizeSM],withTooltip:false})),l.createElement(y.default.Details,null,l.createElement(y.default.Title,null,o.title),l.createElement(y.default.Subline,null,"archived -"," ",l.createElement(d.DateTryRelative,{value:o.closedAt})))))};return t}(l.Component),a.STYLES=c.StyleSheet.create({archivedDraftItem:{boxShadow:"none"}}),i))||o)||o);t.default=j},"./space/components/ControlsBar/ArchivedDrafts/ArchivedDrafts.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=d(r);n("./node_modules/immutable/dist/immutable.js");n("./core/index.js");var a=n("./styleguide/index.js");var i=n("./space/components/ControlsBar/ListPager.js");var s=p(i);var l=n("./space/components/ControlsBar/ArchivedDrafts/ArchivedDraftItem.js");var c=p(l);var u=n("./space/components/ControlsBar/ArchivedDrafts/ArchivedDraftsMobileHeader.js");var f=p(u);function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=10;var b=function(e){y(t,e);function t(){var n,r,o;v(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=h(this,e.call.apply(e,[this].concat(i))),r),r.state={max:m},r.onShowMore=function(){r.setState(function(e){var t=e.max;return{max:t+m}})},n),h(r,o)}t.prototype.render=function e(){var t=this.props,n=t.drafts,r=t.onCloseArchivedDrafts;var i=this.state.max;return o.createElement(s.default,{onShowMore:this.onShowMore},o.createElement(o.Fragment,null,o.createElement(f.default,{onCloseArchivedDrafts:r}),o.createElement(s.default.Scrollable,null,o.createElement(a.View,null,n.map(function(e){return o.createElement(c.default,{key:e.uid,draft:e})}).slice(0,i).toArray()),o.createElement(s.default.End,null,o.createElement(a.Text.TextH200,null,"End of archived drafts")))))};return t}(o.Component);t.default=b},"./space/components/ControlsBar/ArchivedDrafts/ArchivedDraftsMobileHeader.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a;var i=n("./node_modules/react/index.js");var s=v(i);var l=n("./node_modules/aphrodite/no-important.js");var c=n("./styleguide/index.js");var u=n("./icons/index.js");var f=n("./space/components/styles/layout.js");var p=d(f);function d(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(o=r=function(e){m(t,e);function t(){h(this,t);return y(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.onCloseArchivedDrafts;return s.createElement(c.View,{styles:n.mobileHeader},s.createElement(c.View,{role:"button",tabIndex:0,styles:[n.mobileHeaderBack],onClick:r},s.createElement(u.IconChevronLeft,null)),s.createElement(c.View,{styles:n.mobileHeaderTitle},s.createElement(c.Text.UIH400,null,"Archived Drafts")))};return t}(s.Component),r.STYLES=l.StyleSheet.create({mobileHeader:(a={display:"flex",height:p.default.CONTROLSBAR_HEIGHT,alignItems:"center",borderBottom:"1px solid "+c.colors.GREY_LIGHTER},a["@media "+c.MEDIA.TABLET]={display:"none"},a),mobileHeaderBack:{cursor:"pointer",flex:"0 0 auto",height:40,width:40,margin:c.spacing.S100,fontSize:18,color:c.colors.GREY_BASE,display:"flex",justifyContent:"center",alignItems:"center"},mobileHeaderTitle:{flex:"1 1 auto",display:"flex",alignItems:"center",overflow:"hidden"}}),o);t.default=b},"./space/components/ControlsBar/ArchivedDrafts/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./space/components/ControlsBar/ArchivedDrafts/ArchivedDrafts.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./space/components/ControlsBar/Bar.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,s,l,c,u,f,p,d,v,h,y,m,b,E,S,g,_,j,w;var O=n("./node_modules/react/index.js");var C=H(O);var x=n("./node_modules/aphrodite/no-important.js");var T=n("./common/index.js");var P=n("./styleguide/index.js");var R=n("./icons/index.js");var B=n("./space/constants/ROUTES.js");var A=M(B);var L=n("./space/components/Settings/index.js");var I=n("./space/components/ControlsBar/SettingsMenu.js");var k=M(I);var D=n("./space/components/styles/index.js");function M(e){return e&&e.__esModule?e:{default:e}}function H(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function G(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U=(a=o=function(e){G(t,e);function t(){Y(this,t);return N(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;return C.createElement(V,r({styles:[n.barLeftText,P.font.KINDS.TextH200]},this.props))};return t}(C.Component),o.STYLES=x.StyleSheet.create({barLeftText:(i={display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 "+P.spacing.S300+"px"},i["@media "+P.MEDIA.SMALLER_THAN_TABLET]={padding:"0 "+P.spacing.S200+"px"},i)}),a);var V=(l=s=function(e){G(t,e);function t(){Y(this,t);return N(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.styles,a=r.children;return C.createElement(P.View,{styles:[n.barLeft,o]},a)};return t}(C.Component),s.defaultProps={styles:void 0},s.Text=U,s.STYLES=x.StyleSheet.create({barLeft:{flex:1,display:"flex",flexDirection:"row",alignItems:"center"}}),l);var z=(u=c=function(e){G(t,e);function t(){Y(this,t);return N(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.styles,a=r.children;return C.createElement(P.View,{styles:[n.barRight,o]},a)};return t}(C.Component),c.defaultProps={styles:void 0},c.STYLES=x.StyleSheet.create({barRight:(f={display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 "+P.spacing.S200+"px"},f["@media "+P.MEDIA.SMALLER_THAN_TABLET]={padding:"0 "+P.spacing.S200+"px"},f)}),u);var F=(d=p=function(e){G(t,e);function t(){Y(this,t);return N(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.styles;return C.createElement(P.View,{styles:[n.barSeparator,r]})};return t}(C.Component),p.defaultProps={styles:void 0},p.STYLES=x.StyleSheet.create({barSeparator:{alignSelf:"center",height:P.sizes.S,width:1,backgroundColor:P.colors.BLUE_BASE,margin:"0px "+P.spacing.S200+"px"}}),d);var W=(h=v=function(e){G(t,e);function t(){Y(this,t);return N(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.children,a=r.onClick,i=r.dark,s=r.statePickerOpen;return C.createElement(P.View,{role:"button",tabIndex:"0",onClick:a,styles:[n.barMenuButton,i&&n.dark,s&&n.statePickerOpen]},o)};return t}(C.Component),v.STYLES=x.StyleSheet.create({barMenuButton:{pointerEvents:"auto",cursor:"pointer",position:"relative",flex:"0 0 auto",order:-1,zIndex:k.default.Z_MENU_BUTTON,width:D.layout.CONTROLSBAR_HEIGHT,height:D.layout.CONTROLSBAR_HEIGHT,backgroundColor:P.colors.BLUE_BASE,color:P.colors.WHITE,borderRadius:P.boxes.RADIUS_NORMAL,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",transition:"margin-left 0.2s ease-out"},dark:{backgroundColor:P.colors.BLUE_DARK+" !important"},statePickerOpen:(y={},y["@media "+P.MEDIA.SMALLER_THAN_TABLET]={marginLeft:-(D.layout.CONTROLSBAR_HEIGHT+P.spacing.S200)},y)}),h);var K=(b=m=function(e){G(t,e);function t(){Y(this,t);return N(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.children,a=r.withStatePickerOpen;return C.createElement("div",{className:(0,x.css)(n.barBody,a&&n.withStatePickerOpen)},o)};return t}(C.Component),m.STYLES=x.StyleSheet.create({barBody:(E={pointerEvents:"auto",position:"relative",height:D.layout.CONTROLSBAR_HEIGHT,display:"flex",flex:1,color:P.colors.BLUE_BASE,backgroundColor:P.colors.BLUE_LIGHTER,borderRadius:P.boxes.RADIUS_NORMAL,alignItems:"stretch",marginLeft:P.spacing.S300},E["@media "+P.MEDIA.SMALLER_THAN_TABLET]={marginLeft:P.spacing.S200},E),withStatePickerOpen:(S={borderTopLeftRadius:0},S["@media "+P.MEDIA.SMALLER_THAN_TABLET]={borderTopRightRadius:0},S)}),b);var X=(0,T.withModalRouter)(g=(j=_=function(e){G(t,e);function t(){var n,r,o;Y(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=N(this,e.call.apply(e,[this].concat(i))),r),r.closeSettings=function(){r.props.modalRouter.closeModal()},r.showSettings=function(){r.props.modalRouter.navigateToModal(A.default.SETTINGS)},n),N(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.children,a=r.withStatePickerOpen,i=r.modalRouter;var s=L.SettingsTab.matchSettings(i.location);var l=L.SettingsTab.getActiveTab(i.location);return C.createElement(P.ColorPalette.Brand,null,C.createElement(P.View,{styles:[n.barContainer]},o&&C.createElement(K,{withStatePickerOpen:a},o),s&&C.createElement(P.Backdrop,{onClick:this.closeSettings}),C.createElement(k.default,{isOpen:s,location:i.location,activeTab:l,onCloseTab:this.showSettings}),C.createElement(W,{onClick:s?this.closeSettings:this.showSettings,statePickerOpen:a,dark:s},s?C.createElement(R.IconArrowLeft,null):C.createElement(R.IconSlidersHorizontal,null))))};return t}(C.Component),_.defaultProps={withStatePickerOpen:false},_.Separator=F,_.Left=V,_.Right=z,_.STYLES=x.StyleSheet.create({barContainer:(w={pointerEvents:"none",display:"flex",position:"fixed",zIndex:P.zIndexes.CONTROLSBAR,bottom:0,left:0,right:0,margin:"0 auto",width:"100%",maxWidth:P.layout.CONTAINER_WIDTH+2*P.spacing.S200,padding:P.spacing.S200},w["@media "+P.MEDIA.MOBILE_LANDSCAPE]={maxWidth:P.layout.CONTAINER_WIDTH+2*P.spacing.S300,padding:P.spacing.S300},w)}),j))||g;t.default=X},"./space/components/ControlsBar/BarWithStatePicker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a;var i=n("./node_modules/react/index.js");var s=y(i);var l=n("./node_modules/unstated/lib/unstated.es.js");var c=n("./node_modules/aphrodite/no-important.js");n("./core/index.js");var u=n("./styleguide/index.js");var f=n("./space/components/ControlsBar/Bar.js");var p=h(f);var d=n("./space/components/ControlsBar/StatePicker/index.js");var v=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(o=r=function(e){E(t,e);function t(){m(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.revision,a=r.draft,i=r.left,c=r.children;return s.createElement(l.Subscribe,{to:[d.StatePickerContainer]},function(e){return s.createElement(p.default,{withStatePickerOpen:e.state.isOpen},s.createElement(p.default.Left,null,s.createElement(v.default,{revision:o,draft:a,isOpen:e.state.isOpen,openedHistory:e.state.openedHistory,openedArchivedDrafts:e.state.openedArchivedDrafts,toggle:e.toggle,toggleHistory:e.toggleHistory,toggleArchivedDrafts:e.toggleArchivedDrafts}),s.createElement(p.default.Separator,{styles:n.separator}),i),s.createElement(p.default.Right,{styles:[e.state.isOpen&&n.openBarRight]},c))})};return t}(s.Component),r.defaultProps={draft:null},r.STYLES=c.StyleSheet.create({openBarRight:(a={},a["@media "+u.MEDIA.SMALLER_THAN_TABLET]={display:"none"},a),separator:{marginLeft:-1}}),o);t.default=S},"./space/components/ControlsBar/Controls/AssetsManagerButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=c(r);var a=n("./node_modules/unstated/lib/unstated.es.js");var i=n("./styleguide/index.js");var s=n("./icons/index.js");var l=n("./space/components/AssetsManager/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){p(t,e);function t(){u(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){return o.createElement(a.Subscribe,{to:[l.AssetsManagerContainer]},function(e){var t=e.open;return o.createElement(i.Button,{kind:"link",size:"small","aria-label":"Files",styles:[i.tooltip.tooltipped,i.tooltip.top],onMouseDown:function e(){return t()},icon:o.createElement(s.IconFolder,null)})})};return t}(o.Component);t.default=d},"./space/components/ControlsBar/Controls/CancelEditButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var s=n("./node_modules/react/index.js");var l=y(s);var c=n("./node_modules/react-redux/es/index.js");var u=n("./node_modules/aphrodite/no-important.js");var f=n("./node_modules/react-router-dom/es/index.js");n("./core/index.js");var p=n("./styleguide/index.js");var d=n("./icons/index.js");var v=n("./space/components/Routing/index.js");var h=n("./space/actions/edition.js");function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(r=(0,c.connect)(),r(o=(0,v.contentRoutingConnect)(o=(i=a=function(e){E(t,e);function t(){var n,r,o;m(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=b(this,e.call.apply(e,[this].concat(i))),r),r.onClick=function(){var e=r.props,t=e.dispatch,n=e.draft;t((0,h.trackCancel)({draft:n}))},n),b(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.contentContext,a=r.draft;return l.createElement(p.Button,{"data-test":"cancel",kind:"link",size:"small",styles:n.cancel,component:f.Link,onClick:this.onClick,to:(0,v.getContentRoute)(o,{toEdit:false,toPrimary:!a.hasChanges}),icon:l.createElement(d.IconX,null)},"Cancel")};return t}(l.Component),a.STYLES=u.StyleSheet.create({cancel:{marginRight:8}}),i))||o)||o);t.default=S},"./space/components/ControlsBar/Controls/ChangesSwitch.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,s;var l=n("./node_modules/react/index.js");var c=v(l);var u=n("./node_modules/react-redux/es/index.js");var f=n("./node_modules/aphrodite/no-important.js");var p=n("./styleguide/index.js");var d=n("./space/actions/diff.js");function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(r=(0,u.connect)(function(e){var t=e.diff;return{isActive:t.active}}),r(o=(i=a=function(e){m(t,e);function t(){var n,r,o;h(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=y(this,e.call.apply(e,[this].concat(i))),r),r.onChange=function(e){r.props.dispatch((0,d.toggleDiff)(e))},n),y(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.isActive;return c.createElement(p.View,{styles:n.changesSwitch},c.createElement(p.Text.InfoH100,{styles:n.changesSwitchLabel},"Display changes"),c.createElement(p.Switch,{checked:r,onChange:this.onChange,styles:[n.changesSwitchInput]}))};return t}(c.Component),a.STYLES=f.StyleSheet.create({changesSwitch:(s={},s["@media "+p.MEDIA.SMALLER_THAN_TABLET]={display:"none"},s),changesSwitchLabel:{marginRight:p.boxes.PADDING_SMALL,textTransform:"uppercase"},changesSwitchInput:{background:p.colors.BLUE_LIGHT}}),i))||o);t.default=b},"./space/components/ControlsBar/Controls/ConflictsSwitch.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,s;var l=n("./node_modules/react/index.js");var c=v(l);var u=n("./node_modules/react-redux/es/index.js");var f=n("./node_modules/aphrodite/no-important.js");var p=n("./styleguide/index.js");var d=n("./space/actions/edition.js");function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(r=(0,u.connect)(function(e){var t=e.edition;return{isShowingOnlyConflicts:t.isShowingOnlyConflicts}}),r(o=(i=a=function(e){m(t,e);function t(){var n,r,o;h(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=y(this,e.call.apply(e,[this].concat(i))),r),r.onClick=function(){r.props.dispatch((0,d.toggleShowOnlyConflicts)())},n),y(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.isShowingOnlyConflicts;return c.createElement(p.View,{styles:n.conflictsSwitch},c.createElement(p.Text.InfoH100,{styles:n.conflictsSwitchLabel},"Only display pages with conflicts"),c.createElement(p.Switch,{checked:r,onClick:this.onClick,styles:[n.conflictsSwitchInput]}))};return t}(c.Component),a.STYLES=f.StyleSheet.create({conflictsSwitch:(s={},s["@media "+p.MEDIA.SMALLER_THAN_TABLET]={display:"none"},s),conflictsSwitchLabel:{marginRight:p.boxes.PADDING_SMALL,textTransform:"uppercase"},conflictsSwitchInput:{filter:"none",background:p.colors.BLUE_LIGHT}}),i))||o);t.default=b},"./space/components/ControlsBar/Controls/DraftStatusButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var s=n("./node_modules/react/index.js");var l=h(s);var c=n("./node_modules/aphrodite/no-important.js");var u=n("./node_modules/react-redux/es/index.js");var f=n("./styleguide/index.js");var p=n("./icons/index.js");var d=n("./space/actions/edition.js");var v=n("./space/components/Routing/index.js");function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(r=(0,u.connect)(),r(o=(0,v.contentRoutingConnect)(o=(i=a=function(e){b(t,e);function t(){var n,r,o;y(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=m(this,e.call.apply(e,[this].concat(i))),r),r.state={isPopoverOpen:false},r.onPopoverOpen=function(){r.setState({isPopoverOpen:true})},r.onPopoverClose=function(){r.setState({isPopoverOpen:false})},r.onArchive=function(){var e=r.props,t=e.draft,n=e.navigate,o=e.dispatch;n({toPrimary:true,toPrimaryVersion:true,toRootPage:true});o((0,d.closeDraft)(t))},n),m(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.state.isPopoverOpen;return l.createElement(f.Popover.Portal,{closeOnEsc:true,closeOnOutsideClick:true,onOpen:this.onPopoverOpen,onClose:this.onPopoverClose,openByClickOn:l.createElement(f.Button,{kind:"success",styles:[n.draftStatus,r&&n.active],size:"small",iconOnly:true,icon:r?l.createElement(p.IconChevronUp,null):l.createElement(p.IconChevronDown,null)})},l.createElement(f.Popover,{position:"north",align:"middle"},l.createElement(f.Menu,null,l.createElement(f.Menu.Item,{icon:l.createElement(p.IconArchive,null),onClick:this.onArchive},"Archive"))))};return t}(l.Component),a.STYLES=c.StyleSheet.create({draftStatus:{borderLeft:"1px solid "+f.colors.GREEN_DARK},active:{backgroundColor:f.colors.GREEN_DARK}}),i))||o)||o);t.default=E},"./space/components/ControlsBar/Controls/EditButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=p(a);var s=n("./node_modules/react-redux/es/index.js");var l=n("./styleguide/index.js");var c=n("./icons/index.js");var u=n("./space/components/Routing/index.js");var f=n("./space/actions/edition.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var s=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(r=(0,s.connect)(),r(o=(0,u.contentRoutingConnect)(o=function(e){y(t,e);function t(){var n=this;var r,o,a;v(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=(r=(o=h(this,e.call.apply(e,[this].concat(s))),o),o.state={hover:false},o.onClick=d(regeneratorRuntime.mark(function e(){var t,r,a,i;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.dispatch,a=t.navigate;n.next=3;return r((0,f.startDraft)());case 3:i=n.sent;a({toEdit:true,toDraft:i.uid});case 5:case"end":return n.stop()}},e,n)})),o.onMouseEnter=function(){o.setState({hover:true})},o.onMouseLeave=function(){o.setState({hover:false})},r),h(o,a)}t.prototype.render=function e(){var t=this.state.hover;return i.createElement(l.Button,{"data-test":"edit",kind:"primary",size:"small",onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,styles:[l.View.PADDING.S200Horizontal],icon:i.createElement(c.IconEdit,null)},t?"Edit as a draft":"Edit")};return t}(i.Component))||o)||o);t.default=m},"./space/components/ControlsBar/Controls/EditDraftButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r;var o=n("./node_modules/react/index.js");var a=c(o);var i=n("./styleguide/index.js");var s=n("./icons/index.js");var l=n("./space/components/Routing/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var s=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(0,l.contentRoutingConnect)(r=function(e){d(t,e);function t(){var n=this;var r,o,a;f(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=(r=(o=p(this,e.call.apply(e,[this].concat(s))),o),o.onClick=u(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props.navigate;t({toEdit:true});case 2:case"end":return n.stop()}},e,n)})),r),p(o,a)}t.prototype.render=function e(){return a.createElement(i.Button,{"data-test":"edit",kind:"primary",size:"small",onClick:this.onClick,styles:[i.View.PADDING.S200Horizontal],icon:a.createElement(s.IconEdit,null)},"Edit")};return t}(a.Component))||r;t.default=v},"./space/components/ControlsBar/Controls/PublishButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=E(a);var s=n("./node_modules/react-redux/es/index.js");var l=n("./styleguide/index.js");var c=n("./icons/index.js");var u=n("./space/actions/edition.js");var f=n("./space/components/Routing/index.js");var p=n("./space/constants/SHORTCUTS.js");var d=b(p);var v=n("./space/components/utils/EditorComboKeys.js");var h=b(v);var y=n("./space/components/ControlsBar/Controls/DraftStatusButton.js");var m=b(y);function b(e){return e&&e.__esModule?e:{default:e}}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function S(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var s=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(r=(0,s.connect)(),r(o=(0,f.contentRoutingConnect)(o=function(e){j(t,e);function t(){var n=this,r;g(this,t);var o=_(this,e.call(this));o.state={isLoading:false};o.onPublish=function(){var e=o.props,t=e.dispatch,r=e.draft,a=e.navigate;o.setState({isLoading:true},S(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return t((0,u.publishDraft)(r));case 3:a({toEdit:false,toPrimary:true,toPrimaryVersion:true,toRootPage:true},{ignoreTransition:true});n.next=11;break;case 6:n.prev=6;n.t0=n["catch"](0);if(n.t0.isConflict){n.next=11;break}o.setState({isLoading:false});throw n.t0;case 11:case"end":return n.stop()}},e,n,[[0,6]])})))};o.keyMap=(r={},r[d.default.SAVE]=o.onPublish,r);return o}t.prototype.render=function e(){var t=this.props.draft;var n=this.state.isLoading;return i.createElement(i.Fragment,null,i.createElement(l.Button.Group,null,i.createElement(l.Button,{"data-test":"publish",kind:"success",size:"small",disabled:n,onClick:this.onPublish,type:"button",icon:!n&&i.createElement(c.IconUploadCloud,null)},n?i.createElement(l.Loading,null):"Publish"),i.createElement(m.default,{draft:t})),i.createElement(h.default,{keyMap:this.keyMap}))};return t}(i.Component))||o)||o);t.default=w},"./space/components/ControlsBar/Controls/ReopenDraftButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=u(a);var s=n("./node_modules/react-redux/es/index.js");n("./core/index.js");var l=n("./styleguide/index.js");var c=n("./space/actions/edition.js");function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var s=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(r=(0,s.connect)(),r(o=function(e){v(t,e);function t(){var n=this;var r,o,a;p(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=(r=(o=d(this,e.call.apply(e,[this].concat(s))),o),o.onReopen=f(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.dispatch,a=t.draft;n.next=3;return r((0,c.reopenDraft)(a));case 3:case"end":return n.stop()}},e,n)})),r),d(o,a)}t.prototype.render=function e(){return i.createElement(l.Button,{kind:"primary",size:"small",type:"button",onClick:this.onReopen},"Reopen")};return t}(i.Component))||o);t.default=h},"./space/components/ControlsBar/Controls/RollbackButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=p(a);var s=n("./node_modules/react-redux/es/index.js");var l=n("./core/index.js");var c=n("./styleguide/index.js");var u=n("./space/actions/edition.js");var f=n("./space/components/Routing/index.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=(r=(0,s.connect)(),r(o=(0,f.contentRoutingConnect)(o=function(e){h(t,e);function t(){var n,r,o;d(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=v(this,e.call.apply(e,[this].concat(i))),r),r.state={isLoading:false},r.onClick=function(){var e=r.props,t=e.revision,n=e.draft,o=e.dispatch,a=e.navigate;var i="Do you really want to restore from this state?";if(!window.confirm(i))return;r.setState({isLoading:true},function(){n?o((0,u.rollback)(t,n)).then(function(){r.setState({isLoading:false});a({toDraft:n.uid})}):o((0,u.rollback)(t)).then(function(){r.setState({isLoading:false});a({toPrimary:true})})})},n),v(r,o)}t.prototype.render=function e(){var t=this.state.isLoading;return i.createElement(c.Button,{kind:"primary",size:"small",onClick:this.onClick,disabled:t},t?i.createElement(c.Loading,null):"Restore from this state")};return t}(i.Component))||o)||o);t.default=y},"./space/components/ControlsBar/Controls/SaveDraftButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=b(a);var s=n("./node_modules/react-redux/es/index.js");var l=n("./core/index.js");var c=n("./styleguide/index.js");var u=n("./icons/index.js");var f=n("./space/components/Routing/index.js");var p=n("./space/actions/edition.js");var d=n("./space/constants/SHORTCUTS.js");var v=m(d);var h=n("./space/components/utils/EditorComboKeys.js");var y=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function E(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var s=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(r=(0,s.connect)(function(e){var t=e.edition;var n=t.getConflictsState();return{isPublishConflict:n&&n.isPublish,unresolvedConflicts:!t.areConflictsResolved()}}),r(o=(0,f.contentRoutingConnect)(o=function(e){_(t,e);function t(){var n=this,r;S(this,t);var o=g(this,e.call(this));o.onSave=function(e){e.preventDefault();var t=o.props,r=t.dispatch,a=t.draft,i=t.navigate,s=t.isPublishConflict;o.setState({isLoading:true},E(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;if(!s){t.next=7;break}t.next=4;return r((0,p.saveAndPublishDraft)(a));case 4:i({toEdit:false,toPrimary:true,toPrimaryVersion:true,toRootPage:true},{ignoreTransition:true});t.next=10;break;case 7:t.next=9;return r((0,p.saveDraft)(a));case 9:i({toEdit:false},{ignoreTransition:true});case 10:t.next=17;break;case 12:t.prev=12;t.t0=t["catch"](0);o.setState({isLoading:false});if(t.t0 instanceof l.ConflictsError){t.next=17;break}throw t.t0;case 17:case"end":return t.stop()}},e,n,[[0,12]])})))};o.state={isLoading:false};o.keyMap=(r={},r[v.default.SAVE]=o.onSave,r);return o}t.prototype.render=function e(){var t=this.props,n=t.isPublishConflict,r=t.unresolvedConflicts;var o=this.state.isLoading;var a=n?"Publish":"Save";var s=n?"success":"primary";var l=n?i.createElement(u.IconUploadCloud,null):i.createElement(u.IconCheck,null);return i.createElement(i.Fragment,null,i.createElement(y.default,{keyMap:this.keyMap}),i.createElement(c.View,{"aria-label":r?"Resolve all conflicts before saving":"",styles:r&&[c.tooltip.tooltipped,c.tooltip.topLeft]},i.createElement(c.Button,{kind:s,size:"small",onClick:this.onSave,disabled:o||r,icon:!o&&l},o?i.createElement(c.Loading,null):a)))};return t}(i.Component))||o)||o);t.default=j},"./space/components/ControlsBar/Controls/UndoRedo.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var s=n("./node_modules/react/index.js");var l=E(s);var c=n("./node_modules/react-redux/es/index.js");var u=n("./node_modules/aphrodite/no-important.js");var f=n("./styleguide/index.js");var p=n("./icons/index.js");var d=n("./space/actions/edition.js");var v=n("./space/constants/SHORTCUTS.js");var h=b(v);var y=n("./space/components/utils/EditorComboKeys.js");var m=b(y);function b(e){return e&&e.__esModule?e:{default:e}}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(r=(0,c.connect)(function(e){var t=e.edition;return{edition:t}}),r(o=(i=a=function(e){_(t,e);function t(){var n;S(this,t);var r=g(this,e.call(this));r.onUndo=function(){var e=r.props.dispatch;e((0,d.undo)())};r.onRedo=function(){var e=r.props.dispatch;e((0,d.redo)())};r.keyMap=(n={},n[h.default.REDO]=r.onRedo,n[h.default.REDO2]=r.onRedo,n[h.default.UNDO]=r.onUndo,n);return r}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.edition;return l.createElement("div",{className:(0,u.css)(n.undoRedo)},l.createElement(m.default,{keyMap:this.keyMap}),l.createElement(f.Button,{kind:"link",size:"small",styles:n.undo,disabled:!r.canUndo,onClick:this.onUndo,icon:l.createElement(p.IconUndo,null)}),l.createElement(f.Button,{kind:"link",size:"small",disabled:!r.canRedo,onClick:this.onRedo,icon:l.createElement(p.IconRedo,null)}))};return t}(l.Component),a.STYLES=u.StyleSheet.create({undoRedo:{display:"flex"},undo:{marginRight:12},redo:{marginRight:2},undoRedoText:{fontSize:16}}),i))||o);t.default=j},"./space/components/ControlsBar/Controls/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.UndoRedo=t.AssetsManagerButton=t.SaveDraftButton=t.ReopenDraftButton=t.RollbackButton=t.PublishButton=t.EditDraftButton=t.EditButton=t.ConflictsSwitch=t.ChangesSwitch=t.CancelEditButton=void 0;var r=n("./space/components/ControlsBar/Controls/CancelEditButton.js");var o=O(r);var a=n("./space/components/ControlsBar/Controls/ChangesSwitch.js");var i=O(a);var s=n("./space/components/ControlsBar/Controls/ConflictsSwitch.js");var l=O(s);var c=n("./space/components/ControlsBar/Controls/EditButton.js");var u=O(c);var f=n("./space/components/ControlsBar/Controls/EditDraftButton.js");var p=O(f);var d=n("./space/components/ControlsBar/Controls/PublishButton.js");var v=O(d);var h=n("./space/components/ControlsBar/Controls/RollbackButton.js");var y=O(h);var m=n("./space/components/ControlsBar/Controls/ReopenDraftButton.js");var b=O(m);var E=n("./space/components/ControlsBar/Controls/SaveDraftButton.js");var S=O(E);var g=n("./space/components/ControlsBar/Controls/AssetsManagerButton.js");var _=O(g);var j=n("./space/components/ControlsBar/Controls/UndoRedo.js");var w=O(j);function O(e){return e&&e.__esModule?e:{default:e}}t.CancelEditButton=o.default;t.ChangesSwitch=i.default;t.ConflictsSwitch=l.default;t.EditButton=u.default;t.EditDraftButton=p.default;t.PublishButton=v.default;t.RollbackButton=y.default;t.ReopenDraftButton=b.default;t.SaveDraftButton=S.default;t.AssetsManagerButton=_.default;t.UndoRedo=w.default},"./space/components/ControlsBar/DraftBar.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,s,l;var c=n("./node_modules/react/index.js");var u=S(c);var f=n("./node_modules/react-redux/es/index.js");var p=n("./node_modules/aphrodite/no-important.js");var d=n("./core/index.js");var v=n("./flux/index.js");var h=n("./styleguide/index.js");var y=n("./space/components/ControlsBar/Controls/index.js");var m=n("./space/components/ControlsBar/BarWithStatePicker.js");var b=E(m);function E(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(r=(0,f.connect)(function(e){var t=e.space,n=e.userCanEdit;return{space:t,userCanEdit:n}}),o=v.Connectors.database(function(e){var t=e.space,n=e.draft;return{revision:d.Revision.queryByID({spaceID:t.uid,revisionID:n.revisionCurrent})}}),r(a=o(a=(s=i=function(e){j(t,e);function t(){g(this,t);return _(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.userCanEdit,a=r.revision,i=r.draft;if(!a)return null;return u.createElement(b.default,{revision:a,draft:i},u.createElement(h.View,{styles:[h.View.MARGIN.S200Left]},u.createElement(y.ChangesSwitch,null)),o&&(i.isOpened&&u.createElement(u.Fragment,null,u.createElement(h.View,{styles:[h.View.MARGIN.S200Left,n.hideMobile]},u.createElement(y.PublishButton,{draft:i})),u.createElement(h.View,{styles:[h.View.MARGIN.S200Left,n.hideMobile]},u.createElement(y.EditDraftButton,null)))||i.isArchived&&u.createElement(h.View,{styles:[h.View.MARGIN.S200Left,n.hideMobile]},u.createElement(y.ReopenDraftButton,{draft:i}))))};return t}(u.PureComponent),i.STYLES=p.StyleSheet.create({hideMobile:(l={},l["@media "+h.MEDIA.SMALLER_THAN_TABLET]={display:"none"},l)}),s))||a)||a);t.default=w},"./space/components/ControlsBar/DraftEditBar.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a;var i=n("./node_modules/react/index.js");var s=b(i);var l=n("./node_modules/react-redux/es/index.js");var c=n("./core/index.js");var u=n("./flux/index.js");var f=n("./styleguide/index.js");var p=n("./space/components/ControlsBar/Controls/index.js");var d=n("./space/components/ControlsBar/BarWithStatePicker.js");var v=m(d);var h=n("./space/components/ControlsBar/Bar.js");var y=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(r=(0,l.connect)(function(e){var t=e.space,n=e.edition;return{space:t,conflicts:n.getConflictsState()}}),o=u.Connectors.database(function(e){var t=e.space,n=e.draft;return{revision:c.Revision.queryByID({spaceID:t.uid,revisionID:n.revisionCurrent})}}),r(a=o(a=function(e){g(t,e);function t(){E(this,t);return S(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.draft,r=t.revision,o=t.conflicts;if(!r)return null;return s.createElement(v.default,{revision:r,draft:n,left:s.createElement(s.Fragment,null,s.createElement(p.AssetsManagerButton,null))},o&&s.createElement(p.ConflictsSwitch,null),o&&s.createElement(y.default.Separator,{styles:f.View.MARGIN.S200Horizontal}),s.createElement(p.UndoRedo,null),s.createElement(p.CancelEditButton,{draft:n}),s.createElement(p.SaveDraftButton,{draft:n}))};return t}(s.PureComponent))||a)||a);t.default=_},"./space/components/ControlsBar/GitHubSyncIndicator/GitHubStatusPopup.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=i(r);var a=n("./styleguide/index.js");function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){c(t,e);function t(){var n,r,o;s(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return o=(n=(r=l(this,e.call.apply(e,[this].concat(i))),r),r.onClose=function(){r.props.onClose()},n),l(r,o)}t.prototype.render=function e(){var t=this.props.status;var n=t.progress;var r=t.hasError||t.hasTimeout;var i=void 0;i="import"==t.type?"New content is currently being imported from GitHub.":"export"==t.type?"Your changes are currently being exported to GitHub.":"Your legacy content is currently being imported.";var s=t.type;"migration"==t.type&&(s="migrat");return o.createElement(a.ColorPalette.Brand,null,o.createElement(a.Popup,{onClose:this.onClose},o.createElement(a.Modal,{size:a.Modal.SIZES.medium},o.createElement(a.Modal.Header,null,o.createElement(a.Modal.Title,null,r?"Error while synchronizing":"Synchronizing with GitHub ("+n.toFixed(0)+"%)")),o.createElement(a.Modal.Body,null,!r&&o.createElement(o.Fragment,null,o.createElement(a.View,{styles:[a.View.MARGIN.S200Bottom]},o.createElement(a.Text.TextH400,null,i," It may takes a few minutes."))),t.hasError&&o.createElement(o.Fragment,null,o.createElement(a.Alert,{styles:[a.Alert.STYLES.danger]},o.createElement(a.Text.TextH400,null,t.error)),o.createElement(a.View,{styles:[a.View.MARGIN.S200Bottom]},o.createElement(a.Text.TextH400,null,"An error occured during the synchronization"))),!t.hasError&&t.hasTimeout&&o.createElement(a.View,{styles:[a.View.MARGIN.S200Bottom]},o.createElement(a.Text.TextH400,null,"An error occured while "+s+"ing your content.")),r&&o.createElement(a.View,null,o.createElement(a.Text.TextH400,null,"Our team has already been notified."," ",o.createElement(a.Link,{href:"https://www.gitbook.com",target:"_blank"},"Contact us")," ","for more details."))),o.createElement(a.Modal.Footer,null,o.createElement(a.View,null,o.createElement(a.Button,{kind:"cancel",onClick:this.onClose},"Close"))))))};return t}(o.Component);t.default=u},"./space/components/ControlsBar/GitHubSyncIndicator/GitHubSyncIndicator.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var s=n("./node_modules/react/index.js");var l=m(s);var c=n("./core/index.js");var u=n("./flux/index.js");var f=n("./icons/index.js");var p=n("./styleguide/index.js");var d=n("./node_modules/aphrodite/no-important.js");var v=n("./space/components/ControlsBar/GitHubSyncIndicator/GitHubStatusPopup.js");var h=y(v);function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(r=u.Connectors.database(function(e){var t=e.space;return{statuses:c.GitHubSyncStatus.queryBySpace(t.uid)}}),r(o=(i=a=function(e){S(t,e);function t(){var n,r,o;b(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=E(this,e.call.apply(e,[this].concat(i))),r),r.state={isPopupOpen:false},r.onPopupClosed=function(){r.setState({isPopupOpen:false})},r.onOpen=function(){r.setState({isPopupOpen:true})},n),E(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.statuses;var o=this.state.isPopupOpen;var a=r.first();if(!a)return null;var i=a.hasError||a.hasTimeout;return l.createElement(l.Fragment,null,l.createElement(p.View,{onClick:this.onOpen,styles:[n.githubSync]},!i&&l.createElement(p.Loading,null),i?l.createElement(p.View,{styles:[n.githubSyncText]},l.createElement(f.IconAlert,null)," GitHub Sync Error"):l.createElement(p.View,{styles:[n.githubSyncText]},"GitHub Syncing (",a.progress.toFixed(),"%)"),l.createElement(p.View,{styles:[n.separator]})),o&&l.createElement(h.default,{status:a,onClose:this.onPopupClosed}))};return t}(l.Component),a.STYLES=d.StyleSheet.create({githubSync:{fontSize:12,display:"flex",alignItems:"center",cursor:"pointer"},githubSyncText:{marginLeft:p.spacing.S100},separator:{margin:"0 "+p.spacing.S200+"px",height:"100%",border:"solid 0.5px "+p.colors.BLUE_LIGHT}}),i))||o);t.default=g},"./space/components/ControlsBar/GitHubSyncIndicator/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react-loadable/lib/index.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return n("./space/components/ControlsBar/GitHubSyncIndicator/GitHubSyncIndicator.js")})},modules:["./GitHubSyncIndicator"],webpack:function e(){return["./space/components/ControlsBar/GitHubSyncIndicator/GitHubSyncIndicator.js"]},loading:function e(){return null}});t.default=i},"./space/components/ControlsBar/HistoryList/HistoryList.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,s,l,c,u;var f=n("./node_modules/react/index.js");var p=C(f);var d=n("./node_modules/react-redux/es/index.js");var v=n("./node_modules/aphrodite/no-important.js");var h=n("./core/index.js");var y=n("./styleguide/index.js");var m=n("./icons/index.js");var b=n("./space/components/styles/index.js");var E=n("./space/components/ControlsBar/HistoryList/HistoryListItem.js");var S=O(E);var g=n("./space/components/ControlsBar/HistoryList/HistoryTimeline.js");var _=O(g);var j=n("./space/components/ControlsBar/ListPager.js");var w=O(j);function O(e){return e&&e.__esModule?e:{default:e}}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=(o=(0,d.connect)(function(e,t){var n=e.database,r=e.spaceID;var o=t.baseID,a=t.max,i=t.draft;return{revisionIDs:h.Revisioning.walk({baseID:o,max:a,getRevision:function e(t){return n.getDocument(h.Revision.queryByID({spaceID:r,revisionID:t}))},shouldStop:function e(t){return i&&i.revisionInitial===t}})}}),o(a=(s=i=function(e){P(t,e);function t(){x(this,t);return T(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.revisionIDs,a=r.max,i=r.draft,s=r.activeRevision;var l=o.last()===h.Revisioning.walk.END_ENTRY;var c=l?o.butLast():o;return p.createElement(y.View,{styles:n.historyList},p.createElement(_.default,{revisionIDs:c,activeRevisionID:s&&s.uid,isDraft:Boolean(i)}),c.map(function(e){return p.createElement(S.default,{key:e,revisionID:e,draft:i,isActive:s&&s.uid===e})}).toArray(),!l&&Array.from({length:a-o.size}).map(function(e,t){return p.createElement(S.default.Placeholder,{key:t})}))};return t}(p.Component),i.STYLES=v.StyleSheet.create({historyList:{position:"relative"}}),s))||a);var B=(c=l=function(e){P(t,e);function t(){x(this,t);return T(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.onCloseHistory,a=r.draft;return p.createElement(y.View,{styles:n.mobileHeader},p.createElement(y.View,{role:"button",tabIndex:0,styles:[n.mobileHeaderBack],onClick:o},p.createElement(m.IconChevronLeft,null)),p.createElement(y.View,{styles:n.mobileHeaderTitle},a?p.createElement(p.Fragment,null,p.createElement(y.Badge,{styles:[y.Badge.STYLES.warn]},"Draft"),p.createElement(y.Text.UIH400,{styles:n.mobileHeaderTitleText},a.title)):p.createElement(y.Badge,{styles:[y.Badge.STYLES.success]},"Published")),p.createElement(y.View,{styles:n.mobileHeaderHistory},p.createElement(m.IconHistory,null)))};return t}(p.Component),l.STYLES=v.StyleSheet.create({mobileHeader:(u={display:"flex",height:b.layout.CONTROLSBAR_HEIGHT,alignItems:"center",borderBottom:"1px solid "+y.colors.GREY_LIGHTER},u["@media "+y.MEDIA.TABLET]={display:"none"},u),mobileHeaderBack:{cursor:"pointer",flex:"0 0 auto",height:40,width:40,margin:y.spacing.S100,fontSize:18,color:y.colors.GREY_BASE,display:"flex",justifyContent:"center",alignItems:"center"},mobileHeaderTitle:{flex:"1 1 auto",display:"flex",alignItems:"center",overflow:"hidden"},mobileHeaderTitleText:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",margin:y.spacing.S100},mobileHeaderHistory:{fontSize:18,color:y.colors.GREY_BASE,margin:y.spacing.S200,marginLeft:"auto"}}),c);var A=10;var L=function(e){P(t,e);function t(){var n,r,o;x(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=T(this,e.call.apply(e,[this].concat(i))),r),r.state={max:A},r.onShowMore=function(){r.setState(function(e){var t=e.max;return{max:t+A}})},n),T(r,o)}t.prototype.componentWillReceiveProps=function e(t){var n=this.props,r=n.baseID,o=n.draft;r===t.baseID&&o===t.draft||this.setState({max:A})};t.prototype.componentDidUpdate=function e(t){var n=this.props,r=n.baseID,o=n.draft;r===t.baseID&&o===t.draft||(this.scrollable.scrollTop=0)};t.prototype.render=function e(){var t=this;var n=this.props,o=n.draft,a=n.onCloseHistory;var i=this.state.max;return p.createElement(w.default,{onShowMore:this.onShowMore},p.createElement(p.Fragment,null,p.createElement(B,{draft:o,onCloseHistory:a}),p.createElement(w.default.Scrollable,{ref:function e(n){t.scrollable=n}},p.createElement(R,r({},this.props,{max:i})),p.createElement(w.default.End,null,p.createElement(y.Text.TextH200,null,o?"End of draft history":"End of history")))))};return t}(p.Component);t.default=L},"./space/components/ControlsBar/HistoryList/HistoryListItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,s,l,c,u,f;var p=n("./node_modules/react/index.js");var d=x(p);var v=n("./node_modules/react-redux/es/index.js");var h=n("./node_modules/aphrodite/no-important.js");var y=n("./core/index.js");var m=n("./flux/index.js");var b=n("./common/index.js");var E=n("./styleguide/index.js");var S=n("./icons/index.js");var g=n("./space/components/Routing/index.js");var _=n("./space/components/styles/index.js");var j=n("./space/actions/revisions.js");var w=n("./space/components/ControlsBar/RevisionItem/index.js");var O=C(w);function C(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function R(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var B=(a=o=function(e){R(t,e);function t(){T(this,t);return P(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=A.STYLES;var r=t.STYLES;return d.createElement(O.default,{styles:[n.historyListItem]},d.createElement(O.default.Left,null,d.createElement(O.default.Avatar,{styles:r.placeholder},d.createElement(b.UserAvatar.Placeholder,{styles:[b.UserAvatar.STYLES.sizeSM]})),d.createElement(O.default.Details,null,d.createElement(O.default.Title,{placeholder:true,styles:r.placeholderText},E.Text.transformStringToPlaceholder("Lorem ipsum dolor")),d.createElement(O.default.Subline,{placeholder:true,styles:r.placeholderText},"Lea - Nov 21, 2017"))),d.createElement(O.default.Right,null,d.createElement(E.View,{styles:n.timelineSpacing})))};return t}(d.Component),o.STYLES=h.StyleSheet.create({placeholder:r({},E.animations.placeholder)}),a);var A=(i=(0,v.connect)(function(e){var t=e.spaceID;return{spaceID:t}}),s=m.Connectors.database(function(e){var t=e.spaceID,n=e.revisionID;return{revision:y.Revision.queryByID({spaceID:t,revisionID:n}).setOptions({waitFetched:false})}}),l=m.Connectors.database(function(e){var t=e.revision;if(null==t)return{};return{user:y.User.queryByID(t.createdBy).setOptions({waitFetched:false})}}),i(c=s(c=l(c=(0,g.contentRoutingConnect)(c=(f=u=function(e){R(t,e);function t(){var n,r,o;T(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=P(this,e.call.apply(e,[this].concat(i))),r),r.navigateToRevision=function(e){var t=r.props,n=t.navigate,o=t.draft;n(o?{toDraft:o.uid,toRevision:e,toEdit:false}:{toPrimary:true,toRevision:e,toEdit:false})},r.onClick=function(){var e=r.props.revision;e&&r.navigateToRevision(e.uid)},r.onClickRollback=function(e){var t=r.props.revision;e.preventDefault();e.stopPropagation();t&&t.rollbackOf&&r.navigateToRevision(t.rollbackOf)},r.onMessageChanged=function(e){var t=r.props,n=t.dispatch,o=t.revision;if(!o)return;n((0,j.updateRevisionMessage)(o.merge({message:e})))},n),P(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.revision,a=r.user,i=r.isActive;if(!o||!a)return d.createElement(B,null);return d.createElement(O.default,{role:"button",tabIndex:0,styles:[n.historyListItem,!i&&O.default.STYLES.clickable,i&&O.default.STYLES.activeBorder],onClick:this.onClick},d.createElement(O.default.Left,null,d.createElement(O.default.Avatar,null,d.createElement(b.UserAvatar,{withTooltip:false,user:a,styles:[b.UserAvatar.STYLES.sizeSM]})),d.createElement(O.default.Details,null,d.createElement(O.default.TitleInput,{placeholderText:"Describe what changed",initialTitle:o.defaultMessage,onTitleChanged:this.onMessageChanged}),d.createElement(O.default.Subline,{badge:o.isRollback&&d.createElement(E.Badge,{onClick:this.onClickRollback,styles:[E.Badge.STYLES.primary,n.statusBadgeClickable],icon:d.createElement(S.IconArrowUp,null)},"Restored")},a.shortDisplayName," -"," ",d.createElement(E.DateTryRelative,{value:o.createdAt,absolutePrefix:""})))),d.createElement(O.default.Right,null,d.createElement(E.View,{styles:n.timelineSpacing})))};return t}(d.Component),u.Placeholder=B,u.STYLES=h.StyleSheet.create({historyListItem:{boxShadow:"none"},statusBadgeClickable:{cursor:"pointer",":hover":{backgroundColor:E.colors.BLUE_LIGHT}},timelineSpacing:{width:_.layout.CONTROLSBAR_HEIGHT}}),f))||c)||c)||c)||c);t.default=A},"./space/components/ControlsBar/HistoryList/HistoryTimeline.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=u(a);var s=n("./node_modules/aphrodite/no-important.js");var l=n("./styleguide/index.js");var c=n("./space/components/styles/index.js");function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(o=r=function(e){d(t,e);function t(){f(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.revisionIDs,a=r.activeRevisionID,l=r.isDraft;var c=l?n.historyTimelineItemActiveDraft:n.historyTimelineItemActive;return i.createElement("div",{className:(0,s.css)(n.historyTimeline)},o.map(function(e){return i.createElement("div",{key:e,className:(0,s.css)(n.historyTimelineItem,e===a&&c)})}).toArray())};return t}(i.Component),r.STYLES=s.StyleSheet.create({historyTimeline:{position:"absolute",top:0,right:0,pointerEvents:"none"},historyTimelineItem:{position:"relative",width:c.layout.CONTROLSBAR_HEIGHT,height:c.layout.CONTROLSBAR_HEIGHT,":before":{content:'" "',position:"absolute",zIndex:1,top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"100%",width:10,height:10,backgroundColor:l.colors.GREY_LIGHTER},":after":{content:'" "',position:"absolute",zIndex:0,top:0,left:"50%",transform:"translateX(-50%)",width:1,height:"100%",backgroundColor:l.colors.GREY_LIGHTER},":first-child:after":{top:"50%",height:"50%"},":last-child:after":{height:"50%"}},historyTimelineItemActive:{":before":{backgroundColor:l.colors.GREEN_BASE}},historyTimelineItemActiveDraft:{":before":{backgroundColor:l.colors.ORANGE_LIGHT}}}),o);t.default=v},"./space/components/ControlsBar/HistoryList/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./space/components/ControlsBar/HistoryList/HistoryList.js");Object.defineProperty(t,"default",{enumerable:true,get:function e(){return o(r).default}});function o(e){return e&&e.__esModule?e:{default:e}}},"./space/components/ControlsBar/ListPager.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,s,l,c,u;var f=n("./node_modules/react/index.js");var p=y(f);var d=n("./node_modules/aphrodite/no-important.js");var v=n("./styleguide/index.js");var h=n("./space/components/styles/index.js");function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=(o=r=function(e){E(t,e);function t(){m(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.children;return p.createElement(v.View,{styles:n.listPagerScrollable},r)};return t}(p.Component),r.STYLES=d.StyleSheet.create({listPagerScrollable:(a={flex:1,display:"flex",flexDirection:"column",height:"100%",maxHeight:4.5*h.layout.CONTROLSBAR_HEIGHT,overflowY:"auto"},a["@media "+v.MEDIA.SMALLER_THAN_TABLET]={maxHeight:3.5*h.layout.CONTROLSBAR_HEIGHT},a)}),o);var g=(s=i=function(e){E(t,e);function t(){m(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.children;return p.createElement(v.View,{styles:n.listPagerEnd},r)};return t}(p.Component),i.STYLES=d.StyleSheet.create({listPagerEnd:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:v.colors.GREY_BASE,borderTop:"1px solid "+v.colors.GREY_LIGHTER,marginTop:-1,minHeight:h.layout.CONTROLSBAR_HEIGHT,position:"relative",zIndex:1}}),s);var _=(c=l=function(e){E(t,e);function t(){m(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.children,a=r.onShowMore;return p.createElement(v.InfiniteScroll,{onTrigger:a,styles:[n.listPager]},o)};return t}(p.Component),l.Scrollable=S,l.End=g,l.STYLES=d.StyleSheet.create({listPager:(u={display:"flex",flexDirection:"column",minHeight:"100%",border:"1px solid "+v.colors.GREY_LIGHTER,borderBottom:0,borderTopRightRadius:v.boxes.RADIUS_NORMAL,backgroundColor:"#fff",boxShadow:v.boxes.SHADOW_HIGH,zIndex:10,marginLeft:-1},u["@media "+v.MEDIA.SMALLER_THAN_TABLET]={position:"absolute",zIndex:1,left:0,bottom:0,width:"100%",borderTopLeftRadius:v.boxes.RADIUS_NORMAL,marginLeft:0},u)}),c);t.default=_},"./space/components/ControlsBar/RevisionBar.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,s;var l=n("./node_modules/react/index.js");var c=E(l);var u=n("./node_modules/react-redux/es/index.js");var f=n("./node_modules/aphrodite/no-important.js");n("./core/index.js");var p=n("./styleguide/index.js");var d=n("./space/components/ControlsBar/Bar.js");var v=b(d);var h=n("./space/components/ControlsBar/Controls/index.js");var y=n("./space/components/ControlsBar/BarWithStatePicker.js");var m=b(y);function b(e){return e&&e.__esModule?e:{default:e}}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(r=(0,u.connect)(function(e){var t=e.userCanEdit,n=e.userIsSiteAdmin,r=e.user,o=e.membership;return{userCanEdit:t,userIsSiteAdmin:n,isLoggedIn:r.isLoggedIn,isMember:Boolean(o)}}),r(o=(i=a=function(e){_(t,e);function t(){S(this,t);return g(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.userCanEdit,a=r.userIsSiteAdmin,i=r.revision,s=r.draft,l=r.isLoggedIn,u=r.isMember;if(!l)return null;if(!u&&!a)return c.createElement(v.default,null);return c.createElement(m.default,{revision:i,draft:s},c.createElement(p.View,{styles:[p.View.MARGIN.S200Horizontal]},c.createElement(h.ChangesSwitch,null)),o&&c.createElement(p.View,{styles:[n.revisionBarHideMobile]},c.createElement(h.RollbackButton,{revision:i,draft:s})))};return t}(c.PureComponent),a.STYLES=f.StyleSheet.create({revisionBarHideMobile:(s={},s["@media "+p.MEDIA.SMALLER_THAN_TABLET]={display:"none"},s)}),i))||o);t.default=j},"./space/components/ControlsBar/RevisionItem/RevisionItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,s,l,c,u,f,p,d,v,h,y,m;var b=n("./node_modules/react/index.js");var E=x(b);var S=n("./node_modules/aphrodite/no-important.js");var g=n("./common/index.js");var _=n("./styleguide/index.js");var j=n("./space/components/ControlsBar/RevisionItem/RevisionItemTitleInput.js");var w=C(j);var O=n("./space/components/styles/index.js");function C(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function T(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function B(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=(a=o=function(e){B(t,e);function t(){P(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.children,a=r.styles;return E.createElement(_.View,{styles:[n.revisionItemAvatar,a]},o)};return t}(E.Component),o.STYLES=S.StyleSheet.create({revisionItemAvatar:{flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center",width:g.UserAvatar.AVATAR_SIZE.sm,height:g.UserAvatar.AVATAR_SIZE.sm,margin:_.spacing.S100}}),a);var L=(s=i=function(e){B(t,e);function t(){P(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.children;return E.createElement(_.View,{styles:[n.revisionItemDetails]},r)};return t}(E.Component),i.STYLES=S.StyleSheet.create({revisionItemDetails:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden",padding:_.spacing.S100,paddingLeft:0}}),s);var I=(c=l=function(e){B(t,e);function t(){P(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.children,a=r.styles,i=r.placeholder;return E.createElement(_.Text.UIH300,{placeholder:i,styles:[n.revisionItemTitle,a]},o)};return t}(E.Component),l.STYLES=S.StyleSheet.create({revisionItemTitle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:2}}),c);var k=(f=u=function(e){B(t,e);function t(){P(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.children,a=r.badge,i=r.styles,s=r.placeholder;return E.createElement(_.View,{styles:n.revisionItemSubline},a,E.createElement(_.Text.TextH200,{placeholder:s,styles:[n.revisionItemSublineText,i]},o))};return t}(E.Component),u.STYLES=S.StyleSheet.create({revisionItemSubline:{display:"flex",alignItems:"center"},revisionItemSublineText:{color:_.colors.GREY_BASE,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginLeft:_.spacing.S100,":first-child":{marginLeft:0}}}),f);var D=(d=p=function(e){B(t,e);function t(){P(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.onClick,a=r.children;return E.createElement(_.View,{role:"button",tabIndex:0,onClick:o,styles:n.revisionItemLeft},a)};return t}(E.Component),p.STYLES=S.StyleSheet.create({revisionItemLeft:{flex:1,display:"flex",alignItems:"center",width:"100%",overflow:"hidden"}}),d);var M=(h=v=function(e){B(t,e);function t(){P(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.children;return E.createElement(_.View,{styles:n.revisionItemRight},r)};return t}(E.Component),v.STYLES=S.StyleSheet.create({revisionItemRight:{display:"flex",alignItems:"center"}}),h);var H=(m=y=function(e){B(t,e);function t(){P(this,t);return R(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var o=this.props,a=o.styles,i=o.children,s=T(o,["styles","children"]);return E.createElement(_.View,r({styles:[n.revisionItem,a]},s),i)};return t}(E.Component),y.Avatar=A,y.Details=L,y.Title=I,y.TitleInput=w.default,y.Subline=k,y.Left=D,y.Right=M,y.STYLES=S.StyleSheet.create({revisionItem:{display:"flex",height:O.layout.CONTROLSBAR_HEIGHT,borderBottom:"1px solid "+_.colors.GREY_LIGHTER,boxShadow:"inset 1px 0 0 "+_.colors.GREY_LIGHTER,":last-child":{borderBottom:0}},clickable:{cursor:"pointer",":hover":{backgroundColor:_.colors.GREY_LIGHTEST}},activeBorder:{boxShadow:"inset 4px 0 0 "+_.colors.BLUE_BASE},grayBackground:{backgroundColor:_.colors.GREY_LIGHTEST}}),m);t.default=H},"./space/components/ControlsBar/RevisionItem/RevisionItemTitleInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a;var i=n("./node_modules/react/index.js");var s=u(i);var l=n("./node_modules/aphrodite/no-important.js");var c=n("./styleguide/index.js");function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(a=o=function(e){d(t,e);function t(n){f(this,t);var r=p(this,e.call(this,n));r.onChange=function(e){r.setState({value:e.target.value})};r.onFocus=function(){r.inputRef.current&&r.inputRef.current.select()};r.onKeyDown=function(e){var t=13;e.keyCode===t&&r.inputRef.current&&r.inputRef.current.blur()};r.onSubmit=function(){var e=r.props.onTitleChanged;var t=r.state,n=t.initialTitle,o=t.value;o!==n&&e(o)};r.onClick=function(e){e.stopPropagation()};r.inputRef=s.createRef();r.state={initialTitle:n.initialTitle,value:n.initialTitle};return r}t.getDerivedStateFromProps=function e(t,n){if(t.initialTitle!==n.initialTitle)return{initialTitle:t.initialTitle,value:t.initialTitle};return null};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.styles,a=r.placeholderText;var i=this.state.value;return s.createElement(c.AutosizeInput,{ref:this.inputRef,title:i,onClick:this.onClick,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onSubmit,onKeyDown:this.onKeyDown,value:i,placeholder:a,inputClassName:(0,l.css)(n.titleInput,o)})};return t}(s.Component),o.STYLES=l.StyleSheet.create({titleInput:r({display:"inline-block",alignSelf:"stretch",overflow:"hidden",textOverflow:"ellipsis",marginBottom:2,cursor:"text"},c.font.FONTS.UIH300,{border:0,padding:0,background:"transparent",maxWidth:"100%",color:c.colors.BLACK,"::placeholder":{color:c.colors.GREY_BASE},":focus":{cursor:"auto"}})}),a);t.default=v},"./space/components/ControlsBar/RevisionItem/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./space/components/ControlsBar/RevisionItem/RevisionItem.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./space/components/ControlsBar/SettingsMenu.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,s,l,c,u,f;var p=n("./node_modules/react/index.js");var d=S(p);var v=n("./node_modules/aphrodite/no-important.js");var h=n("./styleguide/index.js");var y=n("./icons/index.js");var m=n("./common/index.js");var b=n("./space/components/Settings/index.js");var E=n("./space/components/styles/index.js");function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=h.zIndexes.CONTROLSBAR-1;var O=h.zIndexes.CONTROLSBAR;var C=h.zIndexes.CONTROLSBAR-2;var x=h.zIndexes.CONTROLSBAR+1;var T=(o=r=function(e){j(t,e);function t(){g(this,t);return _(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.isOpen,a=r.location,i=r.activeTab,s=r.onCloseTab;return d.createElement(d.Fragment,null,o&&d.createElement(P,{onClose:s,isOpen:Boolean(i)},d.createElement(h.TabsPage.MobileHeader,{title:i&&i.defaultTitle}),d.createElement(b.SettingsTab,{isModal:true,location:a})),d.createElement(h.TabsPage.Context,{primary:true},d.createElement(b.SettingsNavigation,{isModal:true,active:i&&i.id,isExpanded:o,styles:[n.fixedSideBar,o&&n.sideBarOpen]})))};return t}(d.Component),r.Z_MENU_BUTTON=O,r.STYLES=v.StyleSheet.create({fixedSideBar:(a={position:"fixed",left:0,top:0,bottom:0,maxHeight:"100%",transform:"translateX(-100%)",opacity:0,zIndex:w,pointerEvents:"auto",transitionProperty:"transform, opacity",transitionDuration:"0.2s",transitionTimingFunction:"ease-out",paddingBottom:2*h.spacing.S200+E.layout.CONTROLSBAR_HEIGHT},a["@media "+h.MEDIA.MOBILE_LANDSCAPE]={paddingBottom:2*h.spacing.S300+E.layout.CONTROLSBAR_HEIGHT},a),sideBarOpen:{opacity:1,transform:"translateX(0%)"}}),o);var P=(s=i=function(e){j(t,e);function t(){var n,r,o;g(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=_(this,e.call.apply(e,[this].concat(i))),r),r.onScroll=function(){r.scrollable.scrollTop=0},n),_(r,o)}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.children,i=o.isOpen,s=o.onClose;return d.createElement(m.ScrollToTop,{onScroll:this.onScroll,isModal:true},d.createElement(h.View,{styles:r.position},d.createElement(h.View,{styles:[r.tabDrawer,i&&r.tabDrawerOpen],elementRef:function e(t){n.scrollable=t}},a,d.createElement("button",{onClick:s,className:(0,v.css)(r.closeX)},d.createElement(y.IconX,null)))))};return t}(d.Component),i.STYLES=v.StyleSheet.create({position:(l={position:"fixed",left:0,top:0,bottom:0,maxHeight:"100%",width:"calc((100% - "+h.layout.CONTAINER_WIDTH+"px - 2 * "+h.layout.CONTAINER_PADDING+"px) / 2 + "+h.TabsPage.SIDEBAR_TOTAL_WIDTH+"px)",minWidth:E.layout.SIDEBAR_TOTAL_WIDTH,paddingLeft:"calc((100% - "+h.layout.CONTAINER_WIDTH+"px - 2 * "+h.layout.CONTAINER_PADDING+"px) / 2 - "+h.spacing.S300+"px)",zIndex:C},l["@media "+h.TabsPage.MEDIA_SIDE_IS_TOGGABLE]={zIndex:x},l),tabDrawer:(c={pointerEvents:"auto",position:"absolute",left:"100%",top:0,bottom:0,width:h.TabsPage.TABBODY_WIDTH,maxWidth:"calc(100vw - "+h.TabsPage.SIDEBAR_TOTAL_WIDTH+"px)",background:h.colors.GREY_LIGHTEST,overflow:"auto",opacity:0,transform:"translateX(-100%)",transition:"transform 0.2s ease-in, opacity 0.2s step-end"},c["@media "+h.TabsPage.MEDIA_SIDE_IS_TOGGABLE]={pointerEvents:"none",width:"100vw",left:0,maxWidth:"initial",transform:"initial",transition:"opacity 0.1s linear"},c),tabDrawerOpen:(u={opacity:1,transform:"translateX(0%)",transition:"transform 0.2s ease-out, opacity 0.2s step-start"},u["@media "+h.TabsPage.MEDIA_SIDE_IS_TOGGABLE]={pointerEvents:"auto",transform:"initial",transition:"opacity 0.1s linear"},u),closeX:(f={cursor:"pointer",background:"none",border:"none",position:"absolute",top:50,right:50,fontSize:"18px",height:40,width:40},f["@media "+h.TabsPage.MEDIA_SIDE_IS_TOGGABLE]={top:10,right:10},f)}),s);t.default=T},"./space/components/ControlsBar/StatePicker/ArchivedDraftsMenu.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=m(a);var s=n("./node_modules/aphrodite/no-important.js");var l=n("./styleguide/index.js");var c=n("./icons/index.js");var u=n("./space/components/ControlsBar/RevisionItem/index.js");var f=y(u);var p=n("./space/components/ControlsBar/StatePicker/SubMenuButtonWrapper.js");var d=y(p);var v=n("./space/components/ControlsBar/StatePicker/SubMenuChevron.js");var h=y(v);function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(o=r=function(e){S(t,e);function t(){b(this,t);return E(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.onOpen,o=n.onClose,a=n.isOpen;var s=t.STYLES;return i.createElement(f.default,{onClick:a?o:r,styles:[a&&f.default.STYLES.open,f.default.STYLES.clickable]},i.createElement(f.default.Left,null,i.createElement(f.default.Avatar,null,i.createElement(l.View,{styles:[s.icon]},i.createElement(c.IconArchive,null))),i.createElement(f.default.Details,null,i.createElement(f.default.Title,null,"Archived Drafts"))),i.createElement(f.default.Right,null,i.createElement(d.default,null,function(e){var t=e.isHover;return i.createElement(l.View,{styles:[s.paddingIcon]},i.createElement(h.default,{isHover:t}))})))};return t}(i.Component),r.STYLES=s.StyleSheet.create({paddingIcon:{paddingLeft:15},icon:{fontSize:18,color:l.colors.GREY_BASE}}),o);t.default=g},"./space/components/ControlsBar/StatePicker/DraftItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=m(a);var s=n("./node_modules/react-redux/es/index.js");n("./core/index.js");var l=n("./common/index.js");var c=n("./styleguide/index.js");var u=n("./space/components/Routing/index.js");var f=n("./space/actions/edition.js");var p=n("./space/components/ControlsBar/RevisionItem/index.js");var d=y(p);var v=n("./space/components/ControlsBar/StatePicker/HistoryButton.js");var h=y(v);function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(r=(0,s.connect)(),r(o=(0,u.contentRoutingConnect)(o=function(e){S(t,e);function t(){var n,r,o;b(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=E(this,e.call.apply(e,[this].concat(i))),r),r.onClick=function(){var e=r.props,t=e.draft,n=e.navigate;n({toDraft:t.uid,toRootPage:true,toEdit:false})},r.onOpenHistory=function(e){e.stopPropagation();var t=r.props,n=t.draft,o=t.onOpenHistory;o({baseID:n.revisionCurrent,draft:n})},r.onCloseHistory=function(e){e.stopPropagation();r.props.onCloseHistory()},r.onDraftTitleChanged=function(e){var t=r.props,n=t.dispatch,o=t.draft;if(!o)return;n((0,f.renameDraft)(o,e))},n),E(r,o)}t.prototype.render=function e(){var t=this.props,n=t.draft,r=t.activeRevision,o=t.isActive,a=t.isOpen;var s=Boolean(o&&r&&r.uid!==n.revisionCurrent);var u=o&&!s;return i.createElement(d.default,{styles:[!u&&d.default.STYLES.clickable,u&&d.default.STYLES.activeBorder,a&&d.default.STYLES.grayBackground]},i.createElement(d.default.Left,{onClick:this.onClick},i.createElement(d.default.Avatar,null,i.createElement(l.UserAvatar,{withTooltip:false,userID:n.createdBy,styles:[l.UserAvatar.STYLES.sizeSM]})),i.createElement(d.default.Details,null,i.createElement(d.default.TitleInput,{placeholderText:"Describe draft's changes",initialTitle:n.title,onTitleChanged:this.onDraftTitleChanged}),i.createElement(d.default.Subline,{badge:i.createElement(c.Badge,{styles:[c.Badge.STYLES.warn]},"Draft")},"modified"," ",i.createElement(c.DateTryRelative,{value:n.lastModifiedAt})))),i.createElement(d.default.Right,null,i.createElement(h.default,{isActive:s,onClick:a?this.onCloseHistory:this.onOpenHistory})))};return t}(i.Component))||o)||o);t.default=g},"./space/components/ControlsBar/StatePicker/HistoryButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=h(a);var s=n("./icons/index.js");var l=n("./node_modules/aphrodite/no-important.js");var c=n("./styleguide/index.js");var u=n("./space/components/ControlsBar/StatePicker/SubMenuChevron.js");var f=v(u);var p=n("./space/components/ControlsBar/StatePicker/SubMenuButtonWrapper.js");var d=v(p);function v(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(o=r=function(e){b(t,e);function t(){y(this,t);return m(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.isActive,a=r.onClick;return i.createElement(d.default,{onClick:a},function(e){var t=e.isHover;return i.createElement(i.Fragment,null,i.createElement(s.IconHistory,{styles:[n.historyIcon,o&&n.historyIconActive]}),i.createElement(f.default,{isHover:t}))})};return t}(i.Component),r.STYLES=l.StyleSheet.create({historyIcon:{fontSize:18},historyIconActive:{color:c.colors.BLUE_BASE}}),o);t.default=E},"./space/components/ControlsBar/StatePicker/PrimaryRevisionItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a;var i=n("./node_modules/react/index.js");var s=b(i);var l=n("./node_modules/react-redux/es/index.js");var c=n("./core/index.js");var u=n("./flux/index.js");var f=n("./styleguide/index.js");var p=n("./space/components/Routing/index.js");var d=n("./space/components/ControlsBar/RevisionItem/index.js");var v=m(d);var h=n("./space/components/ControlsBar/StatePicker/HistoryButton.js");var y=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(r=(0,l.connect)(function(e){var t=e.space;return{space:t}}),o=u.Connectors.database(function(e){var t=e.space;return{revision:c.Revision.queryByID({spaceID:t.uid,revisionID:t.primaryRevision})}}),r(a=o(a=(0,p.contentRoutingConnect)(a=function(e){g(t,e);function t(){var n,r,o;E(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=S(this,e.call.apply(e,[this].concat(i))),r),r.onClick=function(){var e=r.props.navigate;e({toPrimary:true,toRootPage:true,toEdit:false})},r.onOpenHistory=function(e){e.stopPropagation();var t=r.props,n=t.revision,o=t.onOpenHistory;o({baseID:n.uid})},r.onCloseHistory=function(e){e.stopPropagation();r.props.onCloseHistory()},n),S(r,o)}t.prototype.render=function e(){var t=this.props,n=t.revision,r=t.isActive,o=t.activeRevision,a=t.isOpen;var i=Boolean(r&&o&&o.uid!==n.uid);var l=r&&!i;return s.createElement(v.default,{styles:[!l&&v.default.STYLES.clickable,l&&v.default.STYLES.activeBorder,a&&v.default.STYLES.grayBackground]},s.createElement(v.default.Left,{onClick:this.onClick},s.createElement(v.default.Avatar,null),s.createElement(v.default.Details,null,s.createElement(v.default.Subline,{badge:s.createElement(f.Badge,{styles:[f.Badge.STYLES.success]},"Published")},"modified"," ",s.createElement(f.DateTryRelative,{value:n.createdAt})))),s.createElement(v.default.Right,null,s.createElement(y.default,{isActive:i,onClick:a?this.onCloseHistory:this.onOpenHistory})))};return t}(s.Component))||a)||a)||a);t.default=_},"./space/components/ControlsBar/StatePicker/StateList.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,s;n("./node_modules/immutable/dist/immutable.js");var l=n("./node_modules/aphrodite/no-important.js");var c=n("./node_modules/react/index.js");var u=g(c);var f=n("./core/index.js");var p=n("./styleguide/index.js");var d=n("./space/components/styles/index.js");var v=n("./space/components/ControlsBar/StatePicker/DraftItem.js");var h=S(v);var y=n("./space/components/ControlsBar/StatePicker/PrimaryRevisionItem.js");var m=S(y);var b=n("./space/components/ControlsBar/StatePicker/ArchivedDraftsMenu.js");var E=S(b);function S(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=(r=p.Skeleton.createSkeletonProvider(function(e){return e.userCanEdit&&!e.draftsFetched}),o=p.Skeleton.connectToSkeleton(),r(a=o(a=(s=i=function(e){w(t,e);function t(){_(this,t);return j(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=this.props,r=n.openDrafts,o=n.archivedDrafts,a=n.activeDraft,i=n.activeRevision,s=n.onOpenHistory,l=n.onCloseHistory,c=n.onOpenArchivedDrafts,f=n.onCloseArchivedDrafts,d=n.openHistory,v=n.openArchivedDrafts,y=n.isLoading;var b=t.STYLES;return u.createElement(p.View,{styles:[b.stateList,y&&b.loading]},u.createElement(p.View,{styles:[b.stateListScrollable]},r.toArray().map(function(e){return u.createElement(h.default,{key:e.uid,draft:e,isActive:Boolean(a&&a.uid===e.uid),activeRevision:i,onOpenHistory:s,onCloseHistory:l,isOpen:d&&d.draft&&d.draft.uid===e.uid})}),o.size>0&&u.createElement(E.default,{drafts:o,onOpen:c,onClose:f,isOpen:v})),u.createElement(m.default,{isActive:!a,activeRevision:i,onOpenHistory:s,onCloseHistory:l,isOpen:d&&!d.draft}))};return t}(u.Component),i.STYLES=l.StyleSheet.create({stateList:{position:"relative",border:"1px solid "+p.colors.GREY_LIGHTER,borderLeft:0,borderBottom:0,borderRadius:p.boxes.RADIUS_NORMAL+"px "+p.boxes.RADIUS_NORMAL+"px 0 0",backgroundColor:"#fff",boxShadow:p.boxes.SHADOW_HIGH,overflow:"hidden",":after":{content:'" "',position:"absolute",left:0,bottom:d.layout.CONTROLSBAR_HEIGHT,height:1,width:"100%",backgroundColor:p.colors.GREY_LIGHTER}},loading:{pointerEvents:"none"},stateListScrollable:{maxHeight:3.5*d.layout.CONTROLSBAR_HEIGHT,overflowY:"auto"}}),s))||a)||a);t.default=O},"./space/components/ControlsBar/StatePicker/StatePicker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,s,l,c,u,f;var p=n("./node_modules/react/index.js");var d=L(p);var v=n("./node_modules/aphrodite/no-important.js");var h=n("./node_modules/immutable/dist/immutable.js");var y=n("./node_modules/react-redux/es/index.js");var m=n("./core/index.js");var b=n("./flux/index.js");var E=n("./styleguide/index.js");var S=n("./icons/index.js");var g=n("./space/components/Routing/index.js");var _=n("./space/components/styles/index.js");var j=n("./space/actions/edition.js");var w=n("./space/components/ControlsBar/RevisionItem/index.js");var O=A(w);var C=n("./space/components/ControlsBar/HistoryList/index.js");var x=A(C);var T=n("./space/components/ControlsBar/StatePicker/StateList.js");var P=A(T);var R=n("./space/components/ControlsBar/ArchivedDrafts/index.js");var B=A(R);function A(e){return e&&e.__esModule?e:{default:e}}function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function D(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M=(r=(0,y.connect)(function(e){var t=e.spaceID,n=e.userCanEdit;return{spaceID:t,userCanEdit:n}}),o=b.Connectors.database(function(e){var t=e.revision;return{author:m.User.queryByID(t.createdBy)}}),a=b.Connectors.database(function(e){var t=e.spaceID,n=e.userCanEdit;return{drafts:n?m.Draft.queryBySpace(t).setOptions({waitFetched:false}):null}}),r(i=o(i=a(i=(0,g.contentRoutingConnect)(i=(l=s=function(e){D(t,e);function t(){var n,r,o;I(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=k(this,e.call.apply(e,[this].concat(i))),r),r.onOpen=function(){r.props.toggle(true)},r.onClose=function(){r.props.toggle(false);r.props.toggleHistory(null)},r.onOpenHistory=function(e){r.props.toggleHistory(e)},r.onCloseHistory=function(){r.props.toggleHistory(null)},r.onOpenArchivedDrafts=function(){r.props.toggleArchivedDrafts(true)},r.onCloseArchivedDrafts=function(){r.props.toggleArchivedDrafts(false)},r.onDraftTitleChanged=function(e){var t=r.props,n=t.dispatch,o=t.draft;if(!o)return;n((0,j.renameDraft)(o,e))},n),k(r,o)}t.prototype.componentWillReceiveProps=function e(t){this.didRenderAsClosed=this.didRenderAsClosed||!this.props.isOpen};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.isOpen,a=r.openedHistory,i=r.openedArchivedDrafts,s=r.revision,l=r.draft,c=r.author,u=r.contentContext;var f=Boolean(u.revisionID);var p=this.props.drafts?this.props.drafts.sort(function(e,t){return t.lastModifiedAt-e.lastModifiedAt}):(0,h.OrderedMap)();var v=p.filter(function(e){return e.isArchived});var y=p.filter(function(e){return e.isOpened&&e.hasChanges});var m=l?d.createElement(E.Badge,{styles:[E.Badge.STYLES.warn],icon:f&&d.createElement(S.IconHistory,null)},"Draft"):d.createElement(E.Badge,{styles:[E.Badge.STYLES.success],icon:f&&d.createElement(S.IconHistory,null)},"Published");var b=function(){if(f)return d.createElement(d.Fragment,null,c.shortDisplayName," -"," ",d.createElement(E.DateTryRelative,{value:s.createdAt,absolutePrefix:""}));if(l&&l.isArchived)return d.createElement(d.Fragment,null,"archived - ",d.createElement(E.DateTryRelative,{value:l.closedAt}));if(l&&l.isMerged)return d.createElement(d.Fragment,null,"published - ",d.createElement(E.DateTryRelative,{value:l.closedAt}));return d.createElement(d.Fragment,null,"modified ",d.createElement(E.DateTryRelative,{value:s.createdAt}))}();return d.createElement(E.View,{styles:[n.statePicker]},d.createElement(E.Popover.ManualPortal,{styles:[n.statePickerPortal],onClose:this.onClose,isOpen:o,closeOnOutsideClick:true,closeOnEsc:true,closeOnScroll:false,anchor:d.createElement(E.View,{role:"button",tabIndex:0,styles:[n.statePickerButton,o&&n.statePickerButtonOpen],onClick:o?this.onClose:this.onOpen},d.createElement(O.default.Avatar,{styles:[n.statePickerArrow,o&&n.statePickerArrowOpen]},d.createElement(S.IconChevronDown,null)),d.createElement(O.default.Details,null,l&&d.createElement(O.default.TitleInput,{placeholderText:"Describe draft's changes",initialTitle:l.title,onTitleChanged:this.onDraftTitleChanged,styles:[n.statePickerTitleText,o&&n.statePickerOpenTitleText]}),d.createElement(O.default.Subline,{styles:[n.statePickerSubline,o&&n.statePickerSublineOpen],badge:m},b),d.createElement(E.View,{styles:n.statePickerStamp})))},d.createElement(E.View,{styles:[n.statePickerPopover,this.didRenderAsClosed&&n.statePickerPopoverAnimation,(a||i)&&n.statePickerPopoverExtended]},d.createElement(P.default,{archivedDrafts:v,openDrafts:y,activeDraft:l,activeRevision:s,onOpenHistory:this.onOpenHistory,onCloseHistory:this.onCloseHistory,onOpenArchivedDrafts:this.onOpenArchivedDrafts,onCloseArchivedDrafts:this.onCloseArchivedDrafts,openHistory:a,openArchivedDrafts:i}),a&&d.createElement(x.default,{baseID:a.baseID,draft:a.draft,activeRevision:s,onCloseHistory:this.onCloseHistory}),i&&d.createElement(B.default,{drafts:v,onCloseArchivedDrafts:this.onCloseArchivedDrafts}))))};return t}(d.PureComponent),s.defaultProps={draft:null},s.STYLES=v.StyleSheet.create({statePicker:(c={position:"relative",width:"100%",height:"100%",maxWidth:_.layout.CONTROLSBAR_PICKER_WIDTH},c["@media "+E.MEDIA.SMALLER_THAN_TABLET]={maxWidth:"none"},c),statePickerPortal:{zIndex:E.zIndexes.CONTROLSBAR-1},statePickerButton:(u={cursor:"pointer",display:"flex",alignItems:"center",width:"100%",height:"100%",paddingRight:"0 "+E.spacing.S200+"px"},u["@media "+E.MEDIA.SMALLER_THAN_TABLET]={paddingRight:"0 "+E.spacing.S200+"px"},u),statePickerButtonOpen:{color:E.colors.WHITE,backgroundColor:E.colors.BLUE_BASE},statePickerArrow:{fontSize:24,transform:"rotateZ(180deg)",transition:"transform 0.2s ease"},statePickerArrowOpen:{transform:"rotateZ(0)"},statePickerTitleText:{color:E.colors.BLUE_DARK,"::placeholder":{color:E.colors.BLUE_LIGHT}},statePickerOpenTitleText:{color:E.colors.WHITE},statePickerSubline:{color:E.colors.BLUE_BASE},statePickerSublineOpen:{color:E.colors.WHITE},statePickerPopover:{position:"absolute",left:0,bottom:"100%",pointerEvents:"auto",width:"100%",color:E.colors.BLACK},statePickerPopoverAnimation:{animationName:E.animations.popUp,animationDuration:"0.2s"},statePickerPopoverExtended:(f={display:"grid",gridTemplateColumns:"50% 50%",alignItems:"end",width:"200%"},f["@media "+E.MEDIA.SMALLER_THAN_TABLET]={display:"block",width:"100%"},f)}),l))||i)||i)||i)||i);t.default=M},"./space/components/ControlsBar/StatePicker/StatePickerContainer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/unstated/lib/unstated.es.js");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){i(t,e);function t(){var n,r,i;o(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return i=(n=(r=a(this,e.call.apply(e,[this].concat(l))),r),r.state={isOpen:false,openedHistory:null,openedArchivedDrafts:false},r.toggle=function(e){r.setState({isOpen:e,openedHistory:e?r.state.openedHistory:null,openedArchivedDrafts:!!e&&r.state.openedArchivedDrafts})},r.toggleHistory=function(e){r.setState({openedHistory:e,openedArchivedDrafts:!e&&r.state.openedArchivedDrafts})},r.toggleArchivedDrafts=function(e){r.setState({openedHistory:e?null:r.state.openedHistory,openedArchivedDrafts:e})},n),a(r,i)}return t}(r.Container);t.default=s},"./space/components/ControlsBar/StatePicker/SubMenuButtonWrapper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=c(a);var s=n("./node_modules/aphrodite/no-important.js");var l=n("./styleguide/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){p(t,e);function t(){var n,r,o;u(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return o=(n=(r=f(this,e.call.apply(e,[this].concat(i))),r),r.state={isHover:false},r.onMouseEnter=function(){r.setState({isHover:true})},r.onMouseLeave=function(){r.setState({isHover:false})},n),f(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.onClick;return i.createElement(l.View,{role:"button",tabIndex:0,onClick:r,styles:n.iconWrapper,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.props.children(this.state))};return t}(i.Component),r.STYLES=s.StyleSheet.create({iconWrapper:{cursor:"pointer",paddingLeft:l.spacing.S200,display:"flex",alignItems:"center",justifyItems:"right",height:"100%",width:60,color:l.colors.GREY_BASE}}),o);t.default=d},"./space/components/ControlsBar/StatePicker/SubMenuChevron.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=c(a);var s=n("./node_modules/aphrodite/no-important.js");var l=n("./icons/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){p(t,e);function t(){u(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props.isHover;return i.createElement(l.IconChevronRight,{styles:[n.subMenuChevron,r&&n.subMenuChevronHover]})};return t}(i.Component),r.STYLES=s.StyleSheet.create({subMenuChevron:{fontSize:24,opacity:.4},subMenuChevronHover:{opacity:1}}),o);t.default=d},"./space/components/ControlsBar/StatePicker/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./space/components/ControlsBar/StatePicker/StatePicker.js");Object.defineProperty(t,"default",{enumerable:true,get:function e(){return a(r).default}});var o=n("./space/components/ControlsBar/StatePicker/StatePickerContainer.js");Object.defineProperty(t,"StatePickerContainer",{enumerable:true,get:function e(){return a(o).default}});function a(e){return e&&e.__esModule?e:{default:e}}}});
//# space-part-29.91e8b10f.js.map