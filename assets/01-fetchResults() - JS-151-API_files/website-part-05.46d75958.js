webpackJsonp([3],{"./website/components/RouteDashboard/DashboardPage/Footer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=l(a);var u=n("./node_modules/react-router-dom/es/index.js");var s=n("./node_modules/aphrodite/no-important.js");var c=n("./styleguide/index.js");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=r=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;return i.createElement(c.View,{styles:[n.footer]},i.createElement("ul",{className:(0,s.css)(n.footerColumn,c.View.PADDING.S300Right)},i.createElement("li",null,i.createElement(u.Link,{to:"/about",className:(0,s.css)(n.footerLink)},i.createElement(c.Text.UIH200,null,"About"))),i.createElement("li",null,i.createElement("a",{href:"https://gitbook.canny.io/feature-requests",className:(0,s.css)(n.footerLink),target:"_blank",rel:"noopener noreferrer"},i.createElement(c.Text.UIH200,null,"Send feedback"))),i.createElement("li",null,i.createElement(u.Link,{to:"/about#jobs",className:(0,s.css)(n.footerLink)},i.createElement(c.Text.UIH200,null,"Jobs"))),i.createElement("li",null,i.createElement("a",{href:"https://medium.com/gitbook",className:(0,s.css)(n.footerLink),target:"_blank",rel:"noopener noreferrer"},i.createElement(c.Text.UIH200,null,"Blog")))),i.createElement("ul",{className:(0,s.css)(n.footerColumn,c.View.PADDING.S300Left)},i.createElement("li",null,i.createElement(u.Link,{to:"/pricing",className:(0,s.css)(n.footerLink)},i.createElement(c.Text.UIH200,null,"Pricing"))),i.createElement("li",null,i.createElement("a",{href:"https://docs.gitbook.com",className:(0,s.css)(n.footerLink),target:"_blank",rel:"noopener noreferrer"},i.createElement(c.Text.UIH200,null,"Documentation"))),i.createElement("li",null,i.createElement("a",{href:"https://policies.gitbook.com/",className:(0,s.css)(n.footerLink),target:"_blank",rel:"noopener noreferrer"},i.createElement(c.Text.UIH200,null,"Terms")))),i.createElement(c.View,{styles:[n.footerTrademark,c.View.MARGIN.S300Top]},i.createElement(c.Text.TextH200,null,"Â© ",(new Date).getFullYear()," GitBook Inc.")))};return t}(i.Component),r.STYLES=s.StyleSheet.create({footer:{display:"flex",flexWrap:"wrap"},footerColumn:{listStyle:"none",padding:0,margin:0,width:"50%",":first-child":{borderRight:"1px solid "+c.colors.GREY_LIGHTER}},footerLink:{color:c.colors.GREY_BASE,textDecoration:"none",":hover":{color:c.colors.BLUE_BASE}},footerTrademark:{color:c.colors.GREY_BASE}}),o);t.default=m},"./website/components/RouteDashboard/DashboardPage/OrgLegacyTab.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=p(a);var u=n("./node_modules/react-redux/es/index.js");var s=n("./node_modules/react-router-dom/es/index.js");var c=n("./styleguide/index.js");var l=n("./common/index.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(r=(0,u.connect)(function(e,t){var n=e.config;var r=t.legacyOrg;return{migrationURL:r.migrationURL&&r.migrationURL.replace(n.urls.website,"")}}),r(o=function(e){m(t,e);function t(){f(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.legacyOrg,r=t.migrationURL;return i.createElement(c.TabsPage.TabTile,null,i.createElement(c.TabsPage.TabTile.Image,null,i.createElement(l.OrgAvatar,{org:n})),i.createElement(c.TabsPage.TabTile.Content,null,i.createElement(c.TabsPage.TabTile.ContentTitle,null,n.name)),i.createElement(c.TabsPage.TabTile.Controls,null,r?i.createElement(c.Button,{size:"small",component:s.Link,to:r},"Migrate"):i.createElement(c.View,{styles:[c.tooltip.tooltipped,c.tooltip.bottomLeft],"aria-label":"You must be the organization owner"},i.createElement(c.Button,{size:"small",disabled:true},"Migrate"))))};return t}(i.Component))||o);t.default=h},"./website/components/RouteDashboard/RouteOrganization/Billing/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteDashboard/RouteOrganization/Billing/RouteBilling.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteDashboard/RouteOrganization/RouteOrganization.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,u,s,c,l,p,f;var d=n("./node_modules/react/index.js");var m=V(d);var h=n("./node_modules/react-helmet/lib/Helmet.js");var b=z(h);var v=n("./node_modules/react-redux/es/index.js");var y=n("./node_modules/react-router-dom/es/index.js");var S=n("./flux/index.js");var g=n("./common/index.js");var w=n("./styleguide/index.js");var E=n("./core/index.js");var _=n("./website/components/RouteDashboard/RouteOrganization/OrgTabs.js");var j=z(_);var x=n("./website/components/RouteDashboard/RouteOrganization/RouteSettings.js");var O=z(x);var R=n("./website/components/RouteDashboard/RouteOrganization/RouteSpaces.js");var T=z(R);var P=n("./website/components/RouteDashboard/RouteOrganization/Billing/index.js");var C=z(P);var B=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/index.js");var M=z(B);var G=n("./website/components/RouteMigration/index.js");var k=n("./website/components/RouteSetupCustomDomain/index.js");var H=z(k);var I=n("./website/components/RouteNewSpace/index.js");var D=z(I);var L=n("./website/components/RouteSpace/index.js");var A=z(L);var N=n("./website/components/SignIn/index.js");var Y=n("./website/skeleton/index.js");function z(e){return e&&e.__esModule?e:{default:e}}function V(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function q(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var W=(o={},o[j.default.TABS.SPACES]=T.default,o[j.default.TABS.SETTINGS]=O.default,o[j.default.TABS.TEAMS]=M.default,o[j.default.TABS.BILLING]=C.default,o);var K=new E.UserMembership({role:"admin"});var Q=(a=(0,v.connect)(),i=w.Skeleton.connectToSkeleton(),a(u=i(u=function(e){q(t,e);function t(){F(this,t);return U(this,e.apply(this,arguments))}t.prototype.componentDidMount=function e(){this.trackGroup()};t.prototype.componentDidUpdate=function e(t){t.org.uid===this.props.org.uid&&t.isLoading==this.props.isLoading||this.trackGroup()};t.prototype.trackGroup=function e(){var t=this.props,n=t.dispatch,r=t.org,o=t.membership,a=t.isLoading;if(o==K||a)return;n(S.Flux.analytics.trackGroup(r))};t.prototype.render=function e(){var t=this.props,n=t.match,o=t.org,a=t.membership;var i={org:o,membership:a};return m.createElement(m.Fragment,null,m.createElement(b.default,{titleTemplate:"%s - "+o.name}),m.createElement(y.Switch,null,m.createElement(y.Redirect,{exact:true,from:n.url,to:"/@"+n.params.domain+"/spaces"}),m.createElement(y.Route,{path:n.url+"/spaces/:spacename",render:function e(t){return m.createElement(A.default,r({},t,i))}}),m.createElement(y.Route,{path:n.url+"/new",render:function e(t){return m.createElement(D.default,r({},t,i))}}),m.createElement(y.Route,{path:n.url+"/domain",render:function e(t){return m.createElement(H.default,r({},t,i))}}),m.createElement(y.Route,{path:n.url+"/migration",render:function e(t){return m.createElement(G.RouteMigration,r({},t,i))}}),j.default.TABS_LIST.map(function(e){return e.hasPermissions(a)&&m.createElement(y.Route,{key:e.uri,path:n.url+"/"+e.path,render:function t(n){return m.createElement(W[e.uri],r({membership:a},n,i))}})}),m.createElement(y.Route,{component:g.ErrorPage.NotFound})))};return t}(m.Component))||u)||u);var X=(s=(0,v.connect)(function(e){var t=e.user;return{user:t}}),c=S.Connectors.database(function(e){var t=e.match.params.domain;return{baseDomain:E.OrgBaseDomain.queryByDomain(t).defaultsTo(Y.mockedOrgBaseDomain)}}),l=S.Connectors.database(function(e){var t=e.baseDomain,n=e.user,r=e.isLoading;return{org:t?E.Organization.queryByID(t.orgID).defaultsTo(Y.mockedOrg):null,userMembership:t&&n&&(n.isLoggedIn||r)?E.UserMembership.queryByID({orgID:t.orgID,userID:n.uid}).defaultsTo(Y.mockedUserMembership):null}}),p=w.Skeleton.connectToSkeleton(),s(f=c(f=l(f=p(f=function(e){q(t,e);function t(){F(this,t);return U(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.user,r=t.match,o=t.org,a=t.userMembership,i=t.isLoading;var u=a||n.isSiteAdmin&&K;if(!o)return m.createElement(g.ErrorPage.NotFound,null);if(!n.isLoggedIn&&!i)return m.createElement(y.Redirect,{to:(0,N.createAuthRoute)({toOrg:o.baseDomain})});if(!u)return m.createElement(g.ErrorPage,{statusCode:403,title:"Access to this organization is denied",message:"You are not a member of this organization or you are logged-in with the wrong account."},m.createElement(w.Link,{to:"/",component:y.Link},"Return to your organizations."));return m.createElement(Q,{match:r,org:o,membership:u})};return t}(m.Component))||f)||f)||f)||f);t.default=X},"./website/components/RouteDashboard/RouteOrganization/RouteSettings.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=E(r);var a=n("./styleguide/index.js");var i=n("./website/components/RouteDashboard/RouteOrganization/OrgTabs.js");var u=E(i);var s=n("./website/components/RouteDashboard/RouteOrganization/OrgPage.js");var c=E(s);var l=n("./website/components/RouteDashboard/RouteOrganization/SettingsName.js");var p=E(l);var f=n("./website/components/RouteDashboard/RouteOrganization/SettingsURL.js");var d=E(f);var m=n("./website/components/RouteDashboard/RouteOrganization/SettingsLogo.js");var h=E(m);var b=n("./website/components/RouteDashboard/RouteOrganization/SettingsCustomDomain.js");var v=E(b);var y=n("./website/components/RouteDashboard/RouteOrganization/SettingsSAML/index.js");var S=E(y);var g=n("./website/components/RouteDashboard/RouteOrganization/SettingsDanger/index.js");var w=E(g);function E(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){x(t,e);function t(){_(this,t);return j(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.org,r=t.membership;return o.default.createElement(c.default,{org:n,membership:r,active:u.default.TABS.SETTINGS},o.default.createElement(a.TabsPage.Header,null,o.default.createElement(a.TabsPage.Header.Desc,null,"Use these settings to make GitBook your own. Let your imagination run wild and free!",o.default.createElement("br",null),"As an admin, you can prevent your organization's members from editing these on the Teams page.")),o.default.createElement(h.default,{org:n}),o.default.createElement(p.default,{org:n}),o.default.createElement(S.default,{org:n}),o.default.createElement(d.default,{org:n}),o.default.createElement(v.default,{org:n}),o.default.createElement(w.default,{org:n}))};return t}(o.default.Component);t.default=O},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/RouteTeams.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=m(r);var a=n("./core/index.js");var i=n("./styleguide/index.js");var u=n("./website/components/RouteDashboard/RouteOrganization/OrgTabs.js");var s=d(u);var c=n("./website/components/RouteDashboard/RouteOrganization/OrgPage.js");var l=d(c);var p=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/Teams.js");var f=d(p);function d(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){v(t,e);function t(){h(this,t);return b(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.org,r=t.membership;var u=r.role==a.ROLES.ADMIN;return o.createElement(l.default,{org:n,membership:r,active:s.default.TABS.TEAMS},o.createElement(i.TabsPage.Header,null,o.createElement(i.TabsPage.Header.Desc,null,u?"You are administrator of this team, you can invite new team members or edit permissions.":"You are a member of this team, you can view other team members.")),o.createElement(f.default,{org:n,canAdmin:u}))};return t}(o.Component);t.default=y},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TeamPanelCollapsed=t.TeamPanel=void 0;var r=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/TeamPanel.js");var o=u(r);var a=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/TeamPanelCollapsed.js");var i=u(a);function u(e){return e&&e.__esModule?e:{default:e}}t.TeamPanel=o.default;t.TeamPanelCollapsed=i.default},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/Teams.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a;var i=n("./node_modules/react/index.js");var u=S(i);var s=n("./node_modules/react-redux/es/index.js");var c=n("./core/index.js");var l=n("./common/index.js");var p=n("./flux/index.js");var f=n("./website/actions/org.js");var d=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/TeamPanel/index.js");var m=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/CreateTeamButton.js");var h=y(m);var b=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/MemberPermissions.js");var v=y(b);function y(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(r=p.Connectors.database(function(e){var t=e.org;return{members:c.Membership.queryByOrg(t.uid).setOptions({waitFetched:false}),teams:c.Team.queryByOrg(t.uid).setOptions({waitFetched:false})}}),o=(0,s.connect)(),(0,l.withRouterListen)(a=r(a=o(a=function(e){E(t,e);function t(){var n,r,o;g(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=w(this,e.call.apply(e,[this].concat(i))),r),r.state={userPermissionsModal:null},r.onOpenMemberPermissionsModal=function(e){r.setState({userPermissionsModal:e.uid})},r.onCloseMemberPermissionsModal=function(){r.setState({userPermissionsModal:null})},r.onCreateTeam=function(){var e=r.props,t=e.dispatch,n=e.org;var o=c.Team.create({name:"New Team"});t((0,f.createTeam)(n,o));r.onExpandTeam(o)},r.onExpandTeam=function(e){var t=r.props,n=t.history,o=t.org;var a=e?"/"+e.uid:"";n.replace("/@"+o.baseDomain+"/teams"+a,{preventScroll:true})},n),w(r,o)}t.prototype.componentWillReceiveProps=function e(t){var n=this.state.userPermissionsModal;n&&!t.members.has(n)&&this.setState({userPermissionsModal:null})};t.prototype.render=function e(){var t=this;var n=this.props,r=n.org,o=n.teams,a=n.members,i=n.canAdmin,s=n.match;var c=this.state.userPermissionsModal;var l=o.size>0;var p=s.params.teamID&&o.get(s.params.teamID);return u.createElement(u.Fragment,null,c&&u.createElement(v.default,{org:r,teams:o,member:a.get(c),onClose:this.onCloseMemberPermissionsModal}),p?u.createElement(d.TeamPanelCollapsed,{members:a,onExpand:this.onExpandTeam}):u.createElement(d.TeamPanel,{org:r,members:a,canManagePermissions:l,canAdmin:i,onManageMemberPermissions:i&&this.onOpenMemberPermissionsModal}),o.map(function(e){return e===p?u.createElement(d.TeamPanel,{key:e.uid,org:r,team:e,members:a.filter(function(t){return t.teams.has(e.uid)}),canManagePermissions:l,canAdmin:i,onManageMemberPermissions:i&&t.onOpenMemberPermissionsModal}):u.createElement(d.TeamPanelCollapsed,{key:e.uid,team:e,members:a.filter(function(t){return t.teams.has(e.uid)}),onExpand:t.onExpandTeam})}).toArray(),i&&u.createElement(h.default,{onClick:this.onCreateTeam,disabled:r.isLocked,tooltipContent:r.isLocked&&"Suspended organizations cannot create new teams"}))};return t}(u.Component))||a)||a)||a);t.default=_},"./website/components/RouteDashboard/RouteOrganization/RouteTeams/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteDashboard/RouteOrganization/RouteTeams/RouteTeams.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteSetupCustomDomain/RouteSetupCustomDomain.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,u;var s=n("./node_modules/react/index.js");var c=x(s);var l=n("./node_modules/react-redux/es/index.js");var p=n("./node_modules/aphrodite/no-important.js");var f=n("./node_modules/react-router-dom/es/index.js");var d=n("./flux/index.js");var m=n("./core/index.js");var h=n("./website/components/RouteNewSpace/SpacePreview.js");var b=j(h);var v=n("./website/components/RouteSetupCustomDomain/StepCustomDomain.js");var y=j(v);var S=n("./website/components/RouteSetupCustomDomain/StepCheckingRecord.js");var g=j(S);var w=n("./website/components/RouteSetupCustomDomain/StepCname.js");var E=j(w);var _=n("./website/actions/org.js");function j(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function O(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var u=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(o=(0,l.connect)(),o(a=(0,f.withRouter)(a=(u=i=function(e){P(t,e);function t(){var n=this;var r,o,a;R(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return a=(r=(o=T(this,e.call.apply(e,[this].concat(u))),o),o.state={step:1,customDomain:(o.props.space?o.props.space.customDomain:o.props.org.customDomain)||""},o.updateCustomDomain=function(){var e=O(regeneratorRuntime.mark(function e(t){var r,a,i,u;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=o.props,a=r.dispatch,i=r.org,u=r.space;n.next=3;return a(u?d.Flux.space.updateCustomDomain(i,u,t):(0,_.updateOrgCustomDomain)(i,t));case 3:case"end":return n.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),o.onDelete=function(){o.setState({customDomain:""},O(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.updateCustomDomain(null);case 2:o.onEnd();case 3:case"end":return t.stop()}},e,n)})))},o.onCustomDomainChange=function(e){o.setState({customDomain:e})},o.onSubmit=O(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.state.customDomain;o.onNext();n.prev=2;n.next=5;return o.updateCustomDomain(t);case 5:n.next=10;break;case 7:n.prev=7;n.t0=n["catch"](2);o.setState({step:1});case 10:case"end":return n.stop()}},e,n,[[2,7]])})),o.onPrevious=function(){o.setState({step:o.state.step-1})},o.onNext=function(){o.setState({step:o.state.step+1})},o.onEnd=function(){var e=o.props,t=e.org,n=e.history;n.push("/@"+t.baseDomain)},r),T(o,a)}t.prototype.componentWillReceiveProps=function e(t){var n=(this.props.space?this.props.space.customDomain:this.props.org.customDomain)||"";var r=(t.space?t.space.customDomain:t.org.customDomain)||"";n!=r&&this.setState({customDomain:r})};t.prototype.render=function e(){var n=t.STYLES;var o=this.props,a=o.org,i=o.space;var u=this.state,s=u.customDomain,l=u.step;var p=i?i.customDomain:a.customDomain;var f=a.merge({customDomain:s});var d=i?i.merge({customDomain:s}):new m.Space;var h=c.createElement(b.default,{styles:n.spacePreview,org:f,space:d});var v={onPrevious:this.onPrevious,onCancel:this.onEnd,spacePreview:h};if(1===l)return c.createElement(y.default,r({},v,{onNext:this.onSubmit,org:a,space:i,initialDomain:p,domain:s,onDelete:this.onDelete,onDomainChange:this.onCustomDomainChange}));if(2===l)return c.createElement(E.default,r({},v,{onNext:this.onNext}));return c.createElement(g.default,r({},v,{onNext:this.onEnd,domain:s}))};return t}(c.Component),i.STYLES=p.StyleSheet.create({spacePreview:{width:450,minHeight:300}}),u))||a)||a);t.default=C},"./website/components/RouteSetupCustomDomain/StepCheckingRecord.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=_(["\n    query domainCheck($domain: String!) {\n        domain(domain: $domain) {\n            status\n        }\n    }\n"],["\n    query domainCheck($domain: String!) {\n        domain(domain: $domain) {\n            status\n        }\n    }\n"]);var i=n("./node_modules/react/index.js");var u=S(i);var s=n("./node_modules/react-redux/es/index.js");var c=n("./node_modules/react-apollo/react-apollo.browser.umd.js");var l=n("./node_modules/graphql-tag/src/index.js");var p=y(l);var f=n("./icons/index.js");var d=n("./styleguide/index.js");var m=n("./website/components/RouteSetupCustomDomain/StepInfo.js");var h=y(m);var b=n("./website/components/RouteSetupCustomDomain/StepLayout.js");var v=y(b);function y(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){e.raw=t;return e}var j=(0,p.default)(a);var x=(r=(0,s.connect)(function(e){var t=e.user;return{authorizationHeader:t.authorizationHeader}}),r(o=function(e){E(t,e);function t(){g(this,t);return w(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.domain,r=t.onNext,o=t.onPrevious,a=t.onCancel,i=t.spacePreview,s=t.authorizationHeader;return u.createElement(c.Query,{query:j,skip:!s,fetchPolicy:"network-only",variables:{domain:n},context:{headers:{Authorization:s}}},function(e){var t=e.loading,n=e.error,s=e.data;var c=t||n?null:s.domain.status;return u.createElement(v.default,{step:3,onNext:r,onPrevious:o,onCancel:a,spacePreview:i,nextDisabled:"success"!==c},u.createElement(d.Form.Hint,null,"Add this CNAME record to your domain by visiting your DNS provider or registrar."),u.createElement(O,{status:c,error:n}))})};return t}(u.Component))||o);var O=function(e){E(t,e);function t(){g(this,t);return w(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.status,r=t.error;if(r)return u.createElement(h.default,{status:"warning",icon:u.createElement(f.IconAlert,null)},"There was an error while checking your DNS configuration.\n                        Please try again in a few minutes.");if("wrong_cname"===n||"no_cname"===n)return u.createElement(h.default,{status:"warning",icon:u.createElement(f.IconAlert,null)},"The domain is not pointing to hosting.gitbook.com,\n                            or the changes haven't been propagated yet");if("success"===n)return u.createElement(h.default,{status:"success",icon:u.createElement(f.IconCheckCircle,null)},"All good! Your DNS are correctly configured.");return u.createElement(h.default,{status:"pending",icon:u.createElement(d.Loading,null)},"We are checking your DNS configuration.")};return t}(u.Component);t.default=x},"./website/components/RouteSetupCustomDomain/StepCname.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=p(r);var a=n("./styleguide/index.js");var i=n("./website/components/RouteSetupCustomDomain/StepInfo.js");var u=l(i);var s=n("./website/components/RouteSetupCustomDomain/StepLayout.js");var c=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){m(t,e);function t(){f(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.onNext,r=t.onPrevious,i=t.onCancel,s=t.spacePreview;return o.createElement(c.default,{step:2,onNext:n,onPrevious:r,onCancel:i,spacePreview:s},o.createElement(a.Form.Hint,null,"Add this CNAME record to your domain by visiting your DNS provider or registrar."),o.createElement(u.default,{status:"pending",icon:o.createElement("b",null,"CNAME")},"hosting.gitbook.com"))};return t}(o.Component);t.default=h},"./website/components/RouteSetupCustomDomain/StepCustomDomain.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=d(a);var u=n("./styleguide/index.js");var s=n("./flux/index.js");var c=n("./core/index.js");var l=n("./website/components/RouteSetupCustomDomain/StepLayout.js");var p=f(l);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(r=s.Connectors.database(function(e){var t=e.domain;return{customDomain:t?c.CustomDomain.queryByDomain(t).setOptions({placeholder:false,waitFetched:false}):null}}),r(o=function(e){b(t,e);function t(){var n,r,o;m(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=h(this,e.call.apply(e,[this].concat(i))),r),r.state={pristine:true},r.onDomainChange=function(e){var t=r.props.onDomainChange;t(e.target.value)},r.onBlur=function(){r.setState({pristine:false})},n),h(r,o)}t.prototype.componentDidMount=function e(){this.input&&this.input.focus()};t.prototype.render=function e(){var t=this;var n=this.props,r=n.onNext,o=n.onPrevious,a=n.onCancel,s=n.spacePreview,l=n.org,f=n.space,d=n.domain,m=n.initialDomain,h=n.customDomain,b=n.customDomainFetched,v=n.onDelete;var y=this.state.pristine;var S=c.Organization.validateCustomDomain(d);var g=h&&(f?h.spaceID===f.uid:!h.spaceID&&h.orgID===l.uid);var w=b&&(!h||h.deprecated||g);var E=null;d&&!S?E=new Error("Invalid custom domain"):d&&!w&&(E=new Error("Domain is already taken"));return i.createElement(p.default,{step:1,onNext:r,onPrevious:o,onCancel:a,spacePreview:s,nextDisabled:!w||!S},i.createElement(u.Form,null,i.createElement(u.Form.Group,{title:f?"Space Domain":"Organization Domain",hint:m&&i.createElement(u.Link,{kind:"primary",onClick:v},"Delete custom domain"),error:!y&&E},i.createElement(u.Form.Input,{inputRef:function e(n){t.input=n},value:d,onChange:this.onDomainChange,onBlur:this.onBlur,placeholder:"Ex: acme.io"},i.createElement(u.Form.InputAddOn,{prefix:true},"https://")),i.createElement(u.Form.Hint,null,f?i.createElement("span",null,"Enter the exact domain name you want people to see when they visit your space. It should be a subdomain (docs.yourdomain.com)"):i.createElement("span",null,"Enter the exact domain name you want people to access your spaces under. It should be a subdomain (docs.yourdomain.com)")))))};return t}(i.Component))||o);t.default=v},"./website/components/RouteSetupCustomDomain/StepInfo.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=c(a);var u=n("./node_modules/aphrodite/no-important.js");var s=n("./styleguide/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){f(t,e);function t(){l(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.icon,a=r.children,u=r.status;return i.createElement(s.View,{styles:[s.View.PADDING.S200,n.info,n[u]]},o&&i.createElement(s.View,{styles:[s.View.MARGIN.S100Right]},o),i.createElement(s.View,null,i.createElement(s.Text,{placeholder:false},a)))};return t}(i.Component),r.defaultProps={icon:null},r.STYLES=u.StyleSheet.create({info:{marginRight:-60,marginBottom:20,display:"flex",alignItems:"center"},pending:{color:s.colors.BLUE_BASE,backgroundColor:s.colors.BLUE_LIGHTEST},success:{color:s.colors.GREEN_BASE,backgroundColor:s.colors.GREEN_LIGHTEST},warning:{color:s.colors.ORANGE_BASE,backgroundColor:s.colors.ORANGE_LIGHTEST},iconContainer:{marginRight:20,width:70},iconLarge:{fontSize:54}}),o);t.default=d},"./website/components/RouteSetupCustomDomain/StepLayout.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=d(a);var u=n("./node_modules/react-helmet/lib/Helmet.js");var s=f(u);var c=n("./node_modules/aphrodite/no-important.js");var l=n("./icons/index.js");var p=n("./styleguide/index.js");function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(o=r=function(e){b(t,e);function t(){m(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.step,a=r.nextDisabled,u=r.children,c=r.onPrevious,f=r.onNext,d=r.onCancel,m=r.spacePreview;return i.createElement(p.Modal,{size:p.Modal.SIZES.large,styles:p.Modal.STYLES.border},i.createElement(s.default,{title:"Configure a custom domain"}),i.createElement(p.Modal.Header,{primary:true},i.createElement(p.Modal.Title,null,"Configure a custom domain"),i.createElement(p.Modal.Stepper,null,i.createElement(p.Modal.Stepper.Item,{completed:true},"Define domain"),i.createElement(p.Modal.Stepper.Item,{completed:o>=2},"Configure your DNS"),i.createElement(p.Modal.Stepper.Item,null,"Go live"))),i.createElement(p.Modal.Body,{styles:[n.modalBody]},i.createElement(p.View,{styles:[n.stepContainer]},u),m),i.createElement(p.Modal.Footer,null,i.createElement(p.View,null,i.createElement(p.Button,{kind:"cancel",onClick:d},"Cancel")),i.createElement(p.View,null,o>1&&i.createElement(p.Button,{kind:"link",onClick:c},i.createElement(l.IconChevronLeft,null)," Previous"),i.createElement(p.Button,{disabled:a,kind:"primary",onClick:f},o>=3?"Go live":i.createElement("span",null,"Next ",i.createElement(l.IconChevronRight,null))))))};return t}(i.Component),r.STYLES=c.StyleSheet.create({modalBody:{paddingBottom:0,paddingRight:0,display:"flex",flexDirection:"row",alignItems:"center"},stepContainer:{width:320}}),o);t.default=v},"./website/components/RouteSetupCustomDomain/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react-loadable/lib/index.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return n("./website/components/RouteSetupCustomDomain/RouteSetupCustomDomain.js")})},modules:["./RouteSetupCustomDomain"],webpack:function e(){return["./website/components/RouteSetupCustomDomain/RouteSetupCustomDomain.js"]},loading:function e(){return null}});t.default=i},"./website/components/RouteSetupGitHub/BlockButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=c(a);var u=n("./node_modules/aphrodite/no-important.js");var s=n("./styleguide/index.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){f(t,e);function t(){var n,r,o;l(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=p(this,e.call.apply(e,[this].concat(i))),r),r.onSelectBlock=function(){var e=r.props,t=e.value,n=e.onSelectBlock;n(t)},n),p(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.children,a=r.selected;return i.createElement(s.View,{role:"button",tabIndex:0,styles:[n.block,a&&n.selected],onClick:this.onSelectBlock},o)};return t}(i.Component),r.STYLES=u.StyleSheet.create({block:{background:s.colors.GREY_LIGHTEST,minHeight:170,border:"solid 1px "+s.colors.GREY_LIGHTER,color:s.colors.GREY_BASE,flex:"1 0 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:s.spacing.S300,cursor:"pointer"},selected:{background:s.colors.BLUE_LIGHTEST,border:"solid 1px "+s.colors.BLUE_BASE,color:s.colors.BLUE_BASE}}),o);t.default=d},"./website/components/RouteSetupGitHub/RouteSetupGitHub.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i,u,s,c;var l=n("./node_modules/react/index.js");var p=P(l);var f=n("./node_modules/immutable/dist/immutable.js");var d=n("./node_modules/react-redux/es/index.js");var m=n("./flux/index.js");var h=n("./core/index.js");var b=n("./website/components/RouteSetupGitHub/StepGrantAccess.js");var v=T(b);var y=n("./website/components/RouteSetupGitHub/StepSelectRepo/index.js");var S=T(y);var g=n("./website/components/RouteSetupGitHub/StepSyncStatus/index.js");var w=T(g);var E=n("./website/components/RouteSetupGitHub/StepSelectBranches/index.js");var _=T(E);var j=n("./website/components/RouteSetupGitHub/StepSyncPriority/index.js");var x=T(j);var O=n("./website/components/RouteSetupGitHub/StepGitHubButton/index.js");var R=T(O);function T(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function M(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var G=(o=(0,d.connect)(),a=m.Connectors.database(function(e){var t=e.space;return{githubConfig:h.GitHubConfig.queryBySpace(t.uid)}}),o(i=a(i=(s=u=function(e){M(t,e);function t(n){C(this,t);var r=B(this,e.call(this,n));c.call(r);var o=n.githubConfig;r.state={currentStep:o?2:0,githubConfig:o||h.GitHubConfig.create(),nbBranches:0,willLaunchTask:false};return r}t.prototype.render=function e(){var t=this.props.githubConfig;var n=this.state,o=n.githubConfig,a=n.currentStep,i=n.nbBranches,u=n.willLaunchTask;var s=this.props.space;var c=!t;var l={onCancel:this.redirectToSpace,onPrev:this.onPrev,onNext:this.onGitHubConfigUpdate,updateNbBranches:this.updateNbBranches,nbBranches:i,isFirstSetup:c,githubConfig:o,space:s};var f=[p.createElement(v.default,l),p.createElement(S.default,l),p.createElement(_.default,l),p.createElement(x.default,l),p.createElement(R.default,r({},l,{onNext:this.onSubmit})),p.createElement(w.default,{githubConfig:t,willLaunchTask:u,space:s,redirectToSpace:this.redirectToSpace})].filter(Boolean);return f[a]};return t}(p.Component),c=function e(){var t=this;this.updateNbBranches=function(e){t.setState(function(){return{nbBranches:e}})};this.redirectToSpace=function(){var e=t.props,n=e.space,r=e.org,o=e.dispatch;o(m.Flux.auth.redirectToSpace({org:r,space:n}))};this.onGitHubConfigUpdate=function(e){t.setState(function(t){var n=t.githubConfig;return{githubConfig:n.merge(e)}});t.onNext()};this.onSubmit=function(e){var n=t.props,r=n.space,o=n.dispatch,a=n.githubConfig;var i=t.state.githubConfig;var u=!!a&&(0,f.is)(a.importBranchesFilter,i.importBranchesFilter);t.onNext({willLaunchTask:!u});o(m.Flux.space.configureGitHubSync(r,{githubConfig:i,editOnGitHub:e}))};this.onPrev=function(){var e=t.props.githubConfig;var n=t.state,r=n.currentStep,o=n.nbBranches;var a=4!=r||0!=o&&!e?1:2;t.setState(function(e){var t=e.currentStep;return{currentStep:t-a}})};this.onNext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setState(function(t){var n=t.currentStep;return r({currentStep:n+1},e)})}},s))||i)||i);t.default=G},"./website/components/RouteSetupGitHub/StepGitHubButton/DisplayButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=d(a);var u=n("./node_modules/aphrodite/no-important.js");var s=n("./styleguide/index.js");var c=n("./icons/index.js");var l=n("./website/components/RouteSetupGitHub/BlockButton.js");var p=f(l);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(o=r=function(e){b(t,e);function t(){m(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.onSelectBlock,a=r.value,u=r.selected;return i.createElement(p.default,{value:a,onSelectBlock:o,selected:u},i.createElement(s.Text.UIH400,{styles:[n.text]},"Display the button"),i.createElement(y,null))};return t}(i.Component),r.STYLES=u.StyleSheet.create({text:{marginBottom:s.spacing.S100}}),o);var y=function(e){b(t,e);function t(){m(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){return i.createElement(s.Button,{component:"a",kind:"secondary",size:"small"},i.createElement(c.IconGitHubLogo,null)," Edit on GitHub")};return t}(i.Component);t.default=v},"./website/components/RouteSetupGitHub/StepGitHubButton/DoNotDisplay.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=c(r);var a=n("./styleguide/index.js");var i=n("./website/components/RouteSetupGitHub/BlockButton.js");var u=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){f(t,e);function t(){l(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.onSelectBlock,r=t.value,i=t.selected;return o.createElement(u.default,{value:r,onSelectBlock:n,selected:i},o.createElement(a.Text.UIH400,null,"Do not display"))};return t}(o.Component);t.default=d},"./website/components/RouteSetupGitHub/StepGitHubButton/StepGitHubButton.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=b(a);var u=n("./node_modules/aphrodite/no-important.js");var s=n("./styleguide/index.js");n("./core/index.js");var c=n("./website/components/RouteSetupGitHub/StepGitHubButton/DisplayButton.js");var l=h(c);var p=n("./website/components/RouteSetupGitHub/StepGitHubButton/DoNotDisplay.js");var f=h(p);var d=n("./website/components/RouteSetupGitHub/StepLayout.js");var m=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(o=r=function(e){S(t,e);function t(){var n,r,o;v(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=y(this,e.call.apply(e,[this].concat(i))),r),r.state={editOnGitHub:r.props.isFirstSetup||!!r.props.space.editOnGitHub},r.onNext=function(){var e=r.props.onNext;var t=r.state.editOnGitHub;e(t)},r.onSelectBlock=function(e){r.setState({editOnGitHub:e})},n),y(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.state.editOnGitHub;var o=this.props,a=o.onCancel,u=o.onPrev;return i.createElement(m.default,{step:2},i.createElement(s.Modal.Body,null,i.createElement(s.View,{styles:[n.flexColumn]},i.createElement(s.View,{styles:s.View.MARGIN.S300Bottom},i.createElement(s.Text.HeadingH600,null,"Do you want to display the GitHub Button on your space ?")),i.createElement(s.View,{styles:[n.flexRow]},i.createElement(l.default,{value:true,onSelectBlock:this.onSelectBlock,selected:r}),i.createElement(s.View,{styles:[n.separator]},i.createElement(s.Text.UIH200,null,"OR")),i.createElement(f.default,{value:false,onSelectBlock:this.onSelectBlock,selected:!r})))),i.createElement(s.Modal.StepperFooter,{onCancel:a,onPrev:u,onNext:this.onNext}))};return t}(i.Component),r.STYLES=u.StyleSheet.create({flexColumn:{display:"flex",flexDirection:"column"},flexRow:{display:"flex",alignItems:"center"},separator:{margin:12,color:s.colors.GREY_BASE}}),o);t.default=g},"./website/components/RouteSetupGitHub/StepGitHubButton/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteSetupGitHub/StepGitHubButton/StepGitHubButton.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteSetupGitHub/StepGrantAccess.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var u=n("./node_modules/react/index.js");var s=S(u);var c=n("./flux/index.js");var l=n("./icons/index.js");var p=n("./node_modules/aphrodite/no-important.js");var f=n("./node_modules/react-redux/es/index.js");var d=n("./styleguide/index.js");var m=n(54);var h=y(m);var b=n("./website/components/RouteSetupGitHub/StepLayout.js");var v=y(b);function y(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var u=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(r=(0,f.connect)(),r(o=(i=a=function(e){_(t,e);function t(){var n=this;var r,o,a;w(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return a=(r=(o=E(this,e.call.apply(e,[this].concat(u))),o),o.state={error:null},o.onAuthenticate=function(){var e=g(regeneratorRuntime.mark(function e(t){var r,a,i,u,s;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=o.props,a=r.dispatch,i=r.onNext;n.prev=1;n.next=4;return a(c.Flux.user.reauthenticateWithGithub({scopes:t}));case 4:u=n.sent;s=u.credential.accessToken;i({token:s});n.next=12;break;case 9:n.prev=9;n.t0=n["catch"](1);o.setState({error:n.t0});case 12:case"end":return n.stop()}},e,n,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),o.onAuthenticatePublicOnly=function(){o.onAuthenticate(["public_repo","read:org"])},o.onAuthenticateAll=function(){o.onAuthenticate(["repo","read:org"])},r),E(o,a)}t.prototype.render=function e(){var n=t.STYLES;var r=this.state.error;var o=this.props.onCancel;return s.createElement(v.default,{error:r,step:1},s.createElement(d.Modal.Body,null,s.createElement(d.View,{styles:[n.flexWrapper]},s.createElement("img",{alt:"GitHub Sync",src:h.default,className:(0,p.css)(n.logo)}),s.createElement(d.Text,{styles:[n.text]},"Have your documentation always up-to-date by mirroring the content of your GitHub repository."))),s.createElement(d.Modal.Footer,null,s.createElement(d.View,null,s.createElement(d.Button,{kind:"cancel",onClick:o},"Cancel")),s.createElement(d.View,null,s.createElement(d.Button,{kind:"link",onClick:this.onAuthenticatePublicOnly},"List only public repositories"),s.createElement(d.Button,{kind:"primary",onClick:this.onAuthenticateAll},"List all repositories ",s.createElement(l.IconArrowRight,null)))))};return t}(s.Component),a.STYLES=p.StyleSheet.create({logo:{width:90,height:90,marginRight:d.spacing.S300},flexWrapper:{display:"flex",alignItems:"center"},text:{color:d.colors.GREY_BASE}}),i))||o);t.default=j},"./website/components/RouteSetupGitHub/StepLayout.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=p(a);var u=n("./node_modules/react-helmet/lib/Helmet.js");var s=l(u);var c=n("./styleguide/index.js");function l(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(o=r=function(e){m(t,e);function t(){f(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.step,r=t.children,o=t.error;return i.createElement(c.Modal,{size:c.Modal.SIZES.large,styles:c.Modal.STYLES.border},i.createElement(s.default,{title:"Link your GitHub repository"}),i.createElement(c.Modal.Header,{primary:true},i.createElement(c.Modal.Title,null,"Link your GitHub repository"),i.createElement(c.Modal.Stepper,null,i.createElement(c.Modal.Stepper.Item,{completed:true},"Grant Access"),i.createElement(c.Modal.Stepper.Item,{completed:n>=2},"Select Repo"),i.createElement(c.Modal.Stepper.Item,{completed:n>=3},"Sync content"),i.createElement(c.Modal.Stepper.Item,null,"Go live"))),o&&i.createElement(c.Alert,{styles:[c.Alert.STYLES.danger]},o.message),r)};return t}(i.Component),r.defaultProps={error:null},o);t.default=h},"./website/components/RouteSetupGitHub/StepSelectBranches/CustomBranch.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=f(a);var u=n("./styleguide/index.js");var s=n("./node_modules/aphrodite/no-important.js");var c=n("./website/components/RouteSetupGitHub/BlockButton.js");var l=p(c);function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(o=r=function(e){h(t,e);function t(){var n,r,o;d(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=m(this,e.call.apply(e,[this].concat(i))),r),r.onCustomBranchChange=function(e){var t=r.props.onCustomBranchChange;t(e.target.value)},n),m(r,o)}t.prototype.componentDidUpdate=function e(t,n){this.input&&this.props.selected&&this.input.focus()};t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,a=o.onSelectBlock,s=o.value,c=o.selected,p=o.customBranch;return i.createElement(l.default,{value:s,onSelectBlock:a,selected:c},i.createElement(u.Text.UIH400,{styles:[r.title]},"Select branches to sync"),c&&i.createElement(i.Fragment,null,i.createElement(u.Form.Input,{stylesInner:[r.input],inputRef:function e(t){n.input=t},onChange:this.onCustomBranchChange,value:p,placeholder:"Ex: master doc*"}),i.createElement(u.Form.Hint,{styles:[r.hint]},"The branch names and patterns should be separated by a whitespace")))};return t}(i.Component),r.STYLES=s.StyleSheet.create({title:{marginBottom:u.spacing.S100},hint:{marginBottom:-u.spacing.S200,color:u.colors.BLUE_LIGHT},input:{color:"initial"}}),o);t.default=b},"./website/components/RouteSetupGitHub/StepSelectBranches/MasterBranch.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=c(r);var a=n("./styleguide/index.js");var i=n("./website/components/RouteSetupGitHub/BlockButton.js");var u=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){f(t,e);function t(){l(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.onSelectBlock,r=t.value,i=t.selected;return o.createElement(u.default,{value:r,onSelectBlock:n,selected:i},o.createElement(a.Text.UIH400,null,'Sync "master" branch only'))};return t}(o.Component);t.default=d},"./website/components/RouteSetupGitHub/StepSelectBranches/StepSelectBranches.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var a,i,u;var s=n("./node_modules/react/index.js");var c=x(s);var l=n("./node_modules/aphrodite/no-important.js");var p=n("./styleguide/index.js");var f=n("./core/index.js");var d=n("./node_modules/glob-to-regexp/index.js");var m=j(d);var h=n("./node_modules/immutable/dist/immutable.js");var b=n("./website/components/RouteSetupGitHub/StepSelectBranches/MasterBranch.js");var v=j(b);var y=n("./website/components/RouteSetupGitHub/StepSelectBranches/CustomBranch.js");var S=j(y);var g=n("./website/components/RouteSetupGitHub/StepSelectBranches/getRepoBranches.js");var w=j(g);var E=n("./website/components/RouteSetupGitHub/StepLayout.js");var _=j(E);function j(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function O(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var u=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(i=a=function(e){P(t,e);t.countMatchingBranches=function e(t,n){var r=n.split(" ").map(function(e){return e.trim()});var o=r.reduce(function(e,n){var r=(0,m.default)(n);t.forEach(function(t){r.test(t)&&e.add(t)});return e},new Set);return o.size};function t(n){R(this,t);var r=T(this,e.call(this,n));u.call(r);var o=r.props.githubConfig.importBranchesFilter.join(" ");var a="master"===o;r.state={selectedBlock:a?"master":"custom",customBranchInput:a?"master doc*":o,branches:[],matchingBranches:0};return r}t.prototype.componentDidMount=function e(){this.fetchBranches()};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.onPrev,a=r.onCancel,i=r.isFirstSetup;var u=this.state,s=u.selectedBlock,l=u.customBranchInput,d=u.branches,m=u.matchingBranches;var h="custom"===s&&!l||d.length>0&&(0===m||m>f.GitHubConfig.MAX_BRANCHES);return c.createElement(_.default,{step:2,error:this.error},c.createElement(p.Modal.Body,null,c.createElement(p.View,{styles:[n.flexColumn]},c.createElement(p.View,{styles:p.View.MARGIN.S300Bottom},c.createElement(p.Text.HeadingH600,null,"Select branches to synchronize")),c.createElement(p.View,{styles:[n.flexRow]},c.createElement(v.default,{value:"master",onSelectBlock:this.onSelectBlock,selected:"master"===s}),c.createElement(p.View,{styles:[n.separator]},c.createElement(p.Text.UIH200,null,"OR")),c.createElement(S.default,{value:"custom",onSelectBlock:this.onSelectBlock,onCustomBranchChange:this.onCustomBranchChange,customBranch:l,selected:"custom"===s})))),i?c.createElement(p.Modal.StepperFooter,{onCancel:a,onPrev:o,onNext:this.onNext,nextDisabled:h}):c.createElement(p.Modal.StepperFooter,{onCancel:a,onNext:this.onNext,nextDisabled:h}))};o(t,[{key:"error",get:function e(){var t=this.state,n=t.branches,r=t.matchingBranches;if(n.length>0){if(0===r)return new Error("No branches to import. Please check your custom branch pattern.");if(r>f.GitHubConfig.MAX_BRANCHES)return new Error("Too many branches to import ("+r+"). You can import up to "+f.GitHubConfig.MAX_BRANCHES+" branches. Please check your custom branch pattern.")}return null}}]);return t}(c.Component),a.STYLES=l.StyleSheet.create({flexColumn:{display:"flex",flexDirection:"column"},flexRow:{display:"flex",alignItems:"center"},separator:{color:p.colors.GREY_BASE,margin:12}}),u=function e(){var t=this;this.fetchBranches=O(regeneratorRuntime.mark(function e(){var n,r,o,a;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:n=t.props,r=n.githubConfig,o=n.updateNbBranches;i.next=3;return(0,w.default)(r.token,r.githubOwner,r.githubRepo);case 3:a=i.sent;o(a.length);t.setState(function(e){var t=e.customBranchInput;return{branches:a,matchingBranches:C.countMatchingBranches(a,t)}});case 6:case"end":return i.stop()}},e,t)}));this.onNext=function(){var e=t.props,n=e.onNext,o=e.isFirstSetup;var a=t.state,i=a.customBranchInput,u=a.selectedBlock,s=a.branches;var c=s.length>0;var l=r({},o?{priority:c?f.GitHubConfig.PRIORITIES.GITHUB:f.GitHubConfig.PRIORITIES.GITBOOK}:{});if(i&&"custom"===u){var p=i.split(" ").map(function(e){return e.trim()});n(r({importBranchesFilter:(0,h.List)(p)},l))}else n(r({importBranchesFilter:(0,h.List)(["master"])},l))};this.onSelectBlock=function(e){t.setState(function(t){var n=t.branches,r=t.customBranchInput;var o="master"==e?"master":r;return{selectedBlock:e,matchingBranches:C.countMatchingBranches(n,o)}})};this.onCustomBranchChange=function(e){t.setState(function(t){var n=t.branches;return{customBranchInput:e,matchingBranches:C.countMatchingBranches(n,e)}})}},i);t.default=C},"./website/components/RouteSetupGitHub/StepSelectBranches/getRepoBranches.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){var e=u(regeneratorRuntime.mark(function e(t,n,r){var o,i,u;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:o=(0,a.default)();o.authenticate({type:"oauth",token:t});s.next=4;return o.repos.getBranches({owner:n,repo:r,per_page:100});case 4:i=s.sent;u=i.data;case 6:if(!o.hasNextPage(i)){s.next=13;break}s.next=9;return o.getNextPage(i);case 9:i=s.sent;u=u.concat(i.data);s.next=6;break;case 13:return s.abrupt("return",u.map(function(e){var t=e.name;return t}));case 14:case"end":return s.stop()}},e,this)}));return function t(n,r,o){return e.apply(this,arguments)}}();var o=n("./node_modules/@octokit/rest/index.js");var a=i(o);function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var u=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}t.default=r},"./website/components/RouteSetupGitHub/StepSelectBranches/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteSetupGitHub/StepSelectBranches/StepSelectBranches.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteSetupGitHub/StepSelectRepo/FUSE_CONFIG.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r={shouldSort:true,includeMatches:true,threshold:.2,location:0,distance:100,maxPatternLength:32,minMatchCharLength:2,keys:["name","owner.login"]};t.default=r},"./website/components/RouteSetupGitHub/StepSelectRepo/FetchRepos.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=p(r);var a=n("./styleguide/index.js");n("./core/index.js");var i=n("./website/components/RouteSetupGitHub/StepSelectRepo/getUserRepos.js");var u=l(i);var s=n("./website/components/RouteSetupGitHub/StepSelectRepo/ReposListing.js");var c=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var u=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){h(t,e);function t(){var n=this;var r,o,a;d(this,t);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return a=(r=(o=m(this,e.call.apply(e,[this].concat(s))),o),o.state={repos:null,orgs:null},o.fetchRepos=f(regeneratorRuntime.mark(function e(){var t,r,a,i,s,c;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.onError,a=t.githubConfig.token;n.prev=1;n.next=4;return(0,u.default)(a);case 4:i=n.sent;s=i.repos;c=i.orgs;o.setState({repos:s,orgs:c});n.next=13;break;case 10:n.prev=10;n.t0=n["catch"](1);r(n.t0);case 13:case"end":return n.stop()}},e,n,[[1,10]])})),r),m(o,a)}t.prototype.componentDidMount=function e(){this.fetchRepos()};t.prototype.render=function e(){var t=this.props,n=t.query,r=t.selectedOrg,i=t.selectedRepo,u=t.onSelectOrg,s=t.onSelectRepo;var l=this.state,p=l.repos,f=l.orgs;return o.createElement(o.Fragment,null,p?o.createElement(c.default,{orgs:f,repos:p,selectedRepo:i,selectedOrg:r,onSelectOrg:u,onSelectRepo:s,query:n}):o.createElement(a.Loading,null))};return t}(o.Component);t.default=b},"./website/components/RouteSetupGitHub/StepSelectRepo/OrgItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=c(a);var u=n("./styleguide/index.js");var s=n("./node_modules/aphrodite/no-important.js");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=(o=r=function(e){f(t,e);function t(){var n,r,o;l(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=p(this,e.call.apply(e,[this].concat(i))),r),r.onClick=function(){var e=r.props,t=e.org,n=e.onSelect;n(t)},n),p(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.org,a=r.styles;return i.createElement(u.View,{role:"button",tabIndex:0,onClick:this.onClick,styles:[a]},i.createElement("img",{src:o.avatarUrl,className:(0,s.css)(n.logo),alt:"Organization's avatar"}),i.createElement(u.Text.UIH300,null,o.login))};return t}(i.Component),r.STYLES=s.StyleSheet.create({logo:{width:20,height:20,borderRadius:"50%",marginRight:u.spacing.S100}}),o);t.default=d},"./website/components/RouteSetupGitHub/StepSelectRepo/OwnersPanel.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=f(a);var u=n("./node_modules/aphrodite/no-important.js");var s=n("./styleguide/index.js");var c=n("./website/components/RouteSetupGitHub/StepSelectRepo/OrgItem.js");var l=p(c);function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=(o=r=function(e){h(t,e);function t(){var n,r,o;d(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=m(this,e.call.apply(e,[this].concat(i))),r),r.onDeselectOrg=function(){var e=r.props.onSelectOrg;e(null)},n),m(r,o)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.query,a=r.orgs,u=r.onSelectOrg,c=r.selectedOrg,p=r.styles;return i.createElement(s.View,{styles:[n.ownersPanel,o&&n.hidden]},i.createElement(s.View,{role:"button",tabIndex:0,onClick:this.onDeselectOrg,styles:[p.item,!c&&p.selectedItem]},i.createElement(s.Text.UIH300,null,"All organizations")),a.map(function(e){return i.createElement(l.default,{key:e.id,org:e,onSelect:u,styles:[p.item,c&&c.id===e.id&&p.selectedItem]})}))};return t}(i.Component),r.STYLES=u.StyleSheet.create({ownersPanel:{maxHeight:300,overflow:"scroll",minWidth:250},hidden:{display:"none"}}),o);t.default=b},"./website/components/RouteSetupGitHub/StepSelectRepo/RepoItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a;var i=n("./node_modules/react/index.js");var u=p(i);var s=n("./styleguide/index.js");var c=n("./icons/index.js");var l=n("./node_modules/aphrodite/no-important.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(a=o=function(e){m(t,e);function t(){var n,o,a;f(this,t);for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return a=(n=(o=d(this,e.call.apply(e,[this].concat(u))),o),o.groupByKey=function(e,t){return e.reduce(function(e,n){var o;return r({},e,(o={},o[n[t]]=[].concat(e[n[t]]||[],[n]),o))},{})},o.applyHighlight=function(e,t,n){var r=n?"<b>":'<b style="color: '+s.colors.BLACK+'">';var o="</b>";return t.indices.reduce(function(t,n){var a=n[0],i=n[1];return e.slice(0,a)+r+e.slice(a,i+1)+o+e.slice(i+1)},e)},o.onClick=function(){var e=o.props,t=e.repo,n=e.onClick;n(t)},n),d(o,a)}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.repo,a=r.styles,i=r.selected,p=r.matches;var f=p?this.groupByKey(p,"key"):{};var d=o.name;var m=o.owner.login;f.name&&f.name.length>0&&(d=this.applyHighlight(d,f.name[0],i));f["owner.login"]&&f["owner.login"].length>0&&(m=this.applyHighlight(m,f["owner.login"][0],i));return u.createElement(s.View,{role:"button",tabIndex:0,onClick:o.canAdmin?this.onClick:void 0,styles:[a,n.relative,!o.canAdmin&&n.unclickable,n.repoItem,i&&n.selectedRepo]},u.createElement("span",{className:(0,l.css)(n.logo)},o.isPrivate&&u.createElement(c.IconLock,{styles:[n.iconLock]})),u.createElement(s.Text.UIH300,{styles:[n.repoName]},u.createElement("span",{dangerouslySetInnerHTML:{__html:m}}),"/",u.createElement("span",{dangerouslySetInnerHTML:{__html:d}})),i&&u.createElement(s.View,{styles:[n.selectedIcon]},u.createElement(c.IconCheckCircle,{styles:[n.icon]})),!o.canAdmin&&u.createElement(s.View,{styles:[s.tooltip.tooltipped,s.tooltip.bottomLeft,n.iconQuestion],"aria-label":"You must have administrator rights on that repository."},u.createElement(c.IconQuestion,{styles:[n.icon]})))};return t}(u.Component),o.defaultProps={matches:[]},o.STYLES=l.StyleSheet.create({relative:{position:"relative"},selectedRepo:{color:s.colors.BLUE_BASE},selectedIcon:{marginLeft:"auto"},iconQuestion:{marginLeft:"auto",color:s.colors.GREY_BASE},logo:{fontSize:s.font.SIZE_XSMALL,marginRight:s.spacing.S100,position:"absolute"},unclickable:{color:s.colors.GREY_LIGHT,cursor:"auto"},repoItem:{color:s.colors.GREY_DARK},repoName:{marginLeft:s.spacing.S300},highlight:{color:s.colors.BLACK},iconLock:{verticalAlign:"text-top"},icon:{fontSize:18}}),a);t.default=h},"./website/components/RouteSetupGitHub/StepSelectRepo/ReposListing.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a;var i=n("./node_modules/react/index.js");var u=S(i);var s=n("./node_modules/aphrodite/no-important.js");var c=n("./styleguide/index.js");var l=n("./node_modules/fuse.js/dist/fuse.js");var p=y(l);var f=n("./website/components/RouteSetupGitHub/StepSelectRepo/OwnersPanel.js");var d=y(f);var m=n("./website/components/RouteSetupGitHub/StepSelectRepo/RepoItem.js");var h=y(m);var b=n("./website/components/RouteSetupGitHub/StepSelectRepo/FUSE_CONFIG.js");var v=y(b);function y(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(o=r=function(e){E(t,e);function t(n){g(this,t);var r=w(this,e.call(this,n));a.call(r);var o=r.props.repos;r.state={fuse:new p.default(o,v.default)};return r}t.convertReposIntoReposSearch=function e(t){return t.map(function(e){return{item:e}})};t.prototype.filterRepos=function e(){var n=this.props,r=n.query,o=n.selectedOrg,a=n.repos;var i=this.state.fuse;if(r)return i.search(r);var u=o?a.filter(function(e){return o&&e.owner.login===o.login}):a;return t.convertReposIntoReposSearch(u)};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.query,a=r.orgs,i=r.onSelectRepo,s=r.onSelectOrg,l=r.selectedOrg,p=r.selectedRepo;var f=this.filterRepos();return u.createElement(c.View,{styles:[n.wrapper]},u.createElement(d.default,{onSelectOrg:s,orgs:a,query:o,selectedOrg:l,styles:n}),u.createElement(c.View,{styles:[n.repoList,o&&n.repoListSearch]},f.length>0?f.map(function(e){return u.createElement(h.default,{key:e.item.id,repo:e.item,matches:e.matches,onClick:i,selected:p&&e.item.id===p.id,styles:[n.item,p&&p.id===e.item.id&&n.selectedItem]})}):u.createElement(c.View,{styles:[n.item]},u.createElement(c.Text,null,"No repositories have been found for your search"))))};return t}(u.Component),r.STYLES=s.StyleSheet.create({wrapper:{display:"flex",borderTop:"solid 1px "+c.colors.GREY_LIGHTER,marginLeft:-c.spacing.S500,marginRight:-c.spacing.S500,marginBottom:-c.spacing.S400},repoList:{flex:"1 0 auto",borderLeft:"solid 1px "+c.colors.GREY_LIGHTER,maxHeight:300,overflow:"auto"},repoListSearch:{borderLeft:"none"},item:{display:"flex",alignItems:"center",minHeight:40,padding:c.spacing.S100+"px "+c.spacing.S600+"px "+c.spacing.S100+"px "+c.spacing.S300+"px",borderBottom:"solid 1px "+c.colors.GREY_LIGHTER,cursor:"pointer"},selectedItem:{background:c.colors.GREY_LIGHTEST}}),a=function e(){var t=this;this.onDeselectOrg=function(){var e=t.props.onSelectOrg;e(null)}},o);t.default=_},"./website/components/RouteSetupGitHub/StepSelectRepo/StepSelectRepo.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i;var u=n("./node_modules/react/index.js");var s=y(u);var c=n("./node_modules/react-redux/es/index.js");var l=n("./node_modules/aphrodite/no-important.js");var p=n("./styleguide/index.js");n("./core/index.js");var f=n("./icons/index.js");var d=n("./website/components/RouteSetupGitHub/StepSelectRepo/FetchRepos.js");var m=v(d);var h=n("./website/components/RouteSetupGitHub/StepLayout.js");var b=v(h);function v(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=(r=(0,c.connect)(),r(o=(i=a=function(e){w(t,e);function t(){var n,r,o;S(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=g(this,e.call.apply(e,[this].concat(i))),r),r.state={selectedOrg:null,selectedRepo:null,error:null,query:""},r.onError=function(e){return r.setState({error:e})},r.onSelectOrg=function(e){return r.setState({selectedOrg:e})},r.onSelectRepo=function(e){return r.setState({selectedRepo:e})},r.onClearQuery=function(){r.setState({query:""})},r.onSearchChange=function(e){r.setState({query:e.target.value,selectedRepo:null,selectedOrg:null})},r.onSubmit=function(){var e=r.props.onNext;var t=r.state.selectedRepo;t&&e({repoID:t.owner.login+"/"+t.name})},n),g(r,o)}t.prototype.componentDidMount=function e(){var t=this.props.updateNbBranches;this.input&&this.input.focus();t(0)};t.prototype.render=function e(){var n=this;var r=this.props,o=r.onPrev,a=r.onCancel,i=r.githubConfig;var u=this.state,c=u.selectedOrg,d=u.selectedRepo,h=u.query,v=u.error;var y=t.STYLES;return s.createElement(b.default,{step:2,error:v},s.createElement(p.Modal.Body,null,s.createElement(p.View,{styles:[y.flexColumn]},s.createElement(p.View,null,s.createElement(p.Text.HeadingH600,null,"Select a repository to synchronize"),s.createElement(p.View,{styles:[y.flexRow]},s.createElement(p.View,{styles:[y.flexColumn]},s.createElement(p.View,null,s.createElement(p.Text,{styles:[y.text]},"You must have administrator rights on that repository.")),s.createElement(p.View,null,s.createElement(p.Text.TextH200,{styles:[y.text]},"If you cannot find your repository, check our"," ",s.createElement(p.Link,{href:"https://docs.gitbook.com/integrations/github#my-repository-is-not-listed",target:"_blank",rel:"noopener noreferrer"},"documentation"),"."))),s.createElement(p.View,{styles:[y.searchInput]},s.createElement(p.Form.Input,{styles:[y.searchInputInner],stylesInner:[y.searchInputInner],inputRef:function e(t){n.input=t},value:h,onChange:this.onSearchChange,placeholder:"Search Repo"},s.createElement(p.Form.InputAddOn,{styles:[y.searchIcon],prefix:true},s.createElement(f.IconSearch,null)),s.createElement(p.Form.InputAddOn,{styles:[y.crossIcon],prefix:false},""!==h&&s.createElement("span",{role:"button",tabIndex:-1,className:(0,l.css)(y.crossIconInner),onClick:this.onClearQuery},s.createElement(f.IconXCircle,null))))))),s.createElement(m.default,{githubConfig:i,query:h,selectedOrg:c,selectedRepo:d,onError:this.onError,onSelectOrg:this.onSelectOrg,onSelectRepo:this.onSelectRepo}))),s.createElement(p.Modal.StepperFooter,{onCancel:a,onPrev:o,onNext:this.onSubmit,nextDisabled:!d}))};return t}(s.Component),a.STYLES=l.StyleSheet.create({flexColumn:{display:"flex",flexDirection:"column"},flexRow:{display:"flex",marginBottom:p.spacing.S300},searchInput:{maxWidth:300,marginLeft:"auto"},searchInputInner:{fontSize:14,fontWeight:500,height:28},text:{color:p.colors.GREY_BASE},searchIcon:{padding:"5px 0 5px 5px"},crossIcon:{minWidth:20,padding:"5px 5px 5px 0"},crossIconInner:{cursor:"pointer"}}),i))||o);t.default=E},"./website/components/RouteSetupGitHub/StepSelectRepo/getUserRepos.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){var e=c(regeneratorRuntime.mark(function e(t){var n,r,o,i,s,c;return regeneratorRuntime.wrap(function e(l){while(1)switch(l.prev=l.next){case 0:n=(0,u.default)();n.authenticate({type:"oauth",token:t});l.next=4;return n.repos.getAll({per_page:100});case 4:r=l.sent;o=r.data;case 6:if(!n.hasNextPage(r)){l.next=13;break}l.next=9;return n.getNextPage(r);case 9:r=l.sent;o=o.concat(r.data);l.next=6;break;case 13:i={};s=o.map(function(e){var t={id:e.owner.id,avatarUrl:e.owner.avatar_url,login:e.owner.login,repos:0};i[t.id]=i[t.id]||t;i[t.id].repos+=1;return{id:e.id,name:e.name,isPrivate:e.private,canAdmin:e.permissions.admin,owner:t}});c=(0,a.default)(i).sort(function(e,t){return t.repos>e.repos?1:0});return l.abrupt("return",{repos:s,orgs:c});case 17:case"end":return l.stop()}},e,this)}));return function t(n){return e.apply(this,arguments)}}();var o=n("./node_modules/object.values/index.js");var a=s(o);var i=n("./node_modules/@octokit/rest/index.js");var u=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a);var u=i.value}catch(e){n(e);return}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}t.default=r},"./website/components/RouteSetupGitHub/StepSelectRepo/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteSetupGitHub/StepSelectRepo/StepSelectRepo.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteSetupGitHub/StepSyncPriority/GitBookToGitHub.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=l(r);var a=n("./styleguide/index.js");var i=n("./icons/index.js");var u=n("./website/components/RouteSetupGitHub/BlockButton.js");var s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.onSelectBlock,r=t.value,u=t.selected;return o.createElement(s.default,{value:r,onSelectBlock:n,selected:u},o.createElement(i.IllustrationGitBookToGitHub,{style:{width:100,height:70,"--primary":u?a.colors.BLUE_BASE:a.colors.GREY_BASE,"--secondary":u?a.colors.BLUE_LIGHTER:a.colors.GREY_LIGHTER}}),o.createElement(a.Text.UIH400,null,"I write my content on GitBook"),o.createElement(a.Text.TextH200,null,"GitBook to GitHub"))};return t}(o.Component);t.default=m},"./website/components/RouteSetupGitHub/StepSyncPriority/GitHubToGitbook.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=d(a);var u=n("./styleguide/index.js");var s=n("./icons/index.js");var c=n("./node_modules/aphrodite/no-important.js");var l=n("./website/components/RouteSetupGitHub/BlockButton.js");var p=f(l);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=(o=r=function(e){b(t,e);function t(){m(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.onSelectBlock,r=t.value,o=t.selected;return i.createElement(p.default,{value:r,onSelectBlock:n,selected:o},i.createElement(s.IllustrationGitHubToGitBook,{style:{width:100,height:70,"--primary":o?u.colors.BLUE_BASE:u.colors.GREY_BASE,"--secondary":o?u.colors.BLUE_LIGHTER:u.colors.GREY_LIGHTER}}),i.createElement(u.Text.UIH400,null,"I write my content on GitHub"),i.createElement(u.Text.TextH200,null,"GitHub to GitBook"))};return t}(i.Component),r.STYLES=c.StyleSheet.create({"--primary":"red","--secondary":"blue"}),o);t.default=v},"./website/components/RouteSetupGitHub/StepSyncPriority/StepSyncPriority.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=v(a);var u=n("./node_modules/aphrodite/no-important.js");var s=n("./styleguide/index.js");var c=n("./core/index.js");var l=n("./website/components/RouteSetupGitHub/StepSyncPriority/GitHubToGitbook.js");var p=b(l);var f=n("./website/components/RouteSetupGitHub/StepSyncPriority/GitBookToGitHub.js");var d=b(f);var m=n("./website/components/RouteSetupGitHub/StepLayout.js");var h=b(m);function b(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(o=r=function(e){g(t,e);function t(){var n,r,o;y(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return o=(n=(r=S(this,e.call.apply(e,[this].concat(i))),r),r.state={priority:r.props.githubConfig.priority},r.onNext=function(){var e=r.props.onNext;var t=r.state.priority;e({priority:t})},r.onSelectBlock=function(e){r.setState({priority:e})},n),S(r,o)}t.prototype.componentDidMount=function e(){var t=this.props,n=t.nbBranches,r=t.isFirstSetup,o=t.onNext,a=t.githubConfig;if(!r){o({priority:a.priority});return}if(n>0)return;o({priority:c.GitHubConfig.PRIORITIES.GITBOOK})};t.prototype.render=function e(){var n=t.STYLES;var r=this.state.priority;var o=this.props,a=o.onPrev,u=o.onCancel;return i.createElement(h.default,{step:2},i.createElement(s.Modal.Body,null,i.createElement(s.View,{styles:[n.flexColumn]},i.createElement(s.View,{styles:s.View.MARGIN.S300Bottom},i.createElement(s.Text.HeadingH600,null,"Which content should be used for the first synchronization ?")),i.createElement(s.View,{styles:[n.flexRow]},i.createElement(p.default,{value:c.GitHubConfig.PRIORITIES.GITHUB,onSelectBlock:this.onSelectBlock,selected:r===c.GitHubConfig.PRIORITIES.GITHUB}),i.createElement(s.View,{styles:[n.separator]},i.createElement(s.Text.UIH200,null,"OR")),i.createElement(d.default,{value:c.GitHubConfig.PRIORITIES.GITBOOK,onSelectBlock:this.onSelectBlock,selected:r===c.GitHubConfig.PRIORITIES.GITBOOK})))),i.createElement(s.Modal.StepperFooter,{onCancel:u,onPrev:a,onNext:this.onNext}))};return t}(i.Component),r.STYLES=u.StyleSheet.create({flexColumn:{display:"flex",flexDirection:"column"},flexRow:{display:"flex",alignItems:"center"},separator:{margin:12,color:s.colors.GREY_BASE}}),o);t.default=w},"./website/components/RouteSetupGitHub/StepSyncPriority/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteSetupGitHub/StepSyncPriority/StepSyncPriority.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteSetupGitHub/StepSyncStatus/StatusAlert.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var a=n("./node_modules/react/index.js");var i=l(a);var u=n("./node_modules/aphrodite/no-important.js");var s=n("./styleguide/index.js");var c=n("./icons/index.js");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.styles;return i.createElement(s.Alert,{styles:[s.Alert.STYLES.info,t.alert]},i.createElement(s.View,{styles:[t.flexRow]},i.createElement(s.View,{styles:[t.icon]},i.createElement(s.Loading,null)),i.createElement(s.Text,null,"Setting up the GitHub integration...")))};return t}(i.Component);var h=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props.styles;return i.createElement(s.Alert,{styles:[s.Alert.STYLES.success,t.alert]},i.createElement(s.View,{styles:[t.flexRow]},i.createElement(s.View,{styles:[t.icon,t.iconLarge]},i.createElement(c.IconCheckCircle,null)),i.createElement(s.Text,null,"The content of your GitHub repository has been imported, future commits to the GitHub repository will continue updating your project.")))};return t}(i.Component);var b=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.status,r=t.styles;return i.createElement(s.Alert,{styles:[s.Alert.STYLES.danger,r.alert]},i.createElement(s.View,{styles:[r.flexRow]},i.createElement(s.View,{styles:[r.icon,r.iconLarge]},i.createElement(c.IconAlert,null)),i.createElement(s.View,{styles:[r.flexColumn]},i.createElement(s.Text,null,"The following error happened during the"," ",n.type," of your GitHub repository:",i.createElement("br",null),n.error),i.createElement(s.Text,null,"Please contact the GitBook support."))))};return t}(i.Component);var v=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.status,r=t.styles;return i.createElement(s.Alert,{styles:[s.Alert.STYLES.info,r.alert]},i.createElement(s.View,{styles:[r.flexRow]},i.createElement(s.View,{styles:[r.icon]},i.createElement(s.Loading,null)),i.createElement(s.Text,null,"Importing content (",n.progress.toFixed(0),"%), it may take a few minutes...")))};return t}(i.Component);var y=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.status,r=t.styles;return i.createElement(s.Alert,{styles:[s.Alert.STYLES.info,r.alert]},i.createElement(s.View,{styles:[r.flexRow]},i.createElement(s.View,{styles:[r.icon]},i.createElement(s.Loading,null)),i.createElement(s.Text,null,"Exporting content (",n.progress.toFixed(0),"%), it may take a few minutes...")))};return t}(i.Component);var S=(o=r=function(e){d(t,e);function t(){p(this,t);return f(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.isLoading,a=r.status;var u={status:a,styles:n};if(o)return i.createElement(m,u);if(!a)return i.createElement(h,u);if(a.hasError)return i.createElement(b,u);if("export"==a.type)return i.createElement(y,u);return i.createElement(v,u)};return t}(i.Component),r.STYLES=u.StyleSheet.create({alert:{marginBottom:0,width:"100%"},icon:{width:"auto",marginRight:s.spacing.S200},iconLarge:{fontSize:s.font.SIZE_LARGE},flexRow:{display:"flex",alignItems:"center"},flexColumn:{display:"flex",flexDirection:"column"}}),o);t.default=S},"./website/components/RouteSetupGitHub/StepSyncStatus/StepSyncStatus.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,a,i,u;var s=n("./node_modules/react/index.js");var c=g(s);var l=n("./node_modules/aphrodite/no-important.js");var p=n("./node_modules/react-redux/es/index.js");var f=n("./styleguide/index.js");var d=n("./icons/index.js");var m=n("./flux/index.js");var h=n("./core/index.js");var b=n("./website/components/RouteSetupGitHub/StepSyncStatus/StatusAlert.js");var v=g(b);var y=n("./website/components/RouteSetupGitHub/StepLayout.js");var S=g(y);function g(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(r=(0,p.connect)(),o=m.Connectors.database(function(e){var t=e.space;return{statuses:h.GitHubSyncStatus.queryBySpace(t.uid).setOptions({waitFetched:false})}}),r(a=o(a=(u=i=function(e){_(t,e);function t(n){w(this,t);var r=E(this,e.call(this,n));var o=n.willLaunchTask;r.state={waitingForUpdate:o};return r}t.getDerivedStateFromProps=function e(t){var n=t.statuses;if(n&&n.size>0)return{waitingForUpdate:false};return null};t.prototype.render=function e(){var t=this.props,n=t.githubConfig,r=t.statuses,o=t.redirectToSpace;var a=this.state.waitingForUpdate;var i=r&&r.first();var u=!!i&&i.hasError;var s=!n||!n.hookID||a;return c.default.createElement(S.default,{step:3},c.default.createElement(f.Modal.Body,null,c.default.createElement(f.View,null,c.default.createElement(v.default,{isLoading:s,status:i}))),c.default.createElement(f.Modal.Footer,null,c.default.createElement(f.View,null),c.default.createElement(f.View,null,u?c.default.createElement(f.Button,{kind:"cancel",onClick:o},"Cancel"):c.default.createElement(f.Button,{kind:"primary",onClick:o,disabled:!!i||s},"Go live ",c.default.createElement(d.IconArrowRight,null)))))};return t}(c.default.Component),i.STYLES=l.StyleSheet.create({alert:{marginBottom:0,width:"100%"},icon:{width:"auto",marginRight:f.spacing.S200},iconLarge:{fontSize:f.font.SIZE_LARGE},flexRow:{display:"flex",alignItems:"center"},flexColumn:{display:"flex",flexDirection:"column"}}),u))||a)||a);t.default=j},"./website/components/RouteSetupGitHub/StepSyncStatus/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteSetupGitHub/StepSyncStatus/StepSyncStatus.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/RouteSetupGitHub/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react-loadable/lib/index.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return n("./website/components/RouteSetupGitHub/RouteSetupGitHub.js")})},modules:["./RouteSetupGitHub"],webpack:function e(){return["./website/components/RouteSetupGitHub/RouteSetupGitHub.js"]},loading:function e(){return null}});t.default=i},"./website/components/RouteSpace/RouteSpace.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,a,i;var u=n("./node_modules/react/index.js");var s=S(u);var c=n("./node_modules/react-router-dom/es/index.js");var l=n("./flux/index.js");var p=n("./common/index.js");var f=n("./core/index.js");var d=n("./website/components/RouteSetupGitHub/index.js");var m=y(d);var h=n("./website/components/RouteSetupCustomDomain/index.js");var b=y(h);var v=n("./website/skeleton/index.js");function y(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(o=l.Connectors.database(function(e){var t=e.org,n=e.match.params.spacename;return{orgSpace:f.OrgSpace.queryByName({orgID:t.uid,baseName:n}).defaultsTo(v.mockedOrgSpace)}}),a=l.Connectors.database(function(e){var t=e.orgSpace;return{space:t?f.Space.queryByID(t.spaceID).defaultsTo(v.mockedSpace):null}}),o(i=a(i=function(e){E(t,e);function t(){g(this,t);return w(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.match,o=t.space,a=t.org;if(!o)return s.createElement(p.ErrorPage.NotFound,null);var i={space:o,org:a};return s.createElement(c.Switch,null,s.createElement(c.Route,{path:n.url+"/github",render:function e(t){return s.createElement(m.default,r({},t,i))}}),s.createElement(c.Route,{path:n.url+"/domain",render:function e(t){return s.createElement(b.default,r({},t,i))}}),s.createElement(c.Route,{component:p.ErrorPage.NotFound}))};return t}(s.Component))||i)||i);t.default=_},"./website/components/RouteSpace/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/RouteSpace/RouteSpace.js");var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},54:function(e,t,n){e.exports=n.p+"images/fb51bc3dbcdb152c0d601a9f5a75878e.svg"},55:function(e,t,n){e.exports=n.p+"images/cc8cd17e83ecc834256c08c430df5b3b.svg"}});
//# website-part-05.46d75958.js.map