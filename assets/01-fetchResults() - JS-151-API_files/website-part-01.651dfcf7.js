webpackJsonp([66],{"../node_modules/babel-loader/lib/index.js??ref--0!./website/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.onHotReload=t.bundleEntry=t.createStore=t.loadComponent=void 0;var r=n("./node_modules/redux/es/index.js");var o=v(r);var i=n("./node_modules/redux-thunk/lib/index.js");var a=h(i);var s=n("./node_modules/redux-logger/dist/redux-logger.js");var u=n("./backend/index.web.js");var c=n("./flux/index.js");var l=n("./website/models/State.js");var f=h(l);var p=n("./website/reducers/index.js");var d=h(p);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}var m="website";function _(e){var t=e.config;var n=f.default.deserialize(e);var r=void 0;var i=new u.Backend(t,{initialUser:n.user,onUser:function e(t){r.dispatch(c.Flux.user.updateUser(t))},initialDatabaseState:n.database,onDatabaseState:function e(t){r.dispatch(c.Flux.database.updateDatabase(t))}});var s=[a.default.withExtraArgument(i)];i.database.setOnline(false);i.isClient&&false;r=o.createStore(d.default,n,o.applyMiddleware.apply(o,s));return r}function y(){return n("./website/components/Application.js").default}function g(e){false}t.loadComponent=y;t.createStore=_;t.bundleEntry=m;t.onHotReload=g},"./node_modules/node-vibrant/lib/browser.js":function(e,t,n){"use strict";var r=n("./node_modules/node-vibrant/lib/vibrant.js");var o=n("./node_modules/node-vibrant/lib/image/browser.js");r.default.DefaultOpts.ImageClass=o.default;e.exports=r.default},"./node_modules/node-vibrant/lib/builder.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/lodash/clone.js");var o=n("./node_modules/node-vibrant/lib/vibrant.js");var i=function(){function e(e,t){void 0===t&&(t={});this._src=e;this._opts=t;this._opts.filters=r(o.default.DefaultOpts.filters)}e.prototype.maxColorCount=function(e){this._opts.colorCount=e;return this};e.prototype.maxDimension=function(e){this._opts.maxDimension=e;return this};e.prototype.addFilter=function(e){this._opts.filters.push(e);return this};e.prototype.removeFilter=function(e){var t=this._opts.filters.indexOf(e);t>0&&this._opts.filters.splice(t);return this};e.prototype.clearFilters=function(){this._opts.filters=[];return this};e.prototype.quality=function(e){this._opts.quality=e;return this};e.prototype.useImageClass=function(e){this._opts.ImageClass=e;return this};e.prototype.useGenerator=function(e){this._opts.generator=e;return this};e.prototype.useQuantizer=function(e){this._opts.quantizer=e;return this};e.prototype.build=function(){return new o.default(this._src,this._opts)};e.prototype.getPalette=function(e){return this.build().getPalette(e)};e.prototype.getSwatches=function(e){return this.build().getPalette(e)};return e}();t.default=i},"./node_modules/node-vibrant/lib/color.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/node-vibrant/lib/util.js");var o=function(){function e(e,t){this._rgb=e;this._population=t}e.prototype.getRgb=function(){return this._rgb};e.prototype.getHsl=function(){if(!this._hsl){var e=this._rgb,t=e[0],n=e[1],o=e[2];this._hsl=r.rgbToHsl(t,n,o)}return this._hsl};e.prototype.getPopulation=function(){return this._population};e.prototype.getHex=function(){if(!this._hex){var e=this._rgb,t=e[0],n=e[1],o=e[2];this._hex=r.rgbToHex(t,n,o)}return this._hex};e.prototype.getYiq=function(){if(!this._yiq){var e=this._rgb;this._yiq=(299*e[0]+587*e[1]+114*e[2])/1e3}return this._yiq};e.prototype.getTitleTextColor=function(){return this.getYiq()<200?"#fff":"#000"};e.prototype.getBodyTextColor=function(){return this.getYiq()<150?"#fff":"#000"};return e}();t.Swatch=o},"./node_modules/node-vibrant/lib/filter/default.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});function r(e,t,n,r){return r>=125&&!(e>250&&t>250&&n>250)}t.default=r},"./node_modules/node-vibrant/lib/filter/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/node-vibrant/lib/filter/default.js");t.Default=r.default},"./node_modules/node-vibrant/lib/generator/default.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/node-vibrant/lib/color.js");var o=n("./node_modules/node-vibrant/lib/util.js");var i=n("./node_modules/lodash/defaults.js");var a={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6,weightPopulation:1};function s(e){var t=0;e.forEach(function(e){t=Math.max(t,e.getPopulation())});return t}function u(e,t){return e.Vibrant===t||e.DarkVibrant===t||e.LightVibrant===t||e.Muted===t||e.DarkMuted===t||e.LightMuted===t}function c(e,t,n,r,o,i,a){function s(){var e=[];for(var t=0;t<arguments.length;t++)e[t]=arguments[t];var n=0;var r=0;for(var o=0;o<e.length;o+=2){var i=e[o];var a=e[o+1];n+=i*a;r+=a}return n/r}function u(e,t){return 1-Math.abs(e-t)}return s(u(e,t),a.weightSaturation,u(n,r),a.weightLuma,o/i,a.weightPopulation)}function l(e,t,n,r,o,i,a,s,l,f){var p=null;var d=0;t.forEach(function(t){var h=t.getHsl(),v=h[1],m=h[2];if(v>=s&&v<=l&&m>=o&&m<=i&&!u(e,t)){var _=c(v,a,m,r,t.getPopulation(),n,f);if(null===p||_>d){p=t;d=_}}});return p}function f(e,t,n){var r={};r.Vibrant=l(r,e,t,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n);r.LightVibrant=l(r,e,t,n.targetLightLuma,n.minLightLuma,1,n.targetVibrantSaturation,n.minVibrantSaturation,1,n);r.DarkVibrant=l(r,e,t,n.targetDarkLuma,0,n.maxDarkLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n);r.Muted=l(r,e,t,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n);r.LightMuted=l(r,e,t,n.targetLightLuma,n.minLightLuma,1,n.targetMutesSaturation,0,n.maxMutesSaturation,n);r.DarkMuted=l(r,e,t,n.targetDarkLuma,0,n.maxDarkLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n);return r}function p(e,t,n){if(null===e.Vibrant&&null!==e.DarkVibrant){var i=e.DarkVibrant.getHsl(),a=i[0],s=i[1],u=i[2];u=n.targetNormalLuma;e.Vibrant=new r.Swatch(o.hslToRgb(a,s,u),0)}if(null===e.DarkVibrant&&null!==e.Vibrant){var c=e.Vibrant.getHsl(),a=c[0],s=c[1],u=c[2];u=n.targetDarkLuma;e.DarkVibrant=new r.Swatch(o.hslToRgb(a,s,u),0)}}var d=function(e,t){t=i({},t,a);var n=s(e);var r=f(e,n,t);p(r,n,t);return r};t.default=d},"./node_modules/node-vibrant/lib/generator/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/node-vibrant/lib/generator/default.js");t.Default=r.default},"./node_modules/node-vibrant/lib/image/base.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(){}e.prototype.scaleDown=function(e){var t=this.getWidth();var n=this.getHeight();var r=1;if(e.maxDimension>0){var o=Math.max(t,n);o>e.maxDimension&&(r=e.maxDimension/o)}else r=1/e.quality;r<1&&this.resize(t*r,n*r,r)};return e}();t.ImageBase=r},"./node_modules/node-vibrant/lib/image/browser.js":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:true});var o=n("./node_modules/node-vibrant/node_modules/bluebird/js/browser/bluebird.js");var i=n("./node_modules/node-vibrant/lib/image/base.js");var a=n("../node_modules/url/url.js");function s(e){var t=a.parse(e);return null===t.protocol&&null===t.host&&null===t.port}function u(e,t){var n=a.parse(e);var r=a.parse(t);return n.protocol===r.protocol&&n.hostname===r.hostname&&n.port===r.port}var c=function(e){r(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype._initCanvas=function(){var e=this.image;var t=this._canvas=document.createElement("canvas");var n=this._context=t.getContext("2d");t.className="vibrant-canvas";t.style.visibility="hidden";this._width=t.width=e.width;this._height=t.height=e.height;n.drawImage(e,0,0);document.body.appendChild(t)};t.prototype.load=function(e){var t=this;var n=null;var r=null;if("string"===typeof e){n=document.createElement("img");r=e}else{if(!(e instanceof HTMLImageElement))return o.reject(new Error("Cannot load buffer as an image in browser"));n=e;r=e.src}this.image=n;s(r)||u(window.location.href,r)||(n.crossOrigin="anonymous");"string"===typeof e&&(n.src=r);return new o(function(e,o){var i=function(){t._initCanvas();e(t)};n.onload=i;n.complete&&i();n.onerror=function(e){return o(new Error("Fail to load image: "+r))}})};t.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)};t.prototype.update=function(e){this._context.putImageData(e,0,0)};t.prototype.getWidth=function(){return this._width};t.prototype.getHeight=function(){return this._height};t.prototype.resize=function(e,t,n){var r=this,o=r._canvas,i=r._context,a=r.image;this._width=o.width=e;this._height=o.height=t;i.scale(n,n);i.drawImage(a,0,0)};t.prototype.getPixelCount=function(){return this._width*this._height};t.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)};t.prototype.remove=function(){this._canvas.parentNode.removeChild(this._canvas)};return t}(i.ImageBase);t.default=c},"./node_modules/node-vibrant/lib/quantizer/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/node-vibrant/lib/quantizer/mmcq.js");t.MMCQ=r.default},"./node_modules/node-vibrant/lib/util.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/node-vibrant/node_modules/bluebird/js/browser/bluebird.js");t.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50};t.SIGBITS=5;t.RSHIFT=8-t.SIGBITS;function o(){var e;var t;var n=new r(function(n,r){e=n;t=r});return{resolve:e,reject:t,promise:n}}t.defer=o;function i(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return null===t?null:[t[1],t[2],t[3]].map(function(e){return parseInt(e,16)})}t.hexToRgb=i;function a(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1,7)}t.rgbToHex=a;function s(e,t,n){e/=255;t/=255;n/=255;var r=Math.max(e,t,n);var o=Math.min(e,t,n);var i;var a;var s=(r+o)/2;if(r===o)i=a=0;else{var u=r-o;a=s>.5?u/(2-r-o):u/(r+o);switch(r){case e:i=(t-n)/u+(t<n?6:0);break;case t:i=(n-e)/u+2;break;case n:i=(e-t)/u+4;break}i/=6}return[i,a,s]}t.rgbToHsl=s;function u(e,t,n){var r;var o;var i;function a(e,t,n){n<0&&(n+=1);n>1&&(n-=1);if(n<1/6)return e+6*(t-e)*n;if(n<.5)return t;if(n<2/3)return e+(t-e)*(2/3-n)*6;return e}if(0===t)r=o=i=n;else{var s=n<.5?n*(1+t):n+t-n*t;var u=2*n-s;r=a(u,s,e+1/3);o=a(u,s,e);i=a(u,s,e-1/3)}return[255*r,255*o,255*i]}t.hslToRgb=u;function c(e,t,n){e/=255;t/=255;n/=255;e=e>.04045?Math.pow((e+.005)/1.055,2.4):e/12.92;t=t>.04045?Math.pow((t+.005)/1.055,2.4):t/12.92;n=n>.04045?Math.pow((n+.005)/1.055,2.4):n/12.92;e*=100;t*=100;n*=100;var r=.4124*e+.3576*t+.1805*n;var o=.2126*e+.7152*t+.0722*n;var i=.0193*e+.1192*t+.9505*n;return[r,o,i]}t.rgbToXyz=c;function l(e,t,n){var r=95.047;var o=100;var i=108.883;e/=r;t/=o;n/=i;e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;t=t>.008856?Math.pow(t,1/3):7.787*t+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;var a=116*t-16;var s=500*(e-t);var u=200*(t-n);return[a,s,u]}t.xyzToCIELab=l;function f(e,t,n){var r=c(e,t,n),o=r[0],i=r[1],a=r[2];return l(o,i,a)}t.rgbToCIELab=f;function p(e,t){var n=1;var r=1;var o=1;var i=e[0],a=e[1],s=e[2];var u=t[0],c=t[1],l=t[2];var f=i-u;var p=a-c;var d=s-l;var h=Math.sqrt(a*a+s*s);var v=Math.sqrt(c*c+l*l);var m=u-i;var _=v-h;var y=Math.sqrt(f*f+p*p+d*d);var g=Math.sqrt(y)>Math.sqrt(Math.abs(m))+Math.sqrt(Math.abs(_))?Math.sqrt(y*y-m*m-_*_):0;var b=1+.045*h;var w=1+.015*h;m/=n;_/=r*b;g/=o*w;return Math.sqrt(m*m+_*_+g*g)}t.deltaE94=p;function d(e,t){var n=f.apply(void 0,e);var r=f.apply(void 0,t);return p(n,r)}t.rgbDiff=d;function h(e,t){var n=i(e);var r=i(t);return d(n,r)}t.hexDiff=h;function v(e){if(e<t.DELTAE94_DIFF_STATUS.NA)return"N/A";if(e<=t.DELTAE94_DIFF_STATUS.PERFECT)return"Perfect";if(e<=t.DELTAE94_DIFF_STATUS.CLOSE)return"Close";if(e<=t.DELTAE94_DIFF_STATUS.GOOD)return"Good";if(e<t.DELTAE94_DIFF_STATUS.SIMILAR)return"Similar";return"Wrong"}t.getColorDiffStatus=v;function m(e,n,r){return(e<<2*t.SIGBITS)+(n<<t.SIGBITS)+r}t.getColorIndex=m},"./node_modules/node-vibrant/lib/vibrant.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/node-vibrant/node_modules/bluebird/js/browser/bluebird.js");var o=n("./node_modules/lodash/defaults.js");var i=n("./node_modules/node-vibrant/lib/builder.js");var a=n("./node_modules/node-vibrant/lib/util.js");var s=n("./node_modules/node-vibrant/lib/quantizer/index.js");var u=n("./node_modules/node-vibrant/lib/generator/index.js");var c=n("./node_modules/node-vibrant/lib/filter/index.js");var l=function(){function e(t,n){this._src=t;this.opts=o({},n,e.DefaultOpts)}e.from=function(e){return new i.default(e)};e.prototype._process=function(e){var t=this;var n=this.opts;var o=n.quantizer,i=n.generator;e.scaleDown(n);var a=e.getImageData();return r.resolve(o(a.data,n)).then(function(e){return r.resolve(i(e))}).tap(function(e){return t._palette=e}).finally(function(){return e.remove()})};e.prototype.palette=function(){return this.swatches()};e.prototype.swatches=function(){return this._palette};e.prototype.getPalette=function(e){var t=this;var n=new this.opts.ImageClass;return n.load(this._src).then(function(e){return t._process(e)}).asCallback(e)};return e}();l.Builder=i.default;l.Quantizer=s;l.Generator=u;l.Filter=c;l.Util=a;l.DefaultOpts={colorCount:64,quality:5,generator:u.Default,ImageClass:null,quantizer:s.MMCQ,filters:[c.Default]};t.default=l},"./node_modules/node-vibrant/node_modules/bluebird/js/browser/bluebird.js":function(e,t,n){(function(t,n,r){
/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2017 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
!function(t){var n;true;e.exports=t()}(function(){var e,o,i;return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[a].exports}var i="function"==typeof _dereq_&&_dereq_;for(var a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e);var r=n.promise();n.setHowMany(1);n.setUnwrap();n.init();return r}e.any=function(e){return n(e)};e.prototype.any=function(){return n(this)}}},{}],2:[function(e,n,r){"use strict";var o;try{throw new Error}catch(e){o=e}var i=e("./schedule");var a=e("./queue");var s=e("./util");function u(){this._customScheduler=false;this._isTickUsed=false;this._lateQueue=new a(16);this._normalQueue=new a(16);this._haveDrainedQueues=false;this._trampolineEnabled=true;var e=this;this.drainQueues=function(){e._drainQueues()};this._schedule=i}u.prototype.setScheduler=function(e){var t=this._schedule;this._schedule=e;this._customScheduler=true;return t};u.prototype.hasCustomScheduler=function(){return this._customScheduler};u.prototype.enableTrampoline=function(){this._trampolineEnabled=true};u.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=false)};u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues};u.prototype.fatalError=function(e,n){if(n){t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n");t.exit(2)}else this.throwLater(e)};u.prototype.throwLater=function(e,t){if(1===arguments.length){t=e;e=function(){throw t}}if("undefined"!==typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}};function c(e,t,n){this._lateQueue.push(e,t,n);this._queueTick()}function l(e,t,n){this._normalQueue.push(e,t,n);this._queueTick()}function f(e){this._normalQueue._pushOne(e);this._queueTick()}if(s.hasDevTools){u.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?c.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})};u.prototype.invoke=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule(function(){e.call(t,n)})};u.prototype.settlePromises=function(e){this._trampolineEnabled?f.call(this,e):this._schedule(function(){e._settlePromises()})}}else{u.prototype.invokeLater=c;u.prototype.invoke=l;u.prototype.settlePromises=f}u.prototype._drainQueue=function(e){while(e.length()>0){var t=e.shift();if("function"!==typeof t){t._settlePromises();continue}var n=e.shift();var r=e.shift();t.call(n,r)}};u.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=true;this._drainQueue(this._lateQueue)};u.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues)}};u.prototype._reset=function(){this._isTickUsed=false};n.exports=u;n.exports.firstLineError=o},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var o=false;var i=function(e,t){this._reject(t)};var a=function(e,t){t.promiseRejectionQueued=true;t.bindingPromise._then(i,i,null,this,e)};var s=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)};var u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(i){if(!o){o=true;e.prototype._propagateFrom=r.propagateFromFunction();e.prototype._boundValue=r.boundValueFunction()}var c=n(i);var l=new e(t);l._propagateFrom(this,1);var f=this._target();l._setBoundTo(c);if(c instanceof e){var p={promiseRejectionQueued:false,promise:l,target:f,bindingPromise:c};f._then(t,a,void 0,l,p);c._then(s,u,void 0,l,p);l._setOnCancel(c)}else l._resolveCallback(f);return l};e.prototype._setBoundTo=function(e){if(void 0!==e){this._bitField=2097152|this._bitField;this._boundTo=e}else this._bitField=-2097153&this._bitField};e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)};e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";var r;"undefined"!==typeof Promise&&(r=Promise);function o(){try{Promise===i&&(Promise=r)}catch(e){}return i}var i=e("./promise")();i.noConflict=o;t.exports=i},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var o=r(null);var i=r(null);o[" size"]=i[" size"]=0}t.exports=function(t){var n=e("./util");var r=n.canEvaluate;var o=n.isIdentifier;var i;var a;var s;var u;var c;false;function l(e,r){var o;null!=e&&(o=e[r]);if("function"!==typeof o){var i="Object "+n.classString(e)+" has no method '"+n.toString(r)+"'";throw new t.TypeError(i)}return o}function f(e){var t=this.pop();var n=l(e,t);return n.apply(e,this)}t.prototype.call=function(e){var t=[].slice.call(arguments,1);var n;false;t.push(e);return this._then(f,void 0,void 0,t,void 0)};function p(e){return e[this]}function d(e){var t=+this;t<0&&(t=Math.max(0,t+e.length));return e[t]}t.prototype.get=function(e){var t="number"===typeof e;var n;if(t)n=d;else if(r){var o=a(e);n=null!==o?o:p}else n=p;return this._then(n,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){var i=e("./util");var a=i.tryCatch;var s=i.errorObj;var u=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");var e=this;var t=e;while(e._isCancellable()){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel();e._setWillBeCancelled();t=e;e=n}};t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--};t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0};t.prototype._cancelBy=function(e){if(e===this){this._branchesRemainingToCancel=0;this._invokeOnCancel();return true}this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return true}return false};t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()};t.prototype._cancel=function(){if(!this._isCancellable())return;this._setCancelled();u.invoke(this._cancelPromises,this,void 0)};t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()};t.prototype._unsetOnCancel=function(){this._onCancelField=void 0};t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()};t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};t.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"===typeof e){if(!t){var r=a(e).call(this._boundValue());if(r===s){this._attachExtraTrace(r.e);u.throwLater(r.e)}}}else e._resultCancelled(this)};t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel();u.invoke(this._doInvokeOnCancel,this,e)};t.prototype._invokeInternalOnCancel=function(){if(this._isCancellable()){this._doInvokeOnCancel(this._onCancel(),true);this._unsetOnCancel()}};t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util");var r=e("./es5").keys;var o=n.tryCatch;var i=n.errorObj;function a(e,a,s){return function(u){var c=s._boundValue();e:for(var l=0;l<e.length;++l){var f=e[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return o(a).call(c,u)}else if("function"===typeof f){var p=o(f).call(c,u);if(p===i)return p;if(p)return o(a).call(c,u)}else if(n.isObject(u)){var d=r(f);for(var h=0;h<d.length;++h){var v=d[h];if(f[v]!=u[v])continue e}return o(a).call(c,u)}}return t}}return a}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){var t=false;var n=[];e.prototype._promiseCreated=function(){};e.prototype._pushContext=function(){};e.prototype._popContext=function(){return null};e._peekContext=e.prototype._peekContext=function(){};function r(){this._trace=new r.CapturedTrace(i())}r.prototype._pushContext=function(){if(void 0!==this._trace){this._trace._promiseCreated=null;n.push(this._trace)}};r.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop();var t=e._promiseCreated;e._promiseCreated=null;return t}return null};function o(){if(t)return new r}function i(){var e=n.length-1;if(e>=0)return n[e];return}r.CapturedTrace=null;r.create=o;r.deactivateLongStackTraces=function(){};r.activateLongStackTraces=function(){var n=e.prototype._pushContext;var o=e.prototype._popContext;var a=e._peekContext;var s=e.prototype._peekContext;var u=e.prototype._promiseCreated;r.deactivateLongStackTraces=function(){e.prototype._pushContext=n;e.prototype._popContext=o;e._peekContext=a;e.prototype._peekContext=s;e.prototype._promiseCreated=u;t=false};t=true;e.prototype._pushContext=r.prototype._pushContext;e.prototype._popContext=r.prototype._popContext;e._peekContext=e.prototype._peekContext=i;e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}};return r}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){var o=n._getDomain;var i=n._async;var a=e("./errors").Warning;var s=e("./util");var u=s.canAttachTrace;var c;var l;var f=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/;var p=/\((?:timers\.js):\d+:\d+\)/;var d=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/;var h=null;var v=null;var m=false;var _;var y=!!(0!=s.env("BLUEBIRD_DEBUG")&&true);var g=!!(0!=s.env("BLUEBIRD_WARNINGS")&&(y||s.env("BLUEBIRD_WARNINGS")));var b=!!(0!=s.env("BLUEBIRD_LONG_STACK_TRACES")&&(y||s.env("BLUEBIRD_LONG_STACK_TRACES")));var w=0!=s.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(g||!!s.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288};n.prototype._ensurePossibleRejectionHandled=function(){if(0!==(524288&this._bitField))return;this._setRejectionIsUnhandled();i.invokeLater(this._notifyUnhandledRejection,this,void 0)};n.prototype._notifyUnhandledRejectionIsHandled=function(){$("rejectionHandled",c,void 0,this)};n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField};n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)};n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified();$("unhandledRejection",l,e,this)}};n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField};n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField};n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0};n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField};n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled()}};n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0};n.prototype._warn=function(e,t,n){return H(e,t,n||this)};n.onPossiblyUnhandledRejection=function(e){var t=o();l="function"===typeof e?null===t?e:s.domainBind(t,e):void 0};n.onUnhandledRejectionHandled=function(e){var t=o();c="function"===typeof e?null===t?e:s.domainBind(t,e):void 0};var j=function(){};n.longStackTraces=function(){if(i.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ae.longStackTraces&&Z()){var e=n.prototype._captureStackTrace;var t=n.prototype._attachExtraTrace;ae.longStackTraces=true;j=function(){if(i.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e;n.prototype._attachExtraTrace=t;r.deactivateLongStackTraces();i.enableTrampoline();ae.longStackTraces=false};n.prototype._captureStackTrace=V;n.prototype._attachExtraTrace=N;r.activateLongStackTraces();i.disableTrampolineIfNecessary()}};n.hasLongStackTraces=function(){return ae.longStackTraces&&Z()};var E=function(){try{if("function"===typeof CustomEvent){var e=new CustomEvent("CustomEvent");s.global.dispatchEvent(e);return function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:true});return!s.global.dispatchEvent(n)}}if("function"===typeof Event){var e=new Event("CustomEvent");s.global.dispatchEvent(e);return function(e,t){var n=new Event(e.toLowerCase(),{cancelable:true});n.detail=t;return!s.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");e.initCustomEvent("testingtheevent",false,true,{});s.global.dispatchEvent(e);return function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e.toLowerCase(),false,true,t);return!s.global.dispatchEvent(n)}}catch(e){}return function(){return false}}();var S=function(){if(s.isNode)return function(){return t.emit.apply(t,arguments)};if(!s.global)return function(){return false};return function(e){var t="on"+e.toLowerCase();var n=s.global[t];if(!n)return false;n.apply(s.global,[].slice.call(arguments,1));return true}}();function C(e,t){return{promise:t}}var x={promiseCreated:C,promiseFulfilled:C,promiseRejected:C,promiseResolved:C,promiseCancelled:C,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:C};var R=function(e){var t=false;try{t=S.apply(null,arguments)}catch(e){i.throwLater(e);t=true}var n=false;try{n=E(e,x[e].apply(null,arguments))}catch(e){i.throwLater(e);n=true}return n||t};n.config=function(e){e=Object(e);"longStackTraces"in e&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&j());if("warnings"in e){var t=e.warnings;ae.warnings=!!t;w=ae.warnings;s.isObject(t)&&"wForgottenReturn"in t&&(w=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!ae.cancellation){if(i.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=M;n.prototype._propagateFrom=A;n.prototype._onCancel=T;n.prototype._setOnCancel=F;n.prototype._attachCancellationCallback=k;n.prototype._execute=O;I=A;ae.cancellation=true}if("monitoring"in e)if(e.monitoring&&!ae.monitoring){ae.monitoring=true;n.prototype._fireEvent=R}else if(!e.monitoring&&ae.monitoring){ae.monitoring=false;n.prototype._fireEvent=P}return n};function P(){return false}n.prototype._fireEvent=P;n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}};n.prototype._onCancel=function(){};n.prototype._setOnCancel=function(e){};n.prototype._attachCancellationCallback=function(e){};n.prototype._captureStackTrace=function(){};n.prototype._attachExtraTrace=function(){};n.prototype._clearCancellationData=function(){};n.prototype._propagateFrom=function(e,t){};function O(e,t,n){var r=this;try{e(t,n,function(e){if("function"!==typeof e)throw new TypeError("onCancel must be a function, got: "+s.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function k(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?s.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function T(){return this._onCancelField}function F(e){this._onCancelField=e}function M(){this._cancellationParent=void 0;this._onCancelField=void 0}function A(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0);e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function L(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}var I=L;function D(){var e=this._boundTo;if(void 0!==e&&e instanceof n)return e.isFulfilled()?e.value():void 0;return e}function V(){this._trace=new oe(this._peekContext())}function N(e,t){if(u(e)){var n=this._trace;void 0!==n&&t&&(n=n._parent);if(void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=Q(e);s.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n"));s.notEnumerableProp(e,"__stackCleaned__",true)}}}function B(e,t,n,r,o){if(void 0===e&&null!==t&&w){if(void 0!==o&&o._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var i="";var a="";if(t._trace){var s=t._trace.stack.split("\n");var u=W(s);for(var c=u.length-1;c>=0;--c){var l=u[c];if(!p.test(l)){var f=l.match(d);f&&(i="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0){var h=u[0];for(var c=0;c<s.length;++c)if(s[c]===h){c>0&&(a="\n"+s[c-1]);break}}}var v="a promise was created in a "+n+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(v,true,t)}}function U(e,t){var n=e+" is deprecated and will be removed in a future version.";t&&(n+=" Use "+t+" instead.");return H(n)}function H(e,t,r){if(!ae.warnings)return;var o=new a(e);var i;if(t)r._attachExtraTrace(o);else if(ae.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var s=Q(o);o.stack=s.message+"\n"+s.stack.join("\n")}R("warning",o)||K(o,"",true)}function G(e,t){for(var n=0;n<t.length-1;++n){t[n].push("From previous event:");t[n]=t[n].join("\n")}n<t.length&&(t[n]=t[n].join("\n"));return e+"\n"+t.join("\n")}function q(e){for(var t=0;t<e.length;++t)if(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0]){e.splice(t,1);t--}}function z(e){var t=e[0];for(var n=1;n<e.length;++n){var r=e[n];var o=t.length-1;var i=t[o];var a=-1;for(var s=r.length-1;s>=0;--s)if(r[s]===i){a=s;break}for(var s=a;s>=0;--s){var u=r[s];if(t[o]!==u)break;t.pop();o--}t=r}}function W(e){var t=[];for(var n=0;n<e.length;++n){var r=e[n];var o="    (No stack trace)"===r||h.test(r);var i=o&&ee(r);if(o&&!i){m&&" "!==r.charAt(0)&&(r="    "+r);t.push(r)}}return t}function Y(e){var t=e.stack.replace(/\s+$/g,"").split("\n");for(var n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||h.test(r))break}n>0&&"SyntaxError"!=e.name&&(t=t.slice(n));return t}function Q(e){var t=e.stack;var n=e.toString();t="string"===typeof t&&t.length>0?Y(e):["    (No stack trace)"];return{message:n,stack:"SyntaxError"==e.name?t:W(t)}}function K(e,t,n){if("undefined"!==typeof console){var r;if(s.isObject(e)){var o=e.stack;r=t+v(o,e)}else r=t+String(e);"function"===typeof _?_(r,n):"function"!==typeof console.log&&"object"!==typeof console.log||console.log(r)}}function $(e,t,n,r){var o=false;try{if("function"===typeof t){o=true;"rejectionHandled"===e?t(r):t(n,r)}}catch(e){i.throwLater(e)}"unhandledRejection"===e?R(e,n,r)||o||K(n,"Unhandled rejection "):R(e,r)}function X(e){var t;if("function"===typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"===typeof e.toString?e.toString():s.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var r=JSON.stringify(e);t=r}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+J(t)+">, no stack trace)"}function J(e){var t=41;if(e.length<t)return e;return e.substr(0,t-3)+"..."}function Z(){return"function"===typeof ie}var ee=function(){return false};var te=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function ne(e){var t=e.match(te);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function re(e,t){if(!Z())return;var n=e.stack.split("\n");var r=t.stack.split("\n");var o=-1;var i=-1;var a;var s;for(var u=0;u<n.length;++u){var c=ne(n[u]);if(c){a=c.fileName;o=c.line;break}}for(var u=0;u<r.length;++u){var c=ne(r[u]);if(c){s=c.fileName;i=c.line;break}}if(o<0||i<0||!a||!s||a!==s||o>=i)return;ee=function(e){if(f.test(e))return true;var t=ne(e);if(t&&t.fileName===a&&o<=t.line&&t.line<=i)return true;return false}}function oe(e){this._parent=e;this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ie(this,oe);t>32&&this.uncycle()}s.inherits(oe,Error);r.CapturedTrace=oe;oe.prototype.uncycle=function(){var e=this._length;if(e<2)return;var t=[];var n={};for(var r=0,o=this;void 0!==o;++r){t.push(o);o=o._parent}e=this._length=r;for(var r=e-1;r>=0;--r){var i=t[r].stack;void 0===n[i]&&(n[i]=r)}for(var r=0;r<e;++r){var a=t[r].stack;var s=n[a];if(void 0!==s&&s!==r){if(s>0){t[s-1]._parent=void 0;t[s-1]._length=1}t[r]._parent=void 0;t[r]._length=1;var u=r>0?t[r-1]:this;if(s<e-1){u._parent=t[s+1];u._parent.uncycle();u._length=u._parent._length+1}else{u._parent=void 0;u._length=1}var c=u._length+1;for(var l=r-2;l>=0;--l){t[l]._length=c;c++}return}}};oe.prototype.attachExtraTrace=function(e){if(e.__stackCleaned__)return;this.uncycle();var t=Q(e);var n=t.message;var r=[t.stack];var o=this;while(void 0!==o){r.push(W(o.stack.split("\n")));o=o._parent}z(r);q(r);s.notEnumerableProp(e,"stack",G(n,r));s.notEnumerableProp(e,"__stackCleaned__",true)};var ie=function e(){var t=/^\s*at\s*/;var n=function(e,t){if("string"===typeof e)return e;if(void 0!==t.name&&void 0!==t.message)return t.toString();return X(t)};if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){Error.stackTraceLimit+=6;h=t;v=n;var r=Error.captureStackTrace;ee=function(e){return f.test(e)};return function(e,t){Error.stackTraceLimit+=6;r(e,t);Error.stackTraceLimit-=6}}var o=new Error;if("string"===typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0){h=/@/;v=n;m=true;return function e(t){t.stack=(new Error).stack}}var i;try{throw new Error}catch(e){i="stack"in e}if(!("stack"in o)&&i&&"number"===typeof Error.stackTraceLimit){h=t;v=n;return function e(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6}}v=function(e,t){if("string"===typeof e)return e;if(("object"===typeof t||"function"===typeof t)&&void 0!==t.name&&void 0!==t.message)return t.toString();return X(t)};return null}([]);if("undefined"!==typeof console&&"undefined"!==typeof console.warn){_=function(e){console.warn(e)};s.isNode&&t.stderr.isTTY?_=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:s.isNode||"string"!==typeof(new Error).stack||(_=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")})}var ae={warnings:g,longStackTraces:false,cancellation:false,monitoring:false};b&&n.longStackTraces();return{longStackTraces:function(){return ae.longStackTraces},warnings:function(){return ae.warnings},cancellation:function(){return ae.cancellation},monitoring:function(){return ae.monitoring},propagateFromFunction:function(){return I},boundValueFunction:function(){return D},checkForgottenReturns:B,setBounds:re,warn:H,deprecated:U,CapturedTrace:oe,fireDomEvent:E,fireGlobalEvent:S}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){n instanceof e&&n.suppressUnhandledRejections();return this._then(t,void 0,void 0,{value:n},void 0)};e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)};e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1];var r=function(){throw t};return this.caught(e,r)};e.prototype.catchReturn=function(n){if(arguments.length<=1){n instanceof e&&n.suppressUnhandledRejections();return this._then(void 0,t,void 0,{value:n},void 0)}var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var o=function(){return r};return this.caught(n,o)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.reduce;var r=e.all;function o(){return r(this)}function i(e,r){return n(e,r,t,t)}e.prototype.each=function(e){return n(this,e,t,0)._then(o,void 0,void 0,this,void 0)};e.prototype.mapSeries=function(e){return n(this,e,t,t)};e.each=function(e,r){return n(e,r,t,0)._then(o,void 0,void 0,e,void 0)};e.mapSeries=i}},{}],12:[function(e,t,n){"use strict";var r=e("./es5");var o=r.freeze;var i=e("./util");var a=i.inherits;var s=i.notEnumerableProp;function u(e,t){function n(r){if(!(this instanceof n))return new n(r);s(this,"message","string"===typeof r?r:t);s(this,"name",e);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}a(n,Error);return n}var c,l;var f=u("Warning","warning");var p=u("CancellationError","cancellation error");var d=u("TimeoutError","timeout error");var h=u("AggregateError","aggregate error");try{c=TypeError;l=RangeError}catch(e){c=u("TypeError","type error");l=u("RangeError","range error")}var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" ");for(var m=0;m<v.length;++m)"function"===typeof Array.prototype[v[m]]&&(h.prototype[v[m]]=Array.prototype[v[m]]);r.defineProperty(h.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});h.prototype["isOperational"]=true;var _=0;h.prototype.toString=function(){var e=Array(4*_+1).join(" ");var t="\n"+e+"AggregateError of:\n";_++;e=Array(4*_+1).join(" ");for(var n=0;n<this.length;++n){var r=this[n]===this?"[Circular AggregateError]":this[n]+"";var o=r.split("\n");for(var i=0;i<o.length;++i)o[i]=e+o[i];r=o.join("\n");t+=r+"\n"}_--;return t};function y(e){if(!(this instanceof y))return new y(e);s(this,"name","OperationalError");s(this,"message",e);this.cause=e;this["isOperational"]=true;if(e instanceof Error){s(this,"message",e.message);s(this,"stack",e.stack)}else Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}a(y,Error);var g=Error["__BluebirdErrorTypes__"];if(!g){g=o({CancellationError:p,TimeoutError:d,OperationalError:y,RejectionError:y,AggregateError:h});r.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:false,enumerable:false,configurable:false})}t.exports={Error:Error,TypeError:c,RangeError:l,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!!(!n||n.writable||n.set)}};else{var o={}.hasOwnProperty;var i={}.toString;var a={}.constructor.prototype;var s=function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t};var u=function(e,t){return{value:e[t]}};var c=function(e,t,n){e[t]=n.value;return e};var l=function(e){return e};var f=function(e){try{return Object(e).constructor.prototype}catch(e){return a}};var p=function(e){try{return"[object Array]"===i.call(e)}catch(e){return false}};t.exports={isArray:p,keys:s,names:s,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return true}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)};e.filter=function(e,r,o){return n(e,r,o,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r){var o=e("./util");var i=t.CancellationError;var a=o.errorObj;var s=e("./catch_filter")(r);function u(e,t,n){this.promise=e;this.type=t;this.handler=n;this.called=false;this.cancelPromise=null}u.prototype.isFinallyHandler=function(){return 0===this.type};function c(e){this.finallyHandler=e}c.prototype._resultCancelled=function(){l(this.finallyHandler)};function l(e,t){if(null!=e.cancelPromise){arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel();e.cancelPromise=null;return true}return false}function f(){return d.call(this,this.promise._target()._settledValue())}function p(e){if(l(this,e))return;a.e=e;return a}function d(e){var o=this.promise;var s=this.handler;if(!this.called){this.called=true;var u=this.isFinallyHandler()?s.call(o._boundValue()):s.call(o._boundValue(),e);if(u===r)return u;if(void 0!==u){o._setReturnedNonUndefined();var d=n(u,o);if(d instanceof t){if(null!=this.cancelPromise){if(d._isCancelled()){var h=new i("late cancellation observer");o._attachExtraTrace(h);a.e=h;return a}d.isPending()&&d._attachCancellationCallback(new c(this))}return d._then(f,p,void 0,this,void 0)}}}if(o.isRejected()){l(this);a.e=e;return a}l(this);return e}t.prototype._passThrough=function(e,t,n,r){if("function"!==typeof e)return this.then();return this._then(n,r,void 0,new u(this,t,e),void 0)};t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,d,d)};t.prototype.tap=function(e){return this._passThrough(e,1,d)};t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,d);var r=new Array(n-1),i=0,a;for(a=0;a<n-1;++a){var u=arguments[a];if(!o.isObject(u))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+o.classString(u)));r[i++]=u}r.length=i;var c=arguments[a];return this._passThrough(s(r,c,this),1,void 0,d)};return u}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){var s=e("./errors");var u=s.TypeError;var c=e("./util");var l=c.errorObj;var f=c.tryCatch;var p=[];function d(e,n,r){for(var i=0;i<n.length;++i){r._pushContext();var a=f(n[i])(e);r._popContext();if(a===l){r._pushContext();var s=t.reject(l.e);r._popContext();return s}var u=o(a,r);if(u instanceof t)return u}return null}function h(e,n,o,i){if(a.cancellation()){var s=new t(r);var u=this._finallyPromise=new t(r);this._promise=s.lastly(function(){return u});s._captureStackTrace();s._setOnCancel(this)}else{var c=this._promise=new t(r);c._captureStackTrace()}this._stack=i;this._generatorFunction=e;this._receiver=n;this._generator=void 0;this._yieldHandlers="function"===typeof o?[o].concat(p):p;this._yieldedPromise=null;this._cancellationPhase=false}c.inherits(h,i);h.prototype._isResolved=function(){return null===this._promise};h.prototype._cleanup=function(){this._promise=this._generator=null;if(a.cancellation()&&null!==this._finallyPromise){this._finallyPromise._fulfill();this._finallyPromise=null}};h.prototype._promiseCancelled=function(){if(this._isResolved())return;var e="undefined"!==typeof this._generator["return"];var n;if(e){this._promise._pushContext();n=f(this._generator["return"]).call(this._generator,void 0);this._promise._popContext()}else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r;this._promise._attachExtraTrace(r);this._promise._pushContext();n=f(this._generator["throw"]).call(this._generator,r);this._promise._popContext()}this._cancellationPhase=true;this._yieldedPromise=null;this._continue(n)};h.prototype._promiseFulfilled=function(e){this._yieldedPromise=null;this._promise._pushContext();var t=f(this._generator.next).call(this._generator,e);this._promise._popContext();this._continue(t)};h.prototype._promiseRejected=function(e){this._yieldedPromise=null;this._promise._attachExtraTrace(e);this._promise._pushContext();var t=f(this._generator["throw"]).call(this._generator,e);this._promise._popContext();this._continue(t)};h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null;e.cancel()}};h.prototype.promise=function(){return this._promise};h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=void 0;this._promiseFulfilled(void 0)};h.prototype._continue=function(e){var n=this._promise;if(e===l){this._cleanup();return this._cancellationPhase?n.cancel():n._rejectCallback(e.e,false)}var r=e.value;if(true===e.done){this._cleanup();return this._cancellationPhase?n.cancel():n._resolveCallback(r)}var i=o(r,this._promise);if(!(i instanceof t)){i=d(i,this._yieldHandlers,this._promise);if(null===i){this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return}}i=i._target();var a=i._bitField;if(0===(50397184&a)){this._yieldedPromise=i;i._proxy(this,null)}else 0!==(33554432&a)?t._async.invoke(this._promiseFulfilled,this,i._value()):0!==(16777216&a)?t._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()};t.coroutine=function(e,t){if("function"!==typeof e)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler;var r=h;var o=(new Error).stack;return function(){var t=e.apply(this,arguments);var i=new r(void 0,void 0,n,o);var a=i.promise();i._generator=t;i._promiseFulfilled(void 0);return a}};t.coroutine.addYieldHandler=function(e){if("function"!==typeof e)throw new u("expecting a function but got "+c.classString(e));p.push(e)};t.spawn=function(e){a.deprecated("Promise.spawn()","Promise.coroutine()");if("function"!==typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new h(e,this);var o=r.promise();r._run(t.spawn);return o}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){var s=e("./util");var u=s.canEvaluate;var c=s.tryCatch;var l=s.errorObj;var f;var p;var d;var h;var v;var m;var _;var y;false;t.join=function(){var e=arguments.length-1;var t;if(e>0&&"function"===typeof arguments[e]){t=arguments[e];var r;var o;var i;var a;var s;var u;var c;var l;false}var f=[].slice.call(arguments);t&&f.pop();var r=new n(f).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){var s=t._getDomain;var u=e("./util");var c=u.tryCatch;var l=u.errorObj;var f=t._async;function p(e,t,n,r){this.constructor$(e);this._promise._captureStackTrace();var o=s();this._callback=null===o?t:u.domainBind(o,t);this._preservedValues=r===i?new Array(this.length()):null;this._limit=n;this._inFlight=0;this._queue=[];f.invoke(this._asyncInit,this,void 0)}u.inherits(p,n);p.prototype._asyncInit=function(){this._init$(void 0,-2)};p.prototype._init=function(){};p.prototype._promiseFulfilled=function(e,n){var r=this._values;var i=this.length();var s=this._preservedValues;var u=this._limit;if(n<0){n=-1*n-1;r[n]=e;if(u>=1){this._inFlight--;this._drainQueue();if(this._isResolved())return true}}else{if(u>=1&&this._inFlight>=u){r[n]=e;this._queue.push(n);return false}null!==s&&(s[n]=e);var f=this._promise;var p=this._callback;var d=f._boundValue();f._pushContext();var h=c(p).call(d,e,n,i);var v=f._popContext();a.checkForgottenReturns(h,v,null!==s?"Promise.filter":"Promise.map",f);if(h===l){this._reject(h.e);return true}var m=o(h,this._promise);if(m instanceof t){m=m._target();var _=m._bitField;if(0===(50397184&_)){u>=1&&this._inFlight++;r[n]=m;m._proxy(this,-1*(n+1));return false}if(0===(33554432&_)){if(0!==(16777216&_)){this._reject(m._reason());return true}this._cancel();return true}h=m._value()}r[n]=h}var y=++this._totalResolved;if(y>=i){null!==s?this._filter(r,s):this._resolve(r);return true}return false};p.prototype._drainQueue=function(){var e=this._queue;var t=this._limit;var n=this._values;while(e.length>0&&this._inFlight<t){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}};p.prototype._filter=function(e,t){var n=t.length;var r=new Array(n);var o=0;for(var i=0;i<n;++i)e[i]&&(r[o++]=t[i]);r.length=o;this._resolve(r)};p.prototype.preservedValues=function(){return this._preservedValues};function d(e,n,o,i){if("function"!==typeof n)return r("expecting a function but got "+u.classString(n));var a=0;if(void 0!==o){if("object"!==typeof o||null===o)return t.reject(new TypeError("options argument must be an object but it is "+u.classString(o)));if("number"!==typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(o.concurrency)));a=o.concurrency}a="number"===typeof a&&isFinite(a)&&a>=1?a:0;return new p(e,n,a,i).promise()}t.prototype.map=function(e,t){return d(this,e,t,null)};t.map=function(e,t,n,r){return d(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i){var a=e("./util");var s=a.tryCatch;t.method=function(e){if("function"!==typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var r=new t(n);r._captureStackTrace();r._pushContext();var o=s(e).apply(this,arguments);var a=r._popContext();i.checkForgottenReturns(o,a,"Promise.method",r);r._resolveFromSyncValue(o);return r}};t.attempt=t["try"]=function(e){if("function"!==typeof e)return o("expecting a function but got "+a.classString(e));var r=new t(n);r._captureStackTrace();r._pushContext();var u;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1];var l=arguments[2];u=a.isArray(c)?s(e).apply(l,c):s(e).call(l,c)}else u=s(e)();var f=r._popContext();i.checkForgottenReturns(u,f,"Promise.try",r);r._resolveFromSyncValue(u);return r};t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,false):this._resolveCallback(e,true)}}},{"./util":36}],20:[function(e,t,n){"use strict";var r=e("./util");var o=r.maybeWrapAsError;var i=e("./errors");var a=i.OperationalError;var s=e("./es5");function u(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}var c=/^(?:name|message|stack|cause)$/;function l(e){var t;if(u(e)){t=new a(e);t.name=e.name;t.message=e.message;t.stack=e.stack;var n=s.keys(e);for(var o=0;o<n.length;++o){var i=n[o];c.test(i)||(t[i]=e[i])}return t}r.markAsOriginatingFromRejection(e);return e}function f(e,t){return function(n,r){if(null===e)return;if(n){var i=l(o(n));e._attachExtraTrace(i);e._reject(i)}else if(t){var a=[].slice.call(arguments,1);e._fulfill(a)}else e._fulfill(r);e=null}}t.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util");var r=t._async;var o=n.tryCatch;var i=n.errorObj;function a(e,t){var a=this;if(!n.isArray(e))return s.call(a,e,t);var u=o(t).apply(a._boundValue(),[null].concat(e));u===i&&r.throwLater(u.e)}function s(e,t){var n=this;var a=n._boundValue();var s=void 0===e?o(t).call(a,null):o(t).call(a,null,e);s===i&&r.throwLater(s.e)}function u(e,t){var n=this;if(!e){var a=new Error(e+"");a.cause=e;e=a}var s=o(t).call(n._boundValue(),e);s===i&&r.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=s;void 0!==t&&Object(t).spread&&(n=a);this._then(n,u,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){var r=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")};var o=function(){return new T.PromiseInspection(this._target())};var i=function(e){return T.reject(new h(e))};function a(){}var s={};var u=e("./util");var c;c=u.isNode?function(){var e=t.domain;void 0===e&&(e=null);return e}:function(){return null};u.notEnumerableProp(T,"_getDomain",c);var l=e("./es5");var f=e("./async");var p=new f;l.defineProperty(T,"_async",{value:p});var d=e("./errors");var h=T.TypeError=d.TypeError;T.RangeError=d.RangeError;var v=T.CancellationError=d.CancellationError;T.TimeoutError=d.TimeoutError;T.OperationalError=d.OperationalError;T.RejectionError=d.OperationalError;T.AggregateError=d.AggregateError;var m=function(){};var _={};var y={};var g=e("./thenables")(T,m);var b=e("./promise_array")(T,m,g,i,a);var w=e("./context")(T);var j=w.create;var E=e("./debuggability")(T,w);var S=E.CapturedTrace;var C=e("./finally")(T,g,y);var x=e("./catch_filter")(y);var R=e("./nodeback");var P=u.errorObj;var O=u.tryCatch;function k(e,t){if(null==e||e.constructor!==T)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!==typeof t)throw new h("expecting a function but got "+u.classString(t))}function T(e){e!==m&&k(this,e);this._bitField=0;this._fulfillmentHandler0=void 0;this._rejectionHandler0=void 0;this._promise0=void 0;this._receiver0=void 0;this._resolveFromExecutor(e);this._promiseCreated();this._fireEvent("promiseCreated",this)}T.prototype.toString=function(){return"[object Promise]"};T.prototype.caught=T.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n=new Array(t-1),r=0,o;for(o=0;o<t-1;++o){var a=arguments[o];if(!u.isObject(a))return i("Catch statement predicate: expecting an object but got "+u.classString(a));n[r++]=a}n.length=r;e=arguments[o];return this.then(void 0,x(n,e,this))}return this.then(void 0,e)};T.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)};T.prototype.then=function(e,t){if(E.warnings()&&arguments.length>0&&"function"!==typeof e&&"function"!==typeof t){var n=".then() only accepts functions but was passed: "+u.classString(e);arguments.length>1&&(n+=", "+u.classString(t));this._warn(n)}return this._then(e,t,void 0,void 0,void 0)};T.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()};T.prototype.spread=function(e){if("function"!==typeof e)return i("expecting a function but got "+u.classString(e));return this.all()._then(e,void 0,void 0,_,void 0)};T.prototype.toJSON=function(){var e={isFulfilled:false,isRejected:false,fulfillmentValue:void 0,rejectionReason:void 0};if(this.isFulfilled()){e.fulfillmentValue=this.value();e.isFulfilled=true}else if(this.isRejected()){e.rejectionReason=this.reason();e.isRejected=true}return e};T.prototype.all=function(){arguments.length>0&&this._warn(".all() was passed arguments but it does not take any");return new b(this).promise()};T.prototype.error=function(e){return this.caught(u.originatesFromRejection,e)};T.getNewLibraryCopy=n.exports;T.is=function(e){return e instanceof T};T.fromNode=T.fromCallback=function(e){var t=new T(m);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs;var r=O(e)(R(t,n));r===P&&t._rejectCallback(r.e,true);t._isFateSealed()||t._setAsyncGuaranteed();return t};T.all=function(e){return new b(e).promise()};T.cast=function(e){var t=g(e);if(!(t instanceof T)){t=new T(m);t._captureStackTrace();t._setFulfilled();t._rejectionHandler0=e}return t};T.resolve=T.fulfilled=T.cast;T.reject=T.rejected=function(e){var t=new T(m);t._captureStackTrace();t._rejectCallback(e,true);return t};T.setScheduler=function(e){if("function"!==typeof e)throw new h("expecting a function but got "+u.classString(e));return p.setScheduler(e)};T.prototype._then=function(e,t,n,r,o){var i=void 0!==o;var a=i?o:new T(m);var s=this._target();var l=s._bitField;if(!i){a._propagateFrom(this,3);a._captureStackTrace();void 0===r&&0!==(2097152&this._bitField)&&(r=0===(50397184&l)?s===this?void 0:this._boundTo:this._boundValue());this._fireEvent("promiseChained",this,a)}var f=c();if(0===(50397184&l))s._addCallbacks(e,t,a,r,f);else{var d,h,_=s._settlePromiseCtx;if(0!==(33554432&l)){h=s._rejectionHandler0;d=e}else if(0!==(16777216&l)){h=s._fulfillmentHandler0;d=t;s._unsetRejectionIsUnhandled()}else{_=s._settlePromiseLateCancellationObserver;h=new v("late cancellation observer");s._attachExtraTrace(h);d=t}p.invoke(_,s,{handler:null===f?d:"function"===typeof d&&u.domainBind(f,d),promise:a,receiver:r,value:h})}return a};T.prototype._length=function(){return 65535&this._bitField};T.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)};T.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)};T.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e};T.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField;this._fireEvent("promiseFulfilled",this)};T.prototype._setRejected=function(){this._bitField=16777216|this._bitField;this._fireEvent("promiseRejected",this)};T.prototype._setFollowing=function(){this._bitField=67108864|this._bitField;this._fireEvent("promiseResolved",this)};T.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField};T.prototype._isFinal=function(){return(4194304&this._bitField)>0};T.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField};T.prototype._setCancelled=function(){this._bitField=65536|this._bitField;this._fireEvent("promiseCancelled",this)};T.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField};T.prototype._setAsyncGuaranteed=function(){if(p.hasCustomScheduler())return;this._bitField=134217728|this._bitField};T.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t===s)return;if(void 0===t&&this._isBound())return this._boundValue();return t};T.prototype._promiseAt=function(e){return this[4*e-4+2]};T.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]};T.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]};T.prototype._boundValue=function(){};T.prototype._migrateCallback0=function(e){var t=e._bitField;var n=e._fulfillmentHandler0;var r=e._rejectionHandler0;var o=e._promise0;var i=e._receiverAt(0);void 0===i&&(i=s);this._addCallbacks(n,r,o,i,null)};T.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t);var r=e._rejectionHandlerAt(t);var o=e._promiseAt(t);var i=e._receiverAt(t);void 0===i&&(i=s);this._addCallbacks(n,r,o,i,null)};T.prototype._addCallbacks=function(e,t,n,r,o){var i=this._length();if(i>=65531){i=0;this._setLength(0)}if(0===i){this._promise0=n;this._receiver0=r;"function"===typeof e&&(this._fulfillmentHandler0=null===o?e:u.domainBind(o,e));"function"===typeof t&&(this._rejectionHandler0=null===o?t:u.domainBind(o,t))}else{var a=4*i-4;this[a+2]=n;this[a+3]=r;"function"===typeof e&&(this[a+0]=null===o?e:u.domainBind(o,e));"function"===typeof t&&(this[a+1]=null===o?t:u.domainBind(o,t))}this._setLength(i+1);return i};T.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)};T.prototype._resolveCallback=function(e,t){if(0!==(117506048&this._bitField))return;if(e===this)return this._rejectCallback(r(),false);var n=g(e,this);if(!(n instanceof T))return this._fulfill(e);t&&this._propagateFrom(n,2);var o=n._target();if(o===this){this._reject(r());return}var i=o._bitField;if(0===(50397184&i)){var a=this._length();a>0&&o._migrateCallback0(this);for(var s=1;s<a;++s)o._migrateCallbackAt(this,s);this._setFollowing();this._setLength(0);this._setFollowee(o)}else if(0!==(33554432&i))this._fulfill(o._value());else if(0!==(16777216&i))this._reject(o._reason());else{var u=new v("late cancellation observer");o._attachExtraTrace(u);this._reject(u)}};T.prototype._rejectCallback=function(e,t,n){var r=u.ensureErrorObject(e);var o=r===e;if(!o&&!n&&E.warnings()){var i="a promise was rejected with a non-error: "+u.classString(e);this._warn(i,true)}this._attachExtraTrace(r,!!t&&o);this._reject(e)};T.prototype._resolveFromExecutor=function(e){if(e===m)return;var t=this;this._captureStackTrace();this._pushContext();var n=true;var r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=false;this._popContext();void 0!==r&&t._rejectCallback(r,true)};T.prototype._settlePromiseFromHandler=function(e,t,n,r){var o=r._bitField;if(0!==(65536&o))return;r._pushContext();var i;if(t===_)if(n&&"number"===typeof n.length)i=O(e).apply(this._boundValue(),n);else{i=P;i.e=new h("cannot .spread() a non-array: "+u.classString(n))}else i=O(e).call(t,n);var a=r._popContext();o=r._bitField;if(0!==(65536&o))return;if(i===y)r._reject(n);else if(i===P)r._rejectCallback(i.e,false);else{E.checkForgottenReturns(i,a,"",r,this);r._resolveCallback(i)}};T.prototype._target=function(){var e=this;while(e._isFollowing())e=e._followee();return e};T.prototype._followee=function(){return this._rejectionHandler0};T.prototype._setFollowee=function(e){this._rejectionHandler0=e};T.prototype._settlePromise=function(e,t,n,r){var i=e instanceof T;var s=this._bitField;var u=0!==(134217728&s);if(0!==(65536&s)){i&&e._invokeInternalOnCancel();if(n instanceof C&&n.isFinallyHandler()){n.cancelPromise=e;O(t).call(n,r)===P&&e._reject(P.e)}else t===o?e._fulfill(o.call(n)):n instanceof a?n._promiseCancelled(e):i||e instanceof b?e._cancel():n.cancel()}else if("function"===typeof t)if(i){u&&e._setAsyncGuaranteed();this._settlePromiseFromHandler(t,n,r,e)}else t.call(n,r,e);else if(n instanceof a)n._isResolved()||(0!==(33554432&s)?n._promiseFulfilled(r,e):n._promiseRejected(r,e));else if(i){u&&e._setAsyncGuaranteed();0!==(33554432&s)?e._fulfill(r):e._reject(r)}};T.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler;var n=e.promise;var r=e.receiver;var o=e.value;"function"===typeof t?n instanceof T?this._settlePromiseFromHandler(t,r,o,n):t.call(r,o,n):n instanceof T&&n._reject(o)};T.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)};T.prototype._settlePromise0=function(e,t,n){var r=this._promise0;var o=this._receiverAt(0);this._promise0=void 0;this._receiver0=void 0;this._settlePromise(r,e,o,t)};T.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0};T.prototype._fulfill=function(e){var t=this._bitField;if((117506048&t)>>>16)return;if(e===this){var n=r();this._attachExtraTrace(n);return this._reject(n)}this._setFulfilled();this._rejectionHandler0=e;(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():p.settlePromises(this))};T.prototype._reject=function(e){var t=this._bitField;if((117506048&t)>>>16)return;this._setRejected();this._fulfillmentHandler0=e;if(this._isFinal())return p.fatalError(e,u.isNode);(65535&t)>0?p.settlePromises(this):this._ensurePossibleRejectionHandled()};T.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n);var o=this._promiseAt(n);var i=this._receiverAt(n);this._clearCallbackDataAtIndex(n);this._settlePromise(o,r,i,t)}};T.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n);var o=this._promiseAt(n);var i=this._receiverAt(n);this._clearCallbackDataAtIndex(n);this._settlePromise(o,r,i,t)}};T.prototype._settlePromises=function(){var e=this._bitField;var t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e);this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e);this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()};T.prototype._settledValue=function(){var e=this._bitField;if(0!==(33554432&e))return this._rejectionHandler0;if(0!==(16777216&e))return this._fulfillmentHandler0};function F(e){this.promise._resolveCallback(e)}function M(e){this.promise._rejectCallback(e,false)}T.defer=T.pending=function(){E.deprecated("Promise.defer","new Promise");var e=new T(m);return{promise:e,resolve:F,reject:M}};u.notEnumerableProp(T,"_makeSelfResolutionError",r);e("./method")(T,m,g,i,E);e("./bind")(T,m,g,E);e("./cancel")(T,b,i,E);e("./direct_resolve")(T);e("./synchronous_inspection")(T);e("./join")(T,b,g,m,p,c);T.Promise=T;T.version="3.5.0";e("./map.js")(T,b,i,g,m,E);e("./call_get.js")(T);e("./using.js")(T,i,g,j,m,E);e("./timers.js")(T,m,E);e("./generators.js")(T,i,m,g,a,E);e("./nodeify.js")(T);e("./promisify.js")(T,m);e("./props.js")(T,b,g,i);e("./race.js")(T,m,g,i);e("./reduce.js")(T,b,i,g,m,E);e("./settle.js")(T,b,E);e("./some.js")(T,b,i);e("./filter.js")(T,m);e("./each.js")(T,m);e("./any.js")(T);u.toFastProperties(T);u.toFastProperties(T.prototype);function A(e){var t=new T(m);t._fulfillmentHandler0=e;t._rejectionHandler0=e;t._promise0=e;t._receiver0=e}A({a:1});A({b:2});A({c:3});A(1);A(function(){});A(void 0);A(false);A(new T(m));E.setBounds(f.firstLineError,u.lastLineError);return T}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i){var a=e("./util");var s=a.isArray;function u(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function c(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3);r._setOnCancel(this);this._values=e;this._length=0;this._totalResolved=0;this._init(void 0,-2)}a.inherits(c,i);c.prototype.length=function(){return this._length};c.prototype.promise=function(){return this._promise};c.prototype._init=function e(n,i){var s=r(this._values,this._promise);if(s instanceof t){s=s._target();var c=s._bitField;this._values=s;if(0===(50397184&c)){this._promise._setAsyncGuaranteed();return s._then(e,this._reject,void 0,this,i)}if(0===(33554432&c))return 0!==(16777216&c)?this._reject(s._reason()):this._cancel();s=s._value()}s=a.asArray(s);if(null===s){var l=o("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(l,false);return}if(0===s.length){-5===i?this._resolveEmptyArray():this._resolve(u(i));return}this._iterate(s)};c.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n;this._values=this.shouldCopyValues()?new Array(n):this._values;var o=this._promise;var i=false;var a=null;for(var s=0;s<n;++s){var u=r(e[s],o);if(u instanceof t){u=u._target();a=u._bitField}else a=null;if(i)null!==a&&u.suppressUnhandledRejections();else if(null!==a)if(0===(50397184&a)){u._proxy(this,s);this._values[s]=u}else i=0!==(33554432&a)?this._promiseFulfilled(u._value(),s):0!==(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s);else i=this._promiseFulfilled(u,s)}i||o._setAsyncGuaranteed()};c.prototype._isResolved=function(){return null===this._values};c.prototype._resolve=function(e){this._values=null;this._promise._fulfill(e)};c.prototype._cancel=function(){if(this._isResolved()||!this._promise._isCancellable())return;this._values=null;this._promise._cancel()};c.prototype._reject=function(e){this._values=null;this._promise._rejectCallback(e,false)};c.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){this._resolve(this._values);return true}return false};c.prototype._promiseCancelled=function(){this._cancel();return true};c.prototype._promiseRejected=function(e){this._totalResolved++;this._reject(e);return true};c.prototype._resultCancelled=function(){if(this._isResolved())return;var e=this._values;this._cancel();if(e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()};c.prototype.shouldCopyValues=function(){return true};c.prototype.getActualLength=function(e){return e};return c}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){var r={};var o=e("./util");var i=e("./nodeback");var a=o.withAppended;var s=o.maybeWrapAsError;var u=o.canEvaluate;var c=e("./errors").TypeError;var l="Async";var f={__isPromisified__:true};var p=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var d=new RegExp("^(?:"+p.join("|")+")$");var h=function(e){return o.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function v(e){return!d.test(e)}function m(e){try{return true===e.__isPromisified__}catch(e){return false}}function _(e,t,n){var r=o.getDataPropertyOrDefault(e,t+n,f);return!!r&&m(r)}function y(e,t,n){for(var r=0;r<e.length;r+=2){var o=e[r];if(n.test(o)){var i=o.replace(n,"");for(var a=0;a<e.length;a+=2)if(e[a]===i)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}}function g(e,t,n,r){var i=o.inheritedDataKeys(e);var a=[];for(var s=0;s<i.length;++s){var u=i[s];var c=e[u];var l=r===h||h(u,c,e);"function"!==typeof c||m(c)||_(e,u,t)||!r(u,c,e,l)||a.push(u,c)}y(a,t,n);return a}var b=function(e){return e.replace(/([$])/,"\\$")};var w;var j;var E;var S;var C;false;function x(e,u,c,l,f,p){var d=function(){return this}();var h=e;"string"===typeof h&&(e=l);function v(){var o=u;u===r&&(o=this);var c=new t(n);c._captureStackTrace();var l="string"===typeof h&&this!==d?this[h]:e;var f=i(c,p);try{l.apply(o,a(arguments,f))}catch(e){c._rejectCallback(s(e),true,true)}c._isFateSealed()||c._setAsyncGuaranteed();return c}o.notEnumerableProp(v,"__isPromisified__",true);return v}var R=u?w:x;function P(e,t,n,i,a){var s=new RegExp(b(t)+"$");var u=g(e,t,s,n);for(var c=0,l=u.length;c<l;c+=2){var f=u[c];var p=u[c+1];var d=f+t;if(i===R)e[d]=R(f,r,f,p,t,a);else{var h=i(p,function(){return R(f,r,f,p,t,a)});o.notEnumerableProp(h,"__isPromisified__",true);e[d]=h}}o.toFastProperties(e);return e}function O(e,t,n){return R(e,t,void 0,e,null,n)}t.promisify=function(e,t){if("function"!==typeof e)throw new c("expecting a function but got "+o.classString(e));if(m(e))return e;t=Object(t);var n=void 0===t.context?r:t.context;var i=!!t.multiArgs;var a=O(e,n,i);o.copyDescriptors(e,a,v);return a};t.promisifyAll=function(e,t){if("function"!==typeof e&&"object"!==typeof e)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs;var r=t.suffix;"string"!==typeof r&&(r=l);var i=t.filter;"function"!==typeof i&&(i=h);var a=t.promisifier;"function"!==typeof a&&(a=R);if(!o.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");var s=o.inheritedDataKeys(e);for(var u=0;u<s.length;++u){var f=e[s[u]];if("constructor"!==s[u]&&o.isClass(f)){P(f.prototype,r,i,a,n);P(f,r,i,a,n)}}return P(e,r,i,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){var i=e("./util");var a=i.isObject;var s=e("./es5");var u;"function"===typeof Map&&(u=Map);var c=function(){var e=0;var t=0;function n(n,r){this[e]=n;this[e+t]=r;e++}return function r(o){t=o.size;e=0;var i=new Array(2*o.size);o.forEach(n,i);return i}}();var l=function(e){var t=new u;var n=e.length/2|0;for(var r=0;r<n;++r){var o=e[n+r];var i=e[r];t.set(o,i)}return t};function f(e){var t=false;var n;if(void 0!==u&&e instanceof u){n=c(e);t=true}else{var r=s.keys(e);var o=r.length;n=new Array(2*o);for(var i=0;i<o;++i){var a=r[i];n[i]=e[a];n[i+o]=a}}this.constructor$(n);this._isMap=t;this._init$(void 0,t?-6:-3)}i.inherits(f,n);f.prototype._init=function(){};f.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=l(this._values);else{r={};var o=this.length();for(var i=0,a=this.length();i<a;++i)r[this._values[i+o]]=this._values[i]}this._resolve(r);return true}return false};f.prototype.shouldCopyValues=function(){return false};f.prototype.getActualLength=function(e){return e>>1};function p(e){var n;var i=r(e);if(!a(i))return o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n");n=i instanceof t?i._then(t.props,void 0,void 0,void 0,void 0):new f(i).promise();i instanceof t&&n._propagateFrom(i,2);return n}t.prototype.props=function(){return p(this)};t.props=function(e){return p(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e,t,n,r,o){for(var i=0;i<o;++i){n[i+r]=e[i+t];e[i+t]=void 0}}function o(e){this._capacity=e;this._length=0;this._front=0}o.prototype._willBeOverCapacity=function(e){return this._capacity<e};o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e;this._length=t+1};o.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r)){this._pushOne(e);this._pushOne(t);this._pushOne(n);return}var o=this._front+r-3;this._checkCapacity(r);var i=this._capacity-1;this[o+0&i]=e;this[o+1&i]=t;this[o+2&i]=n;this._length=r};o.prototype.shift=function(){var e=this._front,t=this[e];this[e]=void 0;this._front=e+1&this._capacity-1;this._length--;return t};o.prototype.length=function(){return this._length};o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)};o.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front;var o=this._length;var i=n+o&t-1;r(this,0,this,t,i)};t.exports=o},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){var i=e("./util");var a=function(e){return e.then(function(t){return s(t,e)})};function s(e,s){var u=r(e);if(u instanceof t)return a(u);e=i.asArray(e);if(null===e)return o("expecting an array or an iterable object but got "+i.classString(e));var c=new t(n);void 0!==s&&c._propagateFrom(s,3);var l=c._fulfill;var f=c._reject;for(var p=0,d=e.length;p<d;++p){var h=e[p];if(void 0===h&&!(p in e))continue;t.cast(h)._then(l,f,void 0,c,null)}return c}t.race=function(e){return s(e,void 0)};t.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){var s=t._getDomain;var u=e("./util");var c=u.tryCatch;function l(e,n,r,o){this.constructor$(e);var a=s();this._fn=null===a?n:u.domainBind(a,n);if(void 0!==r){r=t.resolve(r);r._attachCancellationCallback(this)}this._initialValue=r;this._currentCancellable=null;this._eachValues=o===i?Array(this._length):0===o?null:void 0;this._promise._captureStackTrace();this._init$(void 0,-5)}u.inherits(l,n);l.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)};l.prototype._eachComplete=function(e){null!==this._eachValues&&this._eachValues.push(e);return this._eachValues};l.prototype._init=function(){};l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)};l.prototype.shouldCopyValues=function(){return false};l.prototype._resolve=function(e){this._promise._resolveCallback(e);this._values=null};l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();if(this._isResolved())return;this._resultCancelled$();this._currentCancellable instanceof t&&this._currentCancellable.cancel();this._initialValue instanceof t&&this._initialValue.cancel()};l.prototype._iterate=function(e){this._values=e;var n;var r;var o=e.length;if(void 0!==this._initialValue){n=this._initialValue;r=0}else{n=t.resolve(e[0]);r=1}this._currentCancellable=n;if(!n.isRejected())for(;r<o;++r){var i={accum:null,value:e[r],index:r,length:o,array:this};n=n._then(d,void 0,void 0,i,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0));n._then(f,f,void 0,n,this)};t.prototype.reduce=function(e,t){return p(this,e,t,null)};t.reduce=function(e,t,n,r){return p(e,t,n,r)};function f(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function p(e,t,n,o){if("function"!==typeof t)return r("expecting a function but got "+u.classString(t));var i=new l(e,t,n,o);return i.promise()}function d(e){this.accum=e;this.array._gotAccum(e);var n=o(this.value,this.array._promise);if(n instanceof t){this.array._currentCancellable=n;return n._then(h,void 0,void 0,this,void 0)}return h.call(this,n)}function h(e){var n=this.array;var r=n._promise;var o=c(n._fn);r._pushContext();var i;i=void 0!==n._eachValues?o.call(r._boundValue(),e,this.index,this.length):o.call(r._boundValue(),this.accum,e,this.index,this.length);i instanceof t&&(n._currentCancellable=i);var s=r._popContext();a.checkForgottenReturns(i,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r);return i}}},{"./util":36}],29:[function(e,o,i){"use strict";var a=e("./util");var s;var u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};var c=a.getNativePromise();if(a.isNode&&"undefined"===typeof MutationObserver){var l=n.setImmediate;var f=t.nextTick;s=a.isRecentNode?function(e){l.call(n,e)}:function(e){f.call(t,e)}}else if("function"===typeof c&&"function"===typeof c.resolve){var p=c.resolve();s=function(e){p.then(e)}}else s="undefined"===typeof MutationObserver||"undefined"!==typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!==typeof r?function(e){r(e)}:"undefined"!==typeof setTimeout?function(e){setTimeout(e,0)}:u:function(){var e=document.createElement("div");var t={attributes:true};var n=false;var r=document.createElement("div");var o=new MutationObserver(function(){e.classList.toggle("foo");n=false});o.observe(r,t);var i=function(){if(n)return;n=true;r.classList.toggle("foo")};return function n(r){var o=new MutationObserver(function(){o.disconnect();r()});o.observe(e,t);i()}}();o.exports=s},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){var o=t.PromiseInspection;var i=e("./util");function a(e){this.constructor$(e)}i.inherits(a,n);a.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){this._resolve(this._values);return true}return false};a.prototype._promiseFulfilled=function(e,t){var n=new o;n._bitField=33554432;n._settledValueField=e;return this._promiseResolved(t,n)};a.prototype._promiseRejected=function(e,t){var n=new o;n._bitField=16777216;n._settledValueField=e;return this._promiseResolved(t,n)};t.settle=function(e){r.deprecated(".settle()",".reflect()");return new a(e).promise()};t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){var o=e("./util");var i=e("./errors").RangeError;var a=e("./errors").AggregateError;var s=o.isArray;var u={};function c(e){this.constructor$(e);this._howMany=0;this._unwrap=false;this._initialized=false}o.inherits(c,n);c.prototype._init=function(){if(!this._initialized)return;if(0===this._howMany){this._resolve([]);return}this._init$(void 0,-5);var e=s(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))};c.prototype.init=function(){this._initialized=true;this._init()};c.prototype.setUnwrap=function(){this._unwrap=true};c.prototype.howMany=function(){return this._howMany};c.prototype.setHowMany=function(e){this._howMany=e};c.prototype._promiseFulfilled=function(e){this._addFulfilled(e);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values);return true}return false};c.prototype._promiseRejected=function(e){this._addRejected(e);return this._checkOutcome()};c.prototype._promiseCancelled=function(){if(this._values instanceof t||null==this._values)return this._cancel();this._addRejected(u);return this._checkOutcome()};c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){var e=new a;for(var t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);e.length>0?this._reject(e):this._cancel();return true}return false};c.prototype._fulfilled=function(){return this._totalResolved};c.prototype._rejected=function(){return this._values.length-this.length()};c.prototype._addRejected=function(e){this._values.push(e)};c.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e};c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};c.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new i(t)};c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function l(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(e);var o=n.promise();n.setHowMany(t);n.init();return o}t.some=function(e,t){return l(e,t)};t.prototype.some=function(e){return l(this,e)};t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){if(void 0!==e){e=e._target();this._bitField=e._bitField;this._settledValueField=e._isFateSealed()?e._settledValue():void 0}else{this._bitField=0;this._settledValueField=void 0}}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()};var r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()};var o=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)};var i=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)};var a=t.prototype.isPending=function(){return 0===(50397184&this._bitField)};var s=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)};e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)};e.prototype._isCancelled=function(){return this._target().__isCancelled()};e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)};e.prototype.isPending=function(){return a.call(this._target())};e.prototype.isRejected=function(){return i.call(this._target())};e.prototype.isFulfilled=function(){return o.call(this._target())};e.prototype.isResolved=function(){return s.call(this._target())};e.prototype.value=function(){return n.call(this._target())};e.prototype.reason=function(){var e=this._target();e._unsetRejectionIsUnhandled();return r.call(e)};e.prototype._value=function(){return this._settledValue()};e.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue()};e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){var r=e("./util");var o=r.errorObj;var i=r.isObject;function a(e,r){if(i(e)){if(e instanceof t)return e;var a=u(e);if(a===o){r&&r._pushContext();var s=t.reject(a.e);r&&r._popContext();return s}if("function"===typeof a){if(l(e)){var s=new t(n);e._then(s._fulfill,s._reject,void 0,s,null);return s}return f(e,a,r)}}return e}function s(e){return e.then}function u(e){try{return s(e)}catch(e){o.e=e;return o}}var c={}.hasOwnProperty;function l(e){try{return c.call(e,"_promise0")}catch(e){return false}}function f(e,i,a){var s=new t(n);var u=s;a&&a._pushContext();s._captureStackTrace();a&&a._popContext();var c=true;var l=r.tryCatch(i).call(e,f,p);c=false;if(s&&l===o){s._rejectCallback(l.e,true,true);s=null}function f(e){if(!s)return;s._resolveCallback(e);s=null}function p(e){if(!s)return;s._rejectCallback(e,c,true);s=null}return u}return a}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){var o=e("./util");var i=t.TimeoutError;function a(e){this.handle=e}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(e){return u(+this).thenReturn(e)};var u=t.delay=function(e,o){var i;var u;if(void 0!==o){i=t.resolve(o)._then(s,null,null,e,void 0);r.cancellation()&&o instanceof t&&i._setOnCancel(o)}else{i=new t(n);u=setTimeout(function(){i._fulfill()},+e);r.cancellation()&&i._setOnCancel(new a(u));i._captureStackTrace()}i._setAsyncGuaranteed();return i};t.prototype.delay=function(e){return u(e,this)};var c=function(e,t,n){var r;r="string"!==typeof t?t instanceof Error?t:new i("operation timed out"):new i(t);o.markAsOriginatingFromRejection(r);e._attachExtraTrace(r);e._reject(r);null!=n&&n.cancel()};function l(e){clearTimeout(this.handle);return e}function f(e){clearTimeout(this.handle);throw e}t.prototype.timeout=function(e,t){e=+e;var n,o;var i=new a(setTimeout(function e(){n.isPending()&&c(n,t,o)},e));if(r.cancellation()){o=this.then();n=o._then(l,f,void 0,i,void 0);n._setOnCancel(i)}else n=this._then(l,f,void 0,i,void 0);return n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){var s=e("./util");var u=e("./errors").TypeError;var c=e("./util").inherits;var l=s.errorObj;var f=s.tryCatch;var p={};function d(e){setTimeout(function(){throw e},0)}function h(e){var t=r(e);t!==e&&"function"===typeof e._isDisposable&&"function"===typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer());return t}function v(e,n){var o=0;var a=e.length;var s=new t(i);function u(){if(o>=a)return s._fulfill();var i=h(e[o++]);if(i instanceof t&&i._isDisposable()){try{i=r(i._getDisposer().tryDispose(n),e.promise)}catch(e){return d(e)}if(i instanceof t)return i._then(u,d,null,null,null)}u()}u();return s}function m(e,t,n){this._data=e;this._promise=t;this._context=n}m.prototype.data=function(){return this._data};m.prototype.promise=function(){return this._promise};m.prototype.resource=function(){if(this.promise().isFulfilled())return this.promise().value();return p};m.prototype.tryDispose=function(e){var t=this.resource();var n=this._context;void 0!==n&&n._pushContext();var r=t!==p?this.doDispose(t,e):null;void 0!==n&&n._popContext();this._promise._unsetDisposable();this._data=null;return r};m.isDisposer=function(e){return null!=e&&"function"===typeof e.resource&&"function"===typeof e.tryDispose};function _(e,t,n){this.constructor$(e,t,n)}c(_,m);_.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)};function y(e){if(m.isDisposer(e)){this.resources[this.index]._setDisposable(e);return e.promise()}return e}function g(e){this.length=e;this.promise=null;this[e-1]=null}g.prototype._resultCancelled=function(){var e=this.length;for(var n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}};t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var o=arguments[e-1];if("function"!==typeof o)return n("expecting a function but got "+s.classString(o));var i;var u=true;if(2===e&&Array.isArray(arguments[0])){i=arguments[0];e=i.length;u=false}else{i=arguments;e--}var c=new g(e);for(var p=0;p<e;++p){var d=i[p];if(m.isDisposer(d)){var h=d;d=d.promise();d._setDisposable(h)}else{var _=r(d);_ instanceof t&&(d=_._then(y,null,null,{resources:c,index:p},void 0))}c[p]=d}var b=new Array(c.length);for(var p=0;p<b.length;++p)b[p]=t.resolve(c[p]).reflect();var w=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected()){l.e=n.error();return l}if(!n.isFulfilled()){w.cancel();return}e[t]=n.value()}j._pushContext();o=f(o);var r=u?o.apply(void 0,e):o(e);var i=j._popContext();a.checkForgottenReturns(r,i,"Promise.using",j);return r});var j=w.lastly(function(){var e=new t.PromiseInspection(w);return v(c,e)});c.promise=j;j._setOnCancel(c);return j};t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField;this._disposer=e};t.prototype._isDisposable=function(){return(131072&this._bitField)>0};t.prototype._getDisposer=function(){return this._disposer};t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField;this._disposer=void 0};t.prototype.disposer=function(e){if("function"===typeof e)return new _(e,this,o());throw new u}}},{"./errors":12,"./util":36}],36:[function(e,r,o){"use strict";var i=e("./es5");var a="undefined"==typeof navigator;var s={e:{}};var u;var c="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n?n:void 0!==this?this:null;function l(){try{var e=u;u=null;return e.apply(this,arguments)}catch(e){s.e=e;return s}}function f(e){u=e;return l}var p=function(e,t){var n={}.hasOwnProperty;function r(){this.constructor=e;this.constructor$=t;for(var r in t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}r.prototype=t.prototype;e.prototype=new r;return e.prototype};function d(e){return null==e||true===e||false===e||"string"===typeof e||"number"===typeof e}function h(e){return"function"===typeof e||"object"===typeof e&&null!==e}function v(e){if(!d(e))return e;return new Error(R(e))}function m(e,t){var n=e.length;var r=new Array(n+1);var o;for(o=0;o<n;++o)r[o]=e[o];r[o]=t;return r}function _(e,t,n){if(!i.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);if(null!=r)return null==r.get&&null==r.set?r.value:n}function y(e,t,n){if(d(e))return e;var r={value:n,configurable:true,enumerable:false,writable:true};i.defineProperty(e,t,r);return e}function g(e){throw e}var b=function(){var e=[Array.prototype,Object.prototype,Function.prototype];var t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return true;return false};if(i.isES5){var n=Object.getOwnPropertyNames;return function(e){var r=[];var o=Object.create(null);while(null!=e&&!t(e)){var a;try{a=n(e)}catch(e){return r}for(var s=0;s<a.length;++s){var u=a[s];if(o[u])continue;o[u]=true;var c=Object.getOwnPropertyDescriptor(e,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}e=i.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var o=[];e:for(var i in n)if(r.call(n,i))o.push(i);else{for(var a=0;a<e.length;++a)if(r.call(e[a],i))continue e;o.push(i)}return o}}();var w=/this\s*\.\s*\S+\s*=/;function j(e){try{if("function"===typeof e){var t=i.names(e.prototype);var n=i.isES5&&t.length>1;var r=t.length>0&&!(1===t.length&&"constructor"===t[0]);var o=w.test(e+"")&&i.names(e).length>0;if(n||r||o)return true}return false}catch(e){return false}}function E(e){function t(){}t.prototype=e;var n=8;while(n--)new t;return e}var S=/^[a-z$_][a-z$_0-9]*$/i;function C(e){return S.test(e)}function x(e,t,n){var r=new Array(e);for(var o=0;o<e;++o)r[o]=t+o+n;return r}function R(e){try{return e+""}catch(e){return"[no string representation]"}}function P(e){return null!==e&&"object"===typeof e&&"string"===typeof e.message&&"string"===typeof e.name}function O(e){try{y(e,"isOperational",true)}catch(e){}}function k(e){if(null==e)return false;return e instanceof Error["__BluebirdErrorTypes__"].OperationalError||true===e["isOperational"]}function T(e){return P(e)&&i.propertyIsWritable(e,"stack")}var F=function(){return"stack"in new Error?function(e){if(T(e))return e;return new Error(R(e))}:function(e){if(T(e))return e;try{throw new Error(R(e))}catch(e){return e}}}();function M(e){return{}.toString.call(e)}function A(e,t,n){var r=i.names(e);for(var o=0;o<r.length;++o){var a=r[o];if(n(a))try{i.defineProperty(t,a,i.getDescriptor(e,a))}catch(e){}}}var L=function(e){if(i.isArray(e))return e;return null};if("undefined"!==typeof Symbol&&Symbol.iterator){var I="function"===typeof Array.from?function(e){return Array.from(e)}:function(e){var t=[];var n=e[Symbol.iterator]();var r;while(!(r=n.next()).done)t.push(r.value);return t};L=function(e){if(i.isArray(e))return e;if(null!=e&&"function"===typeof e[Symbol.iterator])return I(e);return null}}var D="undefined"!==typeof t&&"[object process]"===M(t).toLowerCase();var V="undefined"!==typeof t&&"undefined"!==typeof t.env;function N(e){return V?t.env[e]:void 0}function B(){if("function"===typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function U(e,t){return e.bind(t)}var H={isClass:j,isIdentifier:C,inheritedDataKeys:b,getDataPropertyOrDefault:_,thrower:g,isArray:i.isArray,asArray:L,notEnumerableProp:y,isPrimitive:d,isObject:h,isError:P,canEvaluate:a,errorObj:s,tryCatch:f,inherits:p,withAppended:m,maybeWrapAsError:v,toFastProperties:E,filledRange:x,toString:R,canAttachTrace:T,ensureErrorObject:F,originatesFromRejection:k,markAsOriginatingFromRejection:O,classString:M,copyDescriptors:A,hasDevTools:"undefined"!==typeof chrome&&chrome&&"function"===typeof chrome.loadTimes,isNode:D,hasEnvVariables:V,env:N,global:c,getNativePromise:B,domainBind:U};H.isRecentNode=H.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}();H.isNode&&H.toFastProperties(t);try{throw new Error}catch(e){H.lastLineError=e}r.exports=H},{"./es5":13}]},{},[4])(4)});"undefined"!==typeof window&&null!==window?window.P=window.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise)}).call(t,n("../node_modules/process/browser.js"),n("../node_modules/webpack/buildin/global.js"),n("../node_modules/timers-browserify/main.js").setImmediate)},"./website/actions/org.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.updateDefaultSpace=t.deleteOrganization=t.startMigration=t.deleteTeam=t.updateTeamName=t.updateMembersTeams=t.updateMemberTeams=t.createTeam=t.transferOwnership=t.removeMember=t.updateMemberRole=t.updateOrgLogo=t.updateOrgCustomDomain=t.updateOrgBaseDomain=t.updateOrgName=t.createOrgSpace=void 0;var r=function(){var e=a(regeneratorRuntime.mark(function e(t){var n=t.space,r=t.org,o=t.logo,a=t.shouldCreateOrg,s=t.backend;var u,c,l,f,p,d,h,v;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:u=s.auth,c=s.storage;l=i.StoragePaths.spaceUpload({spaceID:n.uid,filename:o.name});f=i.StoragePaths.orgUpload({orgID:r.uid,filename:o.name});t.next=5;return Promise.all([a?c.uploadFile(f,o,{user:u.getCurrentUser()}):{},c.uploadFile(l,o,{user:u.getCurrentUser()})]);case 5:p=t.sent;d=p[0].downloadURL;h=void 0===d?null:d;v=p[1].downloadURL;return t.abrupt("return",{org:h&&o?r.merge({logoURL:h}):r,space:o?n.merge({logoURL:v}):n});case 10:case"end":return t.stop()}},e,this)}));return function t(n){return e.apply(this,arguments)}}();var o=n("./core/index.js");var i=n("./backend/index.web.js");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i);var s=a.value}catch(e){n(e);return}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function s(e){var t=this;return function(){var n=a(regeneratorRuntime.mark(function n(i,a,s){var u,c,l,f,p,d,h,v,m,_;return regeneratorRuntime.wrap(function t(n){while(1)switch(n.prev=n.next){case 0:u=s.database,c=s.auth,l=s.analytics;f=e.logo;p=e.org,d=e.space;h=!p.uid;v=!h||!/^data:image/.test(p.logoURL)&&f?p.logoURL:null;h&&(p=p.regenerateUID().merge({logoURL:v}));d=d.regenerateUID().merge({orgID:p.uid,logoURL:v});m=o.Revision.createInitialRevision(c.getCurrentUser());d=d.merge({primaryRevision:m.uid});_=d.toCreateUpdate().set(o.Revision.queryByID({spaceID:d.uid,revisionID:m.uid}),m);h&&_.merge(p.toCreateUpdate());n.next=13;return u.commit(_);case 13:h&&l.trackCreateOrg(p,d);l.trackCreateSpace(p,d);if(f){n.next=17;break}return n.abrupt("return",{org:p.merge({logoURL:v}),space:d.merge({logoURL:v})});case 17:return n.abrupt("return",r({space:d,org:p,logo:f,shouldCreateOrg:h,backend:s}));case 18:case"end":return n.stop()}},n,t)}));return function(e,t,r){return n.apply(this,arguments)}}()}function u(e,t){return function(n,r,o){var i=o.database;return i.updateDocument(e.query(),{name:t})}}function c(e,t){return function(n,r,o){var i=o.database;return i.commit(e.toBaseDomainUpdate(t))}}function l(e,t){var n=this;return function(){var r=a(regeneratorRuntime.mark(function r(o,i,a){var s=a.database,u=a.analytics;return regeneratorRuntime.wrap(function n(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return s.commit(e.toCustomDomainUpdate(t));case 2:u.trackSetupCustomDomain(e);case 3:case"end":return r.stop()}},r,n)}));return function(e,t,n){return r.apply(this,arguments)}}()}function f(e,t){return function(n,r,o){var a=o.database,s=o.storage,u=o.auth;var c=i.StoragePaths.orgUpload({orgID:e.uid,filename:t.name});return s.uploadFile(c,t,{user:u.getCurrentUser()}).then(function(t){return a.updateDocument(e.query(),{logoURL:t.downloadURL})})}}function p(e,t,n){return function(r,o,i){var a=i.database,s=i.storage;var u=t.merge({role:n});return a.commit(u.toUpdate(e.uid))}}function d(e,t){return function(n,r,o){var i=o.database,a=o.storage;return i.commit(t.toDeleteUpdate(e.uid))}}function h(e,t){return function(n,r,o){var i=o.database;return i.commit(e.toTransferOwnershipUpdate(t.uid))}}function v(e,t){var n=this;return function(){var r=a(regeneratorRuntime.mark(function r(o,i,a){var s=a.database,u=a.analytics;return regeneratorRuntime.wrap(function n(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return s.commit(t.toCreateUpdate(e.uid));case 2:u.trackCreateTeam(e);case 3:case"end":return r.stop()}},r,n)}));return function(e,t,n){return r.apply(this,arguments)}}()}function m(e,t){return function(n,r,o){var i=o.database;return i.updateDocument(t.query(e.uid),{teams:t.teams.map(function(e){return e.serialize()}).toJS()})}}function _(e,t){return function(n,r,o){var i=o.database;return Promise.all(t.map(function(t){return n(m(e,t))}).toArray())}}function y(e,t){return function(n,r,o){var i=o.database;return i.updateDocument(t.query(e.uid),{name:t.name})}}function g(e,t){return function(n,r,o){var i=o.database;return i.deleteDocument(t.query(e.uid))}}function b(e){return function(t,n,r){var o=r.analytics;return o.trackStartMigration(e)}}function w(e){var t=this;return function(){var n=a(regeneratorRuntime.mark(function n(r,o,i){var a=i.database,s=i.analytics;return regeneratorRuntime.wrap(function t(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return a.commit(e.toDeleteUpdate());case 2:s.trackDeleteOrg(e);case 3:case"end":return n.stop()}},n,t)}));return function(e,t,r){return n.apply(this,arguments)}}()}function j(e,t){return function(n,r,o){var i=o.database;return i.updateDocument(e.query(),{defaultSpace:t})}}t.createOrgSpace=s;t.updateOrgName=u;t.updateOrgBaseDomain=c;t.updateOrgCustomDomain=l;t.updateOrgLogo=f;t.updateMemberRole=p;t.removeMember=d;t.transferOwnership=h;t.createTeam=v;t.updateMemberTeams=m;t.updateMembersTeams=_;t.updateTeamName=y;t.deleteTeam=g;t.startMigration=b;t.deleteOrganization=w;t.updateDefaultSpace=j},"./website/actions/phone.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});function r(e,t){return function(n,r,o){var i=o.auth;return i.verifyPhoneNumber(e,t)}}function o(e,t,n){return function(r,o,i){var a=i.auth;return a.reauthenticateWithPhone(e,t,n)}}function i(){return function(e,t,n){var r=n.auth;return r.unlinkPhone()}}t.verifyPhoneNumber=r;t.reauthenticateWithPhone=o;t.unlinkPhone=i},"./website/components/AccountVerification/AccountVerification.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var i=n("./node_modules/react/index.js");var a=d(i);var s=n("./node_modules/react-redux/es/index.js");var u=n("./website/components/AccountVerification/EmailVerification/index.js");var c=p(u);var l=n("./website/components/AccountVerification/PhoneVerification/index.js");var f=p(l);function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(r=(0,s.connect)(function(e){var t=e.user;return{user:t}}),r(o=function(e){m(t,e);function t(){h(this,t);return v(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.user,r=t.location,o=t.match.params.mode;var i=(r.state||{}).referrer||{pathname:"/"};if("phone"==o)return a.createElement(f.default,{user:n,previousLocation:i});return a.createElement(c.default,{user:n,previousLocation:i})};return t}(a.Component))||o);t.default=_},"./website/components/AccountVerification/EmailVerification/EmailVerification.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=p(r);var i=n("./node_modules/react-helmet/lib/Helmet.js");var a=f(i);var s=n("./website/components/AccountVerification/EmailVerification/StepPromptEmail.js");var u=f(s);var c=n("./website/components/AccountVerification/EmailVerification/StepWaitVerification.js");var l=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){v(t,e);function t(){var n,r,o;d(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return o=(n=(r=h(this,e.call.apply(e,[this].concat(a))),r),r.state={showEditEmail:true},r.onEditEmail=function(){r.setState({showEditEmail:true})},r.onEmailEdited=function(){r.setState({showEditEmail:false})},n),h(r,o)}t.prototype.render=function e(){var t=this.props,n=t.user,r=t.previousLocation;var i=this.state.showEditEmail;return o.createElement(o.Fragment,null,o.createElement(a.default,{title:"Verify your email"}),i||!n.email?o.createElement(u.default,{user:n,previousLocation:r,onSuccess:this.onEmailEdited}):o.createElement(l.default,{user:n,previousLocation:r,onEditEmail:this.onEditEmail}))};return t}(o.Component);t.default=m},"./website/components/AccountVerification/EmailVerification/StepPromptEmail.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,i;var a=n("./node_modules/react/index.js");var s=_(a);var u=n("./node_modules/urljoin.js/dist/index.js");var c=m(u);var l=n("./node_modules/react-router-dom/es/index.js");var f=n("./node_modules/react-redux/es/index.js");var p=n("./styleguide/index.js");var d=n("./node_modules/react-router/es/index.js");var h=n("./flux/index.js");var v=n("./website/components/SignIn/index.js");function m(e){return e&&e.__esModule?e:{default:e}}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i);var s=a.value}catch(e){n(e);return}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(r=(0,f.connect)(),o=p.Form.withContext({getValueFromProps:function e(t){var n=t.user;return n.email}}),r(i=(0,d.withRouter)(i=o(i=function(e){w(t,e);function t(){var n=this;var r,o,i;g(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return i=(r=(o=b(this,e.call.apply(e,[this].concat(u))),o),o.state={error:null,loading:false},o.input=s.createRef(),o.onConfirm=y(regeneratorRuntime.mark(function e(){var t,r,i,a,s,u,l,f,p;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.value,i=t.onSuccess,a=t.dispatch,s=t.hasChanged,u=t.previousLocation,l=t.history;f=l.createHref(u);p=(0,c.default)(window.location.protocol+"//"+window.location.host,f);o.setState({error:null,loading:true});n.prev=4;if(!s){n.next=8;break}n.next=8;return a(h.Flux.user.updateEmail(r));case 8:n.next=10;return a(h.Flux.user.verifyEmail(p));case 10:n.next=15;break;case 12:n.prev=12;n.t0=n["catch"](4);(0,v.handleException)(n.t0,function(e){o.setState({loading:false,error:e})});case 15:i();case 16:case"end":return n.stop()}},e,n,[[4,12]])})),o.onClosePopup=function(){o.setState({error:null})},o.onEmailChange=function(e){var t=o.props.onChange;t(e.currentTarget.value)},r),b(o,i)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var t=this.props,n=t.user,r=t.value,o=t.hasChanged;var i=this.state,a=i.error,u=i.loading;var c=a&&"auth/requires-recent-login"===a.code;var f=o||!n.emailVerified;return s.createElement(s.Fragment,null,s.createElement(v.AuthModal,{title:"Verify your email",error:c?null:a},s.createElement(p.Modal.Body,null,s.createElement(p.View,{styles:[p.View.MARGIN.S300Bottom]},s.createElement(p.View,null,s.createElement(p.Text,{styles:[p.Text.COLOR.greyBase]},"Take a moment to verify your email address. It helps us confirm your identity and better secure your account."))),s.createElement(p.Form.Group,{title:"Enter your email",styles:[p.View.MARGIN.none]},s.createElement(p.Form.Input,{type:"text",inputRef:this.input,value:r,readOnly:u,onChange:this.onEmailChange}),s.createElement(p.Form.Hint,null,"We'll send a message to this email address to verify your identity."))),s.createElement(p.Modal.Footer,null,s.createElement(p.View,null,!n.requireVerification&&s.createElement(p.Button,{kind:"secondary",component:l.Link,to:"/account/settings"},"Cancel")),s.createElement(p.View,null,s.createElement(p.Button,{disabled:u||!f,onClick:this.onConfirm},u?s.createElement(p.Loading,null):"Submit")))),c&&s.createElement(v.ReauthenticatePopup,{isOpened:true,user:n,onSuccess:this.onConfirm,onClose:this.onClosePopup}))};return t}(s.Component))||i)||i)||i);t.default=j},"./website/components/AccountVerification/EmailVerification/StepWaitVerification.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var i=n("./node_modules/react/index.js");var a=p(i);var s=n("./node_modules/react-router-dom/es/index.js");var u=n("./node_modules/react-redux/es/index.js");var c=n("./styleguide/index.js");var l=n("./flux/index.js");var f=n("./website/components/SignIn/index.js");function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i);var s=a.value}catch(e){n(e);return}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(r=(0,u.connect)(),r(o=function(e){m(t,e);function t(){var n=this;var r,o,i;h(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return i=(r=(o=v(this,e.call.apply(e,[this].concat(s))),o),o.state={error:null,sent:false},o.onSendAgain=d(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props.dispatch;n.prev=1;n.next=4;return t(l.Flux.user.verifyEmail());case 4:o.setState({error:null,sent:true});o.timeout=setTimeout(function(){o.setState({sent:false})},3e3);n.next=11;break;case 8:n.prev=8;n.t0=n["catch"](1);o.setState({error:n.t0});case 11:case"end":return n.stop()}},e,n,[[1,8]])})),r),v(o,i)}t.prototype.componentWillUnmount=function e(){this.timeout&&clearTimeout(this.timeout)};t.prototype.render=function e(){var t=this.props,n=t.user,r=t.onEditEmail;var o=this.state,i=o.sent,u=o.error;return a.createElement(f.AuthModal,{title:"Verify your email",error:u,status:i?"Verification email sent! Check your inbox.":null},a.createElement(c.Modal.Body,null,a.createElement(c.View,{styles:[c.View.MARGIN.S100Bottom]},a.createElement(c.Text,null,"An email has been sent to ",a.createElement("b",null,n.email),".")),a.createElement(c.View,{styles:[c.View.MARGIN.S100Bottom]},a.createElement(c.Text,null,"Please click the link in that message to confirm your email address (Make sure to check your junk or spam folder).")),a.createElement(c.View,null,a.createElement(c.Text,null,a.createElement(c.Link,{onClick:this.onSendAgain},"Send another link.")))),a.createElement(c.Modal.Footer,null,!n.requireVerification&&a.createElement(c.View,null,a.createElement(c.Button,{kind:"secondary",component:s.Link,to:"/account/settings"},"Cancel")),a.createElement(c.View,null,a.createElement(c.Button,{kind:"secondary",onClick:r},"Update email"))))};return t}(a.Component))||o);t.default=_},"./website/components/AccountVerification/EmailVerification/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/AccountVerification/EmailVerification/EmailVerification.js");var o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/AccountVerification/PhoneVerification/PhoneVerification.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var i=n("./node_modules/react/index.js");var a=b(i);var s=n("./node_modules/react-helmet/lib/Helmet.js");var u=g(s);var c=n("./node_modules/libphonenumber-js/index.es6.js");var l=n("./node_modules/react-redux/es/index.js");var f=n("./website/actions/phone.js");var p=n("./website/components/SignIn/index.js");var d=n("./website/components/AccountVerification/PhoneVerification/StepVerified.js");var h=g(d);var v=n("./website/components/AccountVerification/PhoneVerification/StepPromptPhone.js");var m=g(v);var _=n("./website/components/AccountVerification/PhoneVerification/StepPromptCode.js");var y=g(_);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function w(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i);var s=a.value}catch(e){n(e);return}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(r=(0,l.connect)(),r(o=function(e){S(t,e);function t(){var n=this;var r,o,i;j(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return i=(r=(o=E(this,e.call.apply(e,[this].concat(s))),o),o.state={loading:false,error:null,phone:"",verificationId:null},o.onSubmitPhone=function(){var e=w(regeneratorRuntime.mark(function e(t,r,i){var a,s,u;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:a=o.props.dispatch;if(!o.state.loading){n.next=3;break}return n.abrupt("return");case 3:s=void 0;n.prev=4;s=(0,c.formatNumber)((0,c.parseNumber)(t,r),"E.164");n.next=12;break;case 8:n.prev=8;n.t0=n["catch"](4);o.setState({error:new Error("The phone number is formatted incorrectly.")});return n.abrupt("return");case 12:o.setState({loading:true,error:null});n.prev=13;n.next=16;return a((0,f.verifyPhoneNumber)(s,i));case 16:u=n.sent;o.setState({phone:s,verificationId:u});n.next=23;break;case 20:n.prev=20;n.t1=n["catch"](13);o.onError(n.t1);case 23:n.prev=23;o.setState({loading:false});return n.finish(23);case 26:case"end":return n.stop()}},e,n,[[4,8],[13,20,23,26]])}));return function(t,n,r){return e.apply(this,arguments)}}(),o.onSubmitCode=function(){var e=w(regeneratorRuntime.mark(function e(t){var r,i,a,s;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=o.props.dispatch;i=o.state,a=i.phone,s=i.verificationId;if(!(!a||!s)){n.next=4;break}return n.abrupt("return");case 4:o.setState({loading:true,error:null});n.prev=5;n.next=8;return r((0,f.reauthenticateWithPhone)(a,t,s));case 8:n.next=13;break;case 10:n.prev=10;n.t0=n["catch"](5);o.onError(n.t0);case 13:n.prev=13;o.setState({loading:false});return n.finish(13);case 16:case"end":return n.stop()}},e,n,[[5,10,13,16]])}));return function(t){return e.apply(this,arguments)}}(),o.onError=function(e){(0,p.handleException)(e,function(e){o.setState({error:e})})},o.onResendCode=function(){o.setState({error:null,verificationId:null})},r),E(o,i)}t.prototype.render=function e(){var t=this.props,n=t.user,r=t.previousLocation;var o=this.state,i=o.error,s=o.loading,c=o.phone,l=o.verificationId;var f=!c||!l;return a.createElement(a.Fragment,null,a.createElement(u.default,{title:"Verify your account"}),a.createElement(p.AuthModal,{title:"Verify your account",error:i},n.hasPhoneVerified&&a.createElement(h.default,{previousLocation:r}),!n.hasPhoneVerified&&f&&a.createElement(m.default,{user:n,phone:c,loading:s,onSubmit:this.onSubmitPhone}),!n.hasPhoneVerified&&!f&&a.createElement(y.default,{phone:c,loading:s,onResendCode:this.onResendCode,onSubmit:this.onSubmitCode})))};return t}(a.Component))||o);t.default=C},"./website/components/AccountVerification/PhoneVerification/StepPromptCode.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var i=n("./node_modules/react/index.js");var a=l(i);var s=n("./node_modules/aphrodite/no-important.js");var u=n("./common/index.js");var c=n("./styleguide/index.js");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=(o=r=function(e){d(t,e);function t(){var n,r,o;f(this,t);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return o=(n=(r=p(this,e.call.apply(e,[this].concat(s))),r),r.state={code:""},r.input=a.createRef(),r.onConfirm=function(){var e=r.props.onSubmit;var t=r.state.code;e(t)},r.onChange=function(e){r.setState({code:e.target.value})},r.onContactUs=function(e){e.preventDefault();(0,u.openSupportDialog)()},n),p(r,o)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.loading,i=r.phone,s=r.onResendCode;var u=this.state.code;return a.createElement(a.Fragment,null,a.createElement(c.Modal.Body,null,a.createElement(c.View,{styles:[c.View.MARGIN.S200Bottom]},a.createElement(c.Text,{styles:[n.infoText]},"We've just sent you a text message to "+i+" with a one time verification code. It may take a few minutes.")),a.createElement(c.Form.Group,{title:"Enter your code",styles:[c.View.MARGIN.none]},a.createElement(c.Form.Input,{type:"text",inputRef:this.input,value:u,readOnly:o,onChange:this.onChange}),a.createElement(c.Form.Hint,null,"If you don’t receive the confirmation code, please"," ",a.createElement(c.Link,{onClick:this.onContactUs},"contact us")))),a.createElement(c.Modal.Footer,null,a.createElement(c.Button,{kind:"link",disabled:o,onClick:s},"Send again"),a.createElement(c.Button,{disabled:o||!u,onClick:this.onConfirm},o?a.createElement(c.Loading,null):"Confirm")))};return t}(a.Component),r.STYLES=s.StyleSheet.create({infoText:{color:c.colors.GREY_BASE}}),o);t.default=h},"./website/components/AccountVerification/PhoneVerification/StepPromptPhone.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var i=n("./node_modules/react/index.js");var a=v(i);var s=n("./node_modules/react-redux/es/index.js");var u=n("./node_modules/libphonenumber-js/index.es6.js");var c=n("./backend/index.web.js");var l=n("./styleguide/index.js");var f=n("./flux/index.js");var p=n("./website/components/AccountVerification/PhoneVerification/countries.json");var d=h(p);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(r=(0,s.connect)(),r(o=function(e){y(t,e);function t(){var n,r,o;m(this,t);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return o=(n=(r=_(this,e.call.apply(e,[this].concat(s))),r),r.state={phone:"",countryCode:"US"},r.input=a.createRef(),r.onClick=function(){var e=r.props.onSubmit;var t=r.state,n=t.phone,o=t.countryCode;e(n,o,r.recaptchaVerifier)},r.onSignOut=function(e){e.preventDefault();var t=r.props.dispatch;t(f.Flux.user.signOut())},r.onChangeNumber=function(e){var t=e.target.value;r.setState(function(e){var n=e.countryCode;return{phone:new u.AsYouType(n).input(t)}})},r.onChangeCountry=function(e){r.setState({countryCode:e.target.value})},n),_(r,o)}t.prototype.componentDidMount=function e(){this.recaptchaVerifier=new c.firebase.auth.RecaptchaVerifier("phone-confirm-button",{size:"invisible"});this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var t=this.props,n=t.user,r=t.loading;var o=this.state,i=o.phone,s=o.countryCode;return a.createElement(a.Fragment,null,a.createElement(l.Modal.Body,null,a.createElement(l.View,{styles:[l.View.MARGIN.S300Bottom]},a.createElement(l.View,null,a.createElement(l.Text,{styles:[l.Text.COLOR.greyBase]},"To confirm your account, we need to send you a code on your mobile phone. We explain why in"," ",a.createElement(l.Link,{href:"https://docs.gitbook.com/faq#why-do-you-need-my-phone-number"},"our FAQ"),".")),a.createElement(l.View,null,n.requirePhoneVerification&&a.createElement(l.Text,null,a.createElement(l.Link,{onClick:this.onSignOut},"Sign out.")))),a.createElement(l.Form.Group,{title:"Country"},a.createElement(l.Form.Select,{name:"country",value:s,autoComplete:"shipping country",disabled:r,onChange:this.onChangeCountry},d.default.map(function(e){var t=e.code,n=e.name;return a.createElement("option",{key:t,value:t},n)}))),a.createElement(l.Form.Group,{title:"Phone number",styles:[l.View.MARGIN.none]},a.createElement(l.Form.Input,{type:"tel",autoComplete:"tel",inputRef:this.input,value:i,readOnly:r,onChange:this.onChangeNumber}),a.createElement(l.Form.Hint,null,"By tapping the button, an SMS may be sent. Message & data rates may apply."))),a.createElement(l.Modal.Footer,null,a.createElement(l.Button,{id:"phone-confirm-button",styles:[l.Button.STYLES.block],onClick:this.onClick,disabled:r},r?a.createElement(l.Loading,null):"Send me a verification code")))};return t}(a.Component))||o);t.default=g},"./website/components/AccountVerification/PhoneVerification/StepVerified.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,i,a;var s=n("./node_modules/react/index.js");var u=d(s);var c=n("./node_modules/aphrodite/no-important.js");var l=n("./node_modules/react-redux/es/index.js");var f=n("./flux/index.js");n("./node_modules/react-router-dom/es/index.js");var p=n("./styleguide/index.js");function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i);var s=a.value}catch(e){n(e);return}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=(r=(0,l.connect)(),r(o=(a=i=function(e){_(t,e);function t(){var n=this;var r,o,i;v(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return i=(r=(o=m(this,e.call.apply(e,[this].concat(s))),o),o.onClick=h(regeneratorRuntime.mark(function e(){var t,r,i;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=o.props,r=t.dispatch,i=t.previousLocation;n.next=3;return r(f.Flux.auth.redirectToWebsite(i.pathname));case 3:case"end":return n.stop()}},e,n)})),r),m(o,i)}t.prototype.render=function e(){var n=t.STYLES;return u.createElement(u.Fragment,null,u.createElement(p.Modal.Body,null,u.createElement(p.View,null,u.createElement(p.Text,{styles:[n.infoText]},"Your account has been correctly verified!"))),u.createElement(p.Modal.Footer,null,u.createElement(p.Button,{kind:"cancel",onClick:this.onClick},"Continue")))};return t}(u.Component),i.STYLES=c.StyleSheet.create({infoText:{color:p.colors.GREY_BASE}}),a))||o);t.default=y},"./website/components/AccountVerification/PhoneVerification/countries.json":function(e,t){e.exports=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia, Plurinational State of",code:"BO"},{name:"Bonaire, Sint Eustatius and Saba",code:"BQ"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, the Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"CÃ´te d'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"CuraÃ§ao",code:"CW"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and McDonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People's Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People's Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, the Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestine, State of",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"RÃ©union",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint BarthÃ©lemy",code:"BL"},{name:"Saint Helena, Ascension and Tristan da Cunha",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Martin (French part)",code:"MF"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Sint Maarten (Dutch part)",code:"SX"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"South Sudan",code:"SS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela, Bolivarian Republic of",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]},"./website/components/AccountVerification/PhoneVerification/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./website/components/AccountVerification/PhoneVerification/PhoneVerification.js");var o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},"./website/components/AccountVerification/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react-loadable/lib/index.js");var o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return n("./website/components/AccountVerification/AccountVerification.js")})},modules:["./AccountVerification"],webpack:function e(){return["./website/components/AccountVerification/AccountVerification.js"]},loading:function e(){return null}});t.default=a},"./website/components/Application.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,i,a,s;var u=n("./node_modules/react/index.js");var c=R(u);var l=n("./node_modules/react-redux/es/index.js");var f=n("./node_modules/react-intl/lib/index.es.js");var p=n("./node_modules/react-router-dom/es/index.js");var d=n("./node_modules/aphrodite/no-important.js");var h=n("./node_modules/react-apollo/react-apollo.browser.umd.js");var v=n("./node_modules/apollo-boost/lib/index.js");var m=x(v);var _=n("./flux/index.js");var y=n("./common/index.js");var g=n("./styleguide/index.js");var b=n("./website/components/Routes.js");var w=x(b);var j=n("./website/components/HeadTags.js");var E=x(j);var S=n("./website/components/ContactUs.js");var C=x(S);function x(e){return e&&e.__esModule?e:{default:e}}function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T=(r=_.Connectors.authUser(),o=(0,l.connect)(function(e){var t=e.config,n=e.user;return{apiUrl:t.urls.api,gaID:t.get("ga").website.id,user:n}}),(0,p.withRouter)(i=r(i=o(i=(s=a=function(e){k(t,e);function t(n){P(this,t);var r=O(this,e.call(this,n));var o=r.props.apiUrl;r.apolloClient=new m.default({uri:o});return r}t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.gaID,i=r.user;return c.createElement(h.ApolloProvider,{client:this.apolloClient},c.createElement(f.IntlProvider,{locale:"en"},c.createElement(g.ColorPalette,{primary:g.colors.BLUE_BASE},c.createElement(g.PlaceholderPalette.Light,null,c.createElement(y.ErrorBoundary,null,c.createElement(g.View,{styles:[n.app]},c.createElement(E.default,null),c.createElement(y.PlatformStatusBanner,null),c.createElement(y.GAProvider,{defaultTrackerID:o,userID:i.isLoggedIn?i.uid:null},c.createElement(y.ScrollToTop,null,c.createElement(w.default,{user:i}))),c.createElement(C.default,null)))))))};return t}(c.Component),a.STYLES=d.StyleSheet.create({app:{width:"100%",minHeight:"100vh",color:g.colors.BLACK,background:g.colors.GREY_LIGHTEST,display:"flex",flexDirection:"column"}}),s))||i)||i)||i);t.default=T},"./website/components/ContactUs.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,i,a;var s=n("./node_modules/react/index.js");var u=d(s);var c=n("./node_modules/react-redux/es/index.js");var l=n("./node_modules/aphrodite/no-important.js");var f=n("./styleguide/index.js");var p=n("./icons/index.js");function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=(r=(0,c.connect)(function(e){var t=e.config,n=e.user;return{user:n,helpScoutFormId:t.helpscout.form_id}}),r(o=(a=i=function(e){m(t,e);function t(){var n,r,o;h(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return o=(n=(r=v(this,e.call.apply(e,[this].concat(a))),r),r.state={enabled:false},n),v(r,o)}t.prototype.componentDidMount=function e(){var t=this;var n=this.props.helpScoutFormId;(function(e,t,r){window.HSCW=t,window.HS=r,r.beacon=r.beacon||{};var o=r.beacon;o.userConfig={},o.readyQueue=[],o.config=function(e){this.userConfig=e},o.ready=function(e){this.readyQueue.push(e)},t.config={docs:{enabled:!1,baseUrl:""},contact:{enabled:!0,formId:n}};var i=e.getElementsByTagName("script")[0],a=e.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://djtflbt20bdde.cloudfront.net/",i.parentNode.insertBefore(a,i)})(document,window.HSCW||{},window.HS||{});window.HS.beacon.config({color:f.colors.BLUE_BASE,icon:"message",showName:true,showSubject:true});window.HS.beacon.ready(function(){t.setState({enabled:true})})};t.prototype.componentDidUpdate=function e(){this.identify()};t.prototype.identify=function e(){var t=this.props.user;if(t.isVisitor||!window.HS.beacon.identify)return;window.HS.beacon.identify({name:t.displayName,email:t.email})};t.prototype.render=function e(){var n=t.STYLES;var r=this.state.enabled;if(r)return null;return u.createElement(f.Button,{component:"a",href:"mailto:support@gitbook.com",styles:[f.tooltip.tooltipped,f.tooltip.delayed,f.tooltip.topLeft,n.contactUs],kind:"primary",size:"large",icon:u.createElement(p.IconMail,null),"aria-label":"support@gitbook.com"})};return t}(u.Component),i.STYLES=l.StyleSheet.create({contactUs:{position:"fixed",bottom:f.spacing.S300,right:f.spacing.S300,borderRadius:60}}),a))||o);t.default=_},"./website/components/HeadTags.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=f(r);var i=n("./node_modules/react-helmet/lib/Helmet.js");var a=l(i);var s=n("./styleguide/index.js");var u=n(119);var c=l(u);function l(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){h(t,e);function t(){p(this,t);return d(this,e.apply(this,arguments))}t.prototype.render=function e(){return o.createElement(a.default,{defer:false,titleTemplate:"%s - GitBook",defaultTitle:"GitBook"},o.createElement("html",{lang:"en"}),o.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),o.createElement("meta",{charSet:"utf-8"}),o.createElement("style",{type:"text/css"},s.resetCSS),o.createElement("link",{rel:"stylesheet",href:s.font.SANS_SERIF_SRC}),o.createElement("link",{rel:"stylesheet",href:s.font.MONOSPACE_SRC}),o.createElement("link",{rel:"icon",href:c.default}),o.createElement("script",{src:"https://js.stripe.com/v3/",type:"text/javascript"}),o.createElement("script",null,"\n                    !function(){\n                        var script = document.createElement('script');\n                        script.async = true;\n                        script.src = 'https://risk.clearbit.com/v1/risk.js';\n                        var parent = document.getElementsByTagName('script')[0];\n                        parent.parentNode.insertBefore(script, parent);\n                    }();\n                "))};return t}(o.Component);t.default=v},"./website/components/RouteDashboard/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RouteDashboard=t.RouteOrganization=t.RouteAccount=void 0;var r=n("./website/components/RouteDashboard/RouteAccount/index.js");var o=c(r);var i=n("./website/components/RouteDashboard/RouteOrganization/index.js");var a=c(i);var s=n("./website/components/RouteDashboard/RouteDashboard.js");var u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}t.RouteAccount=o.default;t.RouteOrganization=a.default;t.RouteDashboard=u.default},"./website/components/RouteMarketing/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=n("./node_modules/react/index.js");var i=l(o);var a=n("./node_modules/react-router-dom/es/index.js");var s=n("./node_modules/react-loadable/lib/index.js");var u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}var f=(0,u.default)({loader:function e(){return Promise.resolve().then(function(){return n("./website/components/RouteMarketing/MarketingBundle.js")})},modules:["./MarketingBundle"],webpack:function e(){return["./website/components/RouteMarketing/MarketingBundle.js"]},loading:function e(){return null}});function p(e){var t=e.isLoggedIn;return[!t&&i.createElement(a.Route,{key:"homepage",path:"/",exact:true,render:function e(t){return i.createElement(f,r({tab:"home"},t))}}),i.createElement(a.Route,{key:"pricing",path:"/pricing",exact:true,render:function e(t){return i.createElement(f,r({tab:"pricing"},t))}}),i.createElement(a.Route,{key:"about",path:"/about",exact:true,render:function e(t){return i.createElement(f,r({tab:"about"},t))}})]}t.default=p},"./website/components/RouteMigration/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RouteMigrationWelcome=t.RouteMigration=void 0;var r=n("./node_modules/react-loadable/lib/index.js");var o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return n("./website/components/RouteMigration/RouteMigration.js")})},modules:["./RouteMigration"],webpack:function e(){return["./website/components/RouteMigration/RouteMigration.js"]},loading:function e(){return null}});var s=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return n("./website/components/RouteMigration/RouteMigrationWelcome.js")})},modules:["./RouteMigrationWelcome"],webpack:function e(){return["./website/components/RouteMigration/RouteMigrationWelcome.js"]},loading:function e(){return null}});t.RouteMigration=a;t.RouteMigrationWelcome=s},"./website/components/RouteNewSpace/RouteNewSpace.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,i,a,s,u;var c=n("./node_modules/react/index.js");var l=V(c);var f=n("./node_modules/react-helmet/lib/Helmet.js");var p=D(f);var d=n("./node_modules/react-router-dom/es/index.js");var h=n("./node_modules/react-redux/es/index.js");var v=n("./styleguide/index.js");var m=n("./core/index.js");var _=n("./website/actions/org.js");var y=n("./website/components/SignIn/index.js");var g=n("./website/components/RouteNewSpace/StepOrgName.js");var b=D(g);var w=n("./website/components/RouteNewSpace/StepOrgBaseDomain.js");var j=D(w);var E=n("./website/components/RouteNewSpace/StepSpaceName.js");var S=D(E);var C=n("./website/components/RouteNewSpace/StepSpacePrivate.js");var x=D(C);var R=n("./website/components/RouteNewSpace/StepSpaceBaseName.js");var P=D(R);var O=n("./website/components/RouteNewSpace/StepInvites.js");var k=D(O);var T=n("./website/components/RouteNewSpace/StepLoading.js");var F=D(T);var M=n("./website/components/RouteNewSpace/StepError.js");var A=D(M);var L=n("./website/components/RouteNewSpace/getPrimaryColor.js");var I=D(L);function D(e){return e&&e.__esModule?e:{default:e}}function V(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function N(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i);var s=a.value}catch(e){n(e);return}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function H(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var G=[b.default,j.default,S.default,P.default,x.default];var q=(r=v.Skeleton.connectToSkeleton(),o=(0,h.connect)(function(e){var t=e.user;return{user:t}}),(0,d.withRouter)(i=r(i=o(i=(s=a=function(e){H(t,e);function t(n){B(this,t);var r=U(this,e.call(this,n));u.call(r);var o=r.props,i=o.org,a=o.user;var s=i||new m.Organization({createdBy:a.uid});r.state={loading:false,error:null,step:i?2:0,space:new m.Space({orgID:s.uid,createdBy:a.uid,logoURL:s.logoURL}),org:s};return r}t.prototype.componentDidMount=function e(){var t=this;var n=this.props.org;n&&n.logoURL&&(0,I.default)(n.logoURL).then(function(e){t.setState(function(t){var n=t.space;return{space:n.merge({colorPrimary:e})}})})};t.prototype.componentWillReceiveProps=function e(t){var n=this;if(this.props.org!=t.org){var r=t.org,o=t.user;this.setState({org:t.org,space:new m.Space({orgID:r.uid,createdBy:o.uid,logoURL:r.logoURL})});r.logoURL&&(0,I.default)(r.logoURL).then(function(e){n.setState(function(t){var n=t.space;return{space:n.merge({colorPrimary:e})}})})}};t.prototype.render=function e(){var t=this.props,n=t.user,r=t.membership,o=t.org,i=t.location,a=t.isLoading;var s=this.state,u=s.org,c=s.space;var f=this.state,h=f.loading,v=f.error;var m=this.state.step;c.uid&&(m=G.length);var _=m<G.length?G[m]:k.default;if(!n.isLoggedIn)return l.createElement(d.Redirect,{to:(0,y.createAuthRoute)({toLocation:i.pathname})});if(o&&!a&&(o.isLocked||!n.isSiteAdmin&&(!r||!r.canAdmin)))return l.createElement(d.Redirect,{to:"/@"+o.baseDomain+"/"});return l.createElement(l.Fragment,null,l.createElement(p.default,{title:"Get started"}),h&&l.createElement(F.default,null),!h&&v&&l.createElement(A.default,null),!h&&!v&&l.createElement(_,{org:u,space:c,onChange:this.onChange,onCancel:this.onCancel,onPrev:m>(u.uid?2:0)?this.onPrevStep:null,onNext:this.onNextStep,onSubmit:this.onSubmit}))};return t}(l.Component),u=function e(){var t=this;this.onChange=function(e){t.setState(e)};this.onCancel=function(){var e=t.props,n=e.history,r=e.org;n.push(r?"/@"+r.baseDomain+"/spaces":"/account/")};this.onPrevStep=function(){t.setState(function(e){var t=e.org,n=e.step;return{step:Math.max(n-1,t.uid?2:0)}})};this.onNextStep=function(){t.setState(function(e){var t=e.step;return{step:Math.min(t+1,G.length)}})};this.onSubmit=N(regeneratorRuntime.mark(function e(){var n,r,o,i,a,s,u,c,l;return regeneratorRuntime.wrap(function e(f){while(1)switch(f.prev=f.next){case 0:n=t.props.dispatch;r=t.state,o=r.org,i=r.space;t.setState({loading:true});a=null;if(!i.logoURL){f.next=18;break}f.prev=5;f.next=8;return fetch(i.logoURL);case 8:s=f.sent;f.next=11;return s.blob();case 11:a=f.sent;a.name="logo.png";f.next=18;break;case 15:f.prev=15;f.t0=f["catch"](5);console.error("Failed to fetch "+i.logoURL);case 18:f.prev=18;f.next=21;return n((0,_.createOrgSpace)({org:o,space:i,logo:a}));case 21:u=f.sent;c=u.org;l=u.space;t.setState({org:c,space:l});f.next=31;break;case 27:f.prev=27;f.t1=f["catch"](18);t.setState({error:f.t1});throw f.t1;case 31:f.prev=31;t.setState({loading:false});return f.finish(31);case 34:case"end":return f.stop()}},e,t,[[5,15],[18,27,31,34]])}))},s))||i)||i)||i);t.default=q},"./website/components/RouteNewSpace/StepError.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=l(r);var i=n("./common/index.js");var a=n("./styleguide/index.js");var s=n("./website/components/RouteNewSpace/StepLayout.js");var u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){d(t,e);function t(){f(this,t);return p(this,e.apply(this,arguments))}t.prototype.render=function e(){return o.createElement(u.default,{step:3},o.createElement(a.View,{styles:[a.View.PADDING.S700]},o.createElement(a.Alert,{styles:[a.Alert.STYLES.danger,a.View.MARGIN.none]},"An error happened while creating your project,"," ",o.createElement(a.Link,{kind:"underline",onClick:i.openSupportDialog},"get in touch")," ","with our support team.")))};return t}(o.Component);t.default=h},"./website/components/RouteNewSpace/StepInvites.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,i,a,s;var u=n("./node_modules/react/index.js");var c=C(u);var l=n("./node_modules/aphrodite/no-important.js");var f=n("./node_modules/react-redux/es/index.js");var p=n("./node_modules/react-router-dom/es/index.js");var d=n("./styleguide/index.js");var h=n("./flux/index.js");var v=n("./core/index.js");var m=n("./node_modules/copy-to-clipboard/index.js");var _=S(m);var y=n("./website/components/RouteNewSpace/StepLoading.js");var g=S(y);var b=n("./website/components/RouteNewSpace/StepLayout.js");var w=S(b);var j=n("./website/components/RouteNewSpace/StepWithPreview.js");var E=S(j);function S(e){return e&&e.__esModule?e:{default:e}}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=(r=(0,f.connect)(function(e){var t=e.config,n=e.user;return{config:t,user:n}}),o=h.Connectors.database(function(e){var t=e.org,n=e.user;return{membership:v.Membership.queryByID({orgID:t.uid,userID:n.uid}).setOptions({waitFetched:false}),invites:v.Invite.queryByOrg(t.uid).setOptions({waitFetched:false}),orgBaseDomain:v.OrgBaseDomain.queryByDomain(t.baseDomain).setOptions({waitFetched:false})}}),r(i=o(i=(s=a=function(e){P(t,e);function t(){var n,r,o;x(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return o=(n=(r=R(this,e.call.apply(e,[this].concat(a))),r),r.state={copiedURL:false},r.getInviteURL=function(){var e=r.props,t=e.invites,n=e.org,o=e.config;var i=t.find(function(e){return e.role==v.ROLES.WRITER});if(!i)return"";return o.urls.website+"/join/"+n.baseDomain+"/"+i.uid},r.onClick=function(e){e.preventDefault();r.input&&r.input.select();r.setState({copiedURL:(0,_.default)(r.getInviteURL())})},n),R(r,o)}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,i=o.space,a=o.config,s=o.org,u=o.membershipFetched,l=o.invitesFetched;var f=this.state.copiedURL;var h=i.getURL(s,a.domains.spaces);var v="/@"+s.baseDomain+"/spaces";if(!l||!u)return c.createElement(g.default,null);return c.createElement(w.default,{step:3},c.createElement(E.default,{org:s,space:i},c.createElement(d.View,{styles:[d.View.MARGIN.S200Bottom]},c.createElement(d.Text.DisplayH700,null,"Congratulations!")),c.createElement(d.View,{styles:[d.View.MARGIN.S200Bottom]},c.createElement(d.Text,null,"Your documentation is now live at"," ",c.createElement(d.Link,{kind:"underline",href:h,target:"_blank"},c.createElement("b",null,h)),".")),c.createElement(d.View,{styles:[d.View.MARGIN.S200Bottom]},c.createElement(d.Text,null,"Invite your organization members or start writing beautiful content right now.")),c.createElement(d.Form.Group,null,c.createElement(d.Form.Input,{title:f?"URL was copied to clipboard!":"Copy to clipboard",readOnly:true,inputRef:function e(t){n.input=t},styles:[r.inviteInput],value:this.getInviteURL(),onClick:this.onClick}),c.createElement(d.Form.Hint,null,"Share this URL to invite organization members."))),c.createElement(d.Modal.Footer,null,c.createElement(d.View,null),c.createElement(d.View,null,c.createElement(d.Button,{component:p.Link,to:v,disabled:!i.name},"Go to your organization!"))))};return t}(c.Component),a.STYLES=l.StyleSheet.create({inviteInput:{cursor:"pointer"}}),s))||i)||i);t.default=O},"./website/components/RouteNewSpace/StepLoading.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var i=n("./node_modules/react/index.js");var a=p(i);var s=n("./node_modules/aphrodite/no-important.js");var u=n("./styleguide/index.js");var c=n("./website/components/RouteNewSpace/StepLayout.js");var l=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=(o=r=function(e){v(t,e);function t(){d(this,t);return h(this,e.apply(this,arguments))}t.prototype.render=function e(){var n=t.STYLES;return a.createElement(l.default,{step:3},a.createElement(u.View,{styles:[n.container]},a.createElement(u.Loading,null)))};return t}(a.Component),r.STYLES=s.StyleSheet.create({container:{flex:1,height:240,display:"flex",alignItems:"center",fontSize:32,color:u.colors.BLUE_BASE}}),o);t.default=m},"./website/components/RouteNewSpace/StepOrgBaseDomain.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,i;var a=n("./node_modules/react/index.js");var s=_(a);var u=n("./node_modules/react-redux/es/index.js");var c=n("./flux/index.js");var l=n("./styleguide/index.js");var f=n("./core/index.js");var p=n("./website/components/RouteNewSpace/StepLayout.js");var d=m(p);var h=n("./website/components/RouteNewSpace/StepWithPreview.js");var v=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=(r=(0,u.connect)(function(e){var t=e.config;return{config:t}}),o=c.Connectors.database(function(e){var t=e.org;return{baseDomain:t.baseDomain?f.OrgBaseDomain.queryByDomain(t.baseDomain).setOptions({waitFetched:false,background:true}):null}}),r(i=o(i=function(e){b(t,e);function t(){var n,r,o;y(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(n=(r=g(this,e.call.apply(e,[this].concat(a))),r),r.state={value:r.props.org.baseDomain},r.input=s.createRef(),r.onBaseDomainChange=function(e){var t=r.props,n=t.org,o=t.onChange;var i=e.currentTarget.value;var a=n.setBaseDomain(i);r.setState({value:i});o({org:a})},r.onBlur=function(){var e=r.props,t=e.org,n=e.onChange;var o=r.state.value;if(!f.Organization.validateBaseDomain(o))return;var i=t.setBaseDomain(o);r.setState({value:i.baseDomain});n({org:i})},n),g(r,o)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var t=this.props,n=t.config,r=t.baseDomain,o=t.baseDomainFetched,i=t.space,a=t.org,u=t.onCancel,c=t.onPrev,p=t.onNext;var h=this.state.value;var m=!f.Organization.validateBaseDomain(h);var _=(m?"A organization URL may only contain alphanumeric or dashes '-' and 3-20 characters":r&&"This organization URL is already taken :(")||null;return s.createElement(d.default,{step:1},s.createElement(v.default,{org:a,space:i},s.createElement(l.Form.Group,{title:"Organization URL",error:_},s.createElement(l.Form.Input,{inputRef:this.input,hasError:Boolean(_),value:h,onChange:this.onBaseDomainChange,onBlur:this.onBlur},s.createElement(l.Form.InputAddOn,{style:{paddingLeft:"0px"}},".",n.domains.spaces)),s.createElement(l.Form.Hint,null,"Pick something short, memorable and recognizable for your organization's base address."),s.createElement(l.Form.Hint,null,"You can setup a custom domain later."))),s.createElement(l.Modal.StepperFooter,{nextDisabled:!a.baseDomain||r||!o||_,onCancel:u,onNext:p,onPrev:c}))};return t}(s.Component))||i)||i);t.default=w},"./website/components/RouteNewSpace/StepOrgName.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=d(r);var i=n("./styleguide/index.js");var a=n("./website/components/RouteNewSpace/getPrimaryColor.js");var s=p(a);var u=n("./website/components/RouteNewSpace/StepLayout.js");var c=p(u);var l=n("./website/components/RouteNewSpace/StepWithPreview.js");var f=p(l);function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i);var s=a.value}catch(e){n(e);return}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y="https://autocomplete.clearbit.com/v1/companies/suggest";var g=function(e){_(t,e);function t(){var n=this;var r,a,u;v(this,t);for(var c=arguments.length,l=Array(c),f=0;f<c;f++)l[f]=arguments[f];return u=(r=(a=m(this,e.call.apply(e,[this].concat(l))),a),a.state={logo:null},a.input=o.createRef(),a.fileInput=o.createRef(),a.updateLogoURL=function(e){var t=a.props,n=t.org,r=t.space,o=t.onChange;o({org:n.merge({logoURL:e}),space:r.merge({logoURL:e})})},a.onLogoURLChanged=function(){var e=h(regeneratorRuntime.mark(function e(t){var r,o;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=a.props.org;a.updateLogoURL(t);n.prev=2;n.next=5;return(0,s.default)(t);case 5:o=n.sent;a.onColorChange(o);n.next=12;break;case 9:n.prev=9;n.t0=n["catch"](2);a.updateLogoURL(r.logoURL);case 12:case"end":return n.stop()}},e,n,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),a.onLogoChanged=function(e){var t=e[0];var n=new FileReader;a.setState({logo:t});n.onload=function(e){var t=e.target.result;a.onLogoURLChanged(t)};n.readAsDataURL(t)},a.onColorChange=function(e){var t=a.props,n=t.space,r=t.onChange;r({space:n.merge({colorPrimary:e})})},a.onUploadLogo=function(){a.fileInput.current&&i.FileUploader.promptFile(a.fileInput.current)},a.onNameChange=function(){var e=h(regeneratorRuntime.mark(function e(t){var r,o,i,s,u,c,l,f,p,d;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=a.props,o=r.org,i=r.space,s=r.onChange;u=a.state.logo;c=t.target.value;s({org:o.setBaseDomain(c).merge({name:c}),space:i.setBaseName("project").merge({name:c})});if(!(u||!c)){n.next=6;break}return n.abrupt("return");case 6:n.prev=6;n.next=9;return fetch(y+"?query="+c);case 9:l=n.sent;n.next=12;return l.json();case 12:f=n.sent;p=f[0];if(p){n.next=16;break}return n.abrupt("return");case 16:d=p.logo+"?size=800";a.onLogoURLChanged(d);n.next=22;break;case 20:n.prev=20;n.t0=n["catch"](6);case 22:case"end":return n.stop()}},e,n,[[6,20]])}));return function(t){return e.apply(this,arguments)}}(),r),m(a,u)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var t=this.props,n=t.space,r=t.org,a=t.onCancel,s=t.onPrev,u=t.onNext;return o.createElement(c.default,{step:1},o.createElement(f.default,{space:n,org:r},o.createElement(i.FileUploader,{ref:this.fileInput,onFiles:this.onLogoChanged}),o.createElement(i.Form.Group,{title:"Organization name",hint:r.logoURL&&o.createElement(i.Link,{onClick:this.onUploadLogo},"Upload another logo")},o.createElement(i.Form.Input,{inputRef:this.input,value:r.name,onChange:this.onNameChange,name:"company",placeholder:"Your app/company name"}),o.createElement(i.Form.Hint,null,"This will show up in email with your organization and your readers. It will usually be (or include) the name of your company."))),o.createElement(i.Modal.StepperFooter,{nextDisabled:!r.name,onCancel:a,onNext:u,onPrev:s}))};return t}(o.Component);t.default=g},"./website/components/RouteNewSpace/StepSpaceBaseName.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o,i,a,s;var u=n("./node_modules/react/index.js");var c=b(u);var l=n("./node_modules/react-redux/es/index.js");var f=n("./node_modules/aphrodite/no-important.js");var p=n("./flux/index.js");var d=n("./styleguide/index.js");var h=n("./core/index.js");var v=n("./website/components/RouteNewSpace/StepLayout.js");var m=g(v);var _=n("./website/components/RouteNewSpace/StepWithPreview.js");var y=g(_);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=18;var C=(r=(0,l.connect)(function(e){var t=e.config;return{config:t}}),o=p.Connectors.database(function(e){var t=e.org,n=e.space;return{orgSpace:t.uid&&n.baseName?h.OrgSpace.queryByName({orgID:t.uid,baseName:n.baseName}).setOptions({background:true}):null}}),r(i=o(i=(s=a=function(e){E(t,e);function t(){var n,r,o;w(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return o=(n=(r=j(this,e.call.apply(e,[this].concat(a))),r),r.state={value:r.props.space.baseName},r.input=c.createRef(),r.onBaseNameChange=function(e){var t=r.props,n=t.space,o=t.onChange;var i=e.target.value;r.setState({value:i});o({space:n.setBaseName(i)})},r.onBlur=function(){var e=r.props,t=e.space,n=e.onChange;var o=r.state.value;if(h.Space.validateBaseName(o))return;var i=t.setBaseName(o);r.setState({value:i.baseName});n({space:i})},n),j(r,o)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var n=t.STYLES;var r=this.props,o=r.config,i=r.space,a=r.org,s=r.orgSpace,u=r.orgSpaceFetched,l=r.onPrev,f=r.onNext,p=r.onCancel;var v=this.state.value;var _=!h.Space.validateBaseName(v);var g=(_?"A project URL may only contain alphanumeric or dashes '-' and 1-50 characters":s&&"This project URL is already taken.")||null;var b=a.getSpacesURL(o.domains.spaces).replace(/^https:\/\//,"")+"/";var w=b.length<S?b:"…"+b.slice(-S);return c.createElement(m.default,{step:2},c.createElement(y.default,{org:a,space:i},c.createElement(d.Form.Group,{title:"Project URL",error:g},c.createElement(d.Form.Input,{inputRef:this.input,hasError:Boolean(g),value:v,onChange:this.onBaseNameChange,onBlur:this.onBlur},c.createElement(d.Form.InputAddOn,{prefix:true,styles:n.spaceURLAddon},w)),c.createElement(d.Form.Hint,null,"A custom domain can be setup later for your project."))),c.createElement(d.Modal.StepperFooter,{onNext:f,onPrev:l,onCancel:p,nextDisabled:!i.baseName||s||a.uid&&!u||g}))};return t}(c.Component),a.STYLES=f.StyleSheet.create({spaceURLAddon:{overflow:"hidden",whiteSpace:"nowrap",maxWidth:"50%",paddingRight:0}}),s))||i)||i);t.default=C},"./website/components/RouteNewSpace/StepSpaceName.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react/index.js");var o=f(r);var i=n("./styleguide/index.js");var a=n("./website/components/RouteNewSpace/StepLayout.js");var s=l(a);var u=n("./website/components/RouteNewSpace/StepWithPreview.js");var c=l(u);function l(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){h(t,e);function t(){var n,r,i;p(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return i=(n=(r=d(this,e.call.apply(e,[this].concat(s))),r),r.input=o.createRef(),r.onNameChange=function(e){var t=r.props,n=t.space,o=t.onChange;var i=e.target.value;o({space:n.setBaseName(i).merge({name:i})})},n),d(r,i)}t.prototype.componentDidMount=function e(){this.input.current&&this.input.current.focus()};t.prototype.render=function e(){var t=this.props,n=t.org,r=t.space,a=t.onCancel,u=t.onPrev,l=t.onNext;return o.createElement(s.default,{step:2},o.createElement(c.default,{org:n,space:r},o.createElement(i.Form.Group,{title:"Project's Title"},o.createElement(i.Form.Input,{inputRef:this.input,value:r.name,onChange:this.onNameChange}),o.createElement(i.Form.Hint,null,"This will be shown in the header of this project website. It can differ from your organization name."))),o.createElement(i.Modal.StepperFooter,{onNext:l,onPrev:u,onCancel:a,nextDisabled:!r.name}))};return t}(o.Component);t.default=v},"./website/components/RouteNewSpace/StepSpacePrivate.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var i=n("./node_modules/react/index.js");var a=v(i);var s=n("./node_modules/aphrodite/no-important.js");var u=n("./styleguide/index.js");var c=n("./icons/index.js");var l=n("./website/components/RouteNewSpace/StepLayout.js");var f=h(l);var p=n("./website/components/RouteNewSpace/StepWithPreview.js");var d=h(p);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(o=r=function(e){y(t,e);function t(){var n,r,o;m(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return o=(n=(r=_(this,e.call.apply(e,[this].concat(a))),r),r.onVisibilityChange=function(e){var t=r.props,n=t.space,o=t.onChange;o({space:n.setVisibility(e)})},n),_(r,o)}t.prototype.render=function e(){var n=this;var r=t.STYLES;var o=this.props,i=o.org,s=o.space,l=o.onPrev,p=o.onSubmit,h=o.onCancel;var v=s.visibility;return a.createElement(f.default,{step:2},a.createElement(d.default,{org:i,space:s},a.createElement(u.Form.Group,{title:"Visibility Level"},a.createElement(u.Form.Radio,{name:"visibility",value:"private",checked:"private"==v,onChange:function e(){return n.onVisibilityChange("private")},styles:[u.View.MARGIN.S100Vertical]},a.createElement(u.View,null,a.createElement(c.IconLock,{styles:[r.radioIcon]}),a.createElement(u.Text,null,a.createElement("b",null,"Private"))),a.createElement(u.Text.TextH200,{styles:[r.description]},"The content will only be visible to your organization and yourself.")),a.createElement(u.Form.Radio,{name:"visibility",value:"public",checked:"public"==v,onChange:function e(){return n.onVisibilityChange("public")},styles:[u.View.MARGIN.S100Bottom]},a.createElement(u.View,null,a.createElement(c.IconGlobe,{styles:[r.radioIcon]}),a.createElement(u.Text,null,a.createElement("b",null,"Public"))),a.createElement(u.Text.TextH200,{styles:[r.description]},"Your public content will be available publicly to anyone.")))),a.createElement(u.Modal.StepperFooter,{onNext:p,onPrev:l,onCancel:h}))};return t}(a.Component),r.STYLES=s.StyleSheet.create({radioIcon:{fontSize:u.font.SIZE_MEDIUM_LARGE,color:u.colors.GREY_BASE,marginRight:6},description:{color:u.colors.GREY_BASE}}),o);t.default=g},"./website/components/RouteNewSpace/getPrimaryColor.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/node-vibrant/lib/browser.js");var o=a(r);var i=n("./styleguide/index.js");function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i);var s=a.value}catch(e){n(e);return}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function u(e){var t=this;return new Promise(function(n,r){var a=new Image;a.onload=s(regeneratorRuntime.mark(function e(){var r,s;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return o.from(a).getPalette();case 3:r=t.sent;t.next=6;return r.Vibrant.getHex();case 6:s=t.sent;n(s);t.next=13;break;case 10:t.prev=10;t.t0=t["catch"](0);n(i.colors.BLUE_BASE);case 13:case"end":return t.stop()}},e,t,[[0,10]])}));a.onerror=function(){r(new Error("Failed to get primary color from logo URL "+e))};a.crossOrigin="Anonymous";a.src=e})}t.default=u},"./website/components/RouteNewSpace/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/react-loadable/lib/index.js");var o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,o.default)({loader:function e(){return Promise.resolve().then(function(){return n("./website/components/RouteNewSpace/RouteNewSpace.js")})},modules:["./RouteNewSpace"],webpack:function e(){return["./website/components/RouteNewSpace/RouteNewSpace.js"]},loading:function e(){return null}});t.default=a},"./website/components/Routes.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r,o;var i=n("./node_modules/react/index.js");var a=w(i);var s=n("./node_modules/react-router-dom/es/index.js");var u=n("./common/index.js");var c=n("./flux/index.js");var l=n("./core/index.js");var f=n("./website/components/RouteMigration/index.js");var p=n("./website/components/SignIn/index.js");var d=n("./website/components/RouteDashboard/index.js");var h=n("./website/components/RouteMarketing/index.js");var v=b(h);var m=n("./website/components/RouteNewSpace/index.js");var _=b(m);var y=n("./website/components/AccountVerification/index.js");var g=b(y);function b(e){return e&&e.__esModule?e:{default:e}}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e;return t}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=(r=c.Connectors.database(function(e){var t=e.user;return{memberships:t.isLoggedIn?l.UserMembership.queryByUser(t.uid).setOptions({background:true}):null}}),(0,s.withRouter)(o=r(o=function(e){S(t,e);function t(){j(this,t);return E(this,e.apply(this,arguments))}t.prototype.render=function e(){var t=this.props,n=t.user,r=t.memberships,o=t.membershipsFetched;var i=n.isLoggedIn&&n.requireVerification&&o&&!!r&&0===r.size;return a.createElement(s.Switch,null,a.createElement(s.Route,{exact:true,path:"/:mode(login|join|invite)/:org?/:space?",component:p.RouteSignIn}),a.createElement(s.Route,{path:"/auth",component:p.RouteAuthAction}),n.isLoggedIn&&a.createElement(s.Route,{path:"/account/verify/:mode(phone|email)",component:g.default}),n.isLoggedIn&&a.createElement(s.Redirect,{from:"/account/verify",to:"/account/verify/phone"}),i&&a.createElement(s.Route,null,function(e){var t=e.location;return a.createElement(s.Redirect,{to:{pathname:"/account/verify/phone",state:{referrer:t}}})}),a.createElement(s.Route,{exact:true,path:"/new",component:_.default}),a.createElement(s.Route,{path:"/migrate",component:f.RouteMigrationWelcome}),a.createElement(s.Route,{path:"/@:domain",component:d.RouteOrganization}),a.createElement(s.Route,{path:"/forgot",component:p.RouteForgotPassword}),a.createElement(s.Route,{path:"/account",component:d.RouteAccount}),(0,v.default)({isLoggedIn:n.isLoggedIn}),n.isLoggedIn&&a.createElement(s.Route,{path:"/",component:d.RouteDashboard}),a.createElement(s.Route,{component:u.ErrorPage.NotFound}))};return t}(a.Component))||o)||o);t.default=C},"./website/components/SignIn/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AuthModal=t.ReauthenticatePopup=t.RouteAuthAction=t.RouteForgotPassword=t.RouteSignIn=t.createAuthRoute=t.getAuthRoute=t.handleException=void 0;var r=n("./website/components/SignIn/RouteForgotPassword.js");var o=v(r);var i=n("./website/components/SignIn/RouteAuthAction.js");var a=v(i);var s=n("./website/components/SignIn/RouteSignIn.js");var u=v(s);var c=n("./website/components/SignIn/AuthModal.js");var l=v(c);var f=n("./website/components/SignIn/ReauthenticatePopup.js");var p=v(f);var d=n("./website/components/SignIn/errors.js");var h=n("./website/components/SignIn/authContext.js");function v(e){return e&&e.__esModule?e:{default:e}}t.handleException=d.handleException;t.getAuthRoute=h.getAuthRoute;t.createAuthRoute=h.createAuthRoute;t.RouteSignIn=u.default;t.RouteForgotPassword=o.default;t.RouteAuthAction=a.default;t.ReauthenticatePopup=p.default;t.AuthModal=l.default},"./website/models/State.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./node_modules/immutable/dist/immutable.js");var o=n("./core/index.js");var i=n("./backend/index.web.js");var a=n("./common/index.js");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){c(t,e);function t(){s(this,t);return u(this,e.apply(this,arguments))}t.deserialize=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({user:o.AuthUser.deserialize(n.user),database:i.DatabaseState.deserialize(n.database),config:o.Config.deserialize(n.config),platformStatus:a.PlatformStatus.deserialize(n.platformStatus)})};t.prototype.serialize=function e(){var t=this.user,n=this.database,r=this.config,o=this.platformStatus;return{user:t.serialize(),database:n.serialize(),config:r.serialize(),platformStatus:o.serialize()}};return t}((0,r.Record)({user:new o.AuthUser,database:new i.DatabaseState,config:new o.Config,platformStatus:new a.PlatformStatus}));t.default=l},"./website/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("./flux/index.js");var o=n("./node_modules/redux-immutable/dist/index.js");t.default=(0,o.combineReducers)({user:r.Flux.user.reducer,database:r.Flux.database.reducer,config:r.Flux.config.reducer,platformStatus:function e(t){return t}})},119:function(e,t,n){e.exports=n.p+"images/b1c4c86ca817a71628d2debe73be9a64.ico"}});
//# website-part-01.651dfcf7.js.map